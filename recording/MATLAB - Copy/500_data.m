function [Y,Xf,Af] = myNeuralNetworkFunction(X,~,~)
%MYNEURALNETWORKFUNCTION neural network simulation function.
%
% Generated by Neural Network Toolbox function genFunction, 18-Oct-2016 12:47:12.
%
% [Y] = myNeuralNetworkFunction(X,~,~) takes these arguments:
%
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = Qx60 matrix, input #1 at timestep ts.
%
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = Qx9 matrix, output #1 at timestep ts.
%
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1.xoffset = [0.9375;-83.3125;-179.5;-9.96;-12.03;-8.01;0.6875;-88.875;-179.625;-24.89;-15.38;-15.21;0.25;-83.875;-179.6875;-13.66;-15.24;-13.09;0.0625;-85.9375;-179.125;-22.08;-25.86;-27.26;0.125;-86.1875;-179.375;-15.38;-27.97;-26.4;0.125;-89.5625;-179.875;-19.82;-20.48;-22.82;0.125;-87.9375;-179.4375;-20.46;-25.58;-29.42;0.8125;-88.6875;-179.3125;-9.11;-29.9;-16.26;0;-87.875;-179.25;-3.96;-4.64;-3.09;0.125;-87.625;-179.6875;-5.94;-2.9;-5.75];
x1_step1.gain = [0.00557491289198606;0.0192655027092113;0.00556909154194222;0.0822706705059646;0.102564102564103;0.104547830632514;0.00557588430040077;0.0195003046922608;0.00556424969570509;0.0473372781065089;0.0617856039542787;0.0579206487112656;0.00556328233657858;0.0206851971557854;0.00556618542355192;0.0571265352756355;0.0715307582260372;0.0667779632721202;0.00557977332170881;0.0192076830732293;0.00558561703613196;0.0452488687782805;0.049862877088008;0.0427441761060056;0.00556134862704206;0.0187793427230047;0.00558659217877095;0.0386398763523957;0.0442282176028306;0.0459770114942529;0.00557394182198223;0.0179775280898876;0.00556424969570509;0.0367174591518267;0.0471031559114461;0.0391619345995692;0.00556134862704206;0.0183591508892714;0.00556618542355192;0.0421407501053519;0.0407497962510187;0.0482625482625483;0.00557200069650009;0.0176600441501104;0.00557588430040077;0.0524658971668415;0.044612982377872;0.0801924619085806;0.00556812249869497;0.0182544209925841;0.0055963623644631;0.171379605826907;0.168350168350168;0.178731009830206;0.00556134862704206;0.018724400234055;0.00557394182198223;0.174216027874564;0.247218788627936;0.0969461948618517];
x1_step1.ymin = -1;

% Layer 1
b1 = [-1.2536829514635766;-1.1512128190699329;1.2911821563827872;-1.6908647748531129;-0.67252931281674311;0.79768456166686275;0.029695920013755244;0.054719205852508557;0.90644695147608967;-0.4729416762627095;-0.011576808614513464;-0.46399238463346631;-0.77980166765025527;0.36636668333634848;0.13262761305146897;0.82699483617220193;-0.79118865048220111;1.0708937731713368;0.59728670404639883;-0.99556205318754587];
IW1_1 = [0.24329221657166855 0.88393152450190404 0.38556850004539078 0.0087529656532372019 -0.61035736928168605 0.065158131981476533 0.052048803404778327 0.72460533628020818 0.6498464395404423 -1.0012709271674038 0.5903757115663012 0.30361559605826582 -0.060182374653098995 0.52885310197245405 -0.43738534719574368 -1.7479583457156906 -0.25157477483930246 -0.55569626649112502 -0.44249285982418068 -0.17876207046616652 -0.15186650669830093 -1.0104966015147707 0.46058966181719047 -0.36838766010689727 0.52434432032888167 0.036972255976193198 0.45139864222277037 -1.2344247102720856 -0.13615201181484046 -0.092818705653115161 -0.065186633436872393 0.061583131310628494 -0.23553330215227714 -1.0842818804441505 -0.66724176379189459 -0.035395422848012746 0.12234511788163685 -0.18218917622701916 -0.20008998714618104 -0.3180020571912251 -0.95071029471474455 0.02858117732514882 0.054630884558630279 -0.43127277164516004 0.09195981562841303 -0.21998587182890725 -0.34236752623591715 0.10526130970371743 0.14538913328096725 -0.54420845560828834 -0.012243812103041225 -0.061544678928597496 -0.22644872173275946 -0.17807407538918349 0.068426068191885556 -0.48956099033286787 -0.25711595544135962 0.14611467356054877 0.28159076379344622 -0.44353975551470776;0.22639182207007272 0.10786978249974646 -0.46209576499786936 0.077789659013575166 -0.077551097191417548 0.08401104771924929 0.15149426334571336 0.31135980748057462 -0.17870338949747896 0.89457860270101885 0.28168144666180367 -0.29985682299773825 0.52363064549570948 0.51679782613880942 0.37774130098706243 0.85840834209785599 0.061170080357046734 0.58161989347569776 0.019896554042264394 0.54365706428370264 -0.040021696340511476 0.7998066083823917 0.23803723650920242 0.66687609562689354 -0.25197201655716522 0.20762928867234745 -0.23939450128217019 0.37348103372739794 0.32984070311279562 0.58518684119410902 0.21895747035497867 -0.17185490862764199 -0.28380630673261942 0.026961099853282336 0.31652927520756835 0.59700746033184182 -0.19128243913282209 -0.45403663088632917 -0.46072015722005338 -0.25549791000908167 0.12150087740347919 0.49966560884826139 -0.28675108317794895 0.038609318439940678 0.33848883774374355 -0.38459422243182462 -0.046648577496286633 -0.034976612366613063 0.11997465653439114 -0.28998913550069216 -0.046248430742697862 -0.37764984727831907 0.049930556393778712 0.1724160614782749 -0.38633435277451866 0.05551294747629533 0.078931252503782828 0.084285912212388334 0.076256350893631794 -0.084939419023318863;-0.24847030131732983 0.32856183381563786 -0.58171771235717173 -0.17276496028131236 -0.15235835416285654 -0.072524389627639338 -0.3067475268746816 0.1269535160552904 -0.38708633266785747 -0.12236667890094953 0.46040181209618397 -0.75061004673166631 0.17979138257983859 0.17822191334329837 -0.42191670276453763 0.2556197901904127 -0.037367058095160569 0.13686234891351978 0.17980802472003846 0.093146268554396131 -0.077978988383214404 -0.077744942292650346 -0.09711883079652428 0.51888863764550652 0.15193765488784144 -0.47577617733227717 0.18747025228495406 -0.092942617701846142 -0.25956400887263864 0.031403411298759301 0.095993427453402294 -0.35182779748866794 0.22917217892458522 0.053396687264845685 0.36174862746171543 0.32635227028790847 -0.11662484259833628 -0.56964857530379309 -0.21382663001317451 0.14309685328923896 0.12558376164272361 0.3994652745049771 -0.25379675751134956 -0.1358556937065396 -0.023486143265004224 0.14193733505664444 -0.11188773514337264 -0.18355369621649972 -0.3542076893924424 0.042421731717710999 -0.16727402539235778 0.059633765176135771 -0.24668069487746871 -0.09015097480405275 -0.24180527295819285 0.038344342407437768 0.0069751419298479988 0.27596778686072854 -0.3770605079864226 -0.21831552190053041;0.43898410473564858 0.41392185760935812 0.25658058843922366 -0.57747458477290681 -0.44198976395390677 -0.067258225266732558 -0.11544643347180662 -0.20718846312078118 0.13634954842924299 -1.2046816379390843 0.7378333286654617 -0.28589605433030846 0.00017684940618145758 -0.012062661228066155 -0.91591129725925347 -1.2816499092688145 -0.058654899697783591 -0.25573526360259441 -0.23337026978347075 -0.032248448484786169 -0.34448862121391466 -1.0453293175084908 0.15078087935865192 0.23235462362026485 0.010471929775667509 0.3177160999833879 0.12914047596795461 -1.0344846856099992 -0.19819536103805843 0.080295667721074479 -0.48621734631153291 0.14306262447001036 0.53950855988850044 -1.8770011479442499 -0.37316140496792055 -0.21455752605064751 0.14319397173058068 0.6176503457474205 -0.27929446152085247 -0.40139402051516077 -0.35483630146052741 -0.50742669387517747 0.21454995122270548 0.42444375461032907 0.14262490073005596 -0.17101283568752407 -0.21040697937755379 0.18373210338071444 -0.084632633303396959 0.37097023493866632 0.011536703824095685 -0.061027664241621683 0.12757128647574015 0.48210449986767706 0.20136497094482145 0.7063783176948687 -0.28704854392260742 -0.43682394587275797 0.27094080765677103 -0.20176704318875258;-0.49544910176325968 0.16004787249360092 -2.4804320269874895 0.7636324596483578 0.37109598060919596 -0.17831552765384365 -0.30598335058452475 -0.26150847828793089 -2.2811628155038193 1.361597464981297 1.0789874066583014 -0.0077711989638491828 0.38582836190567521 0.087239729933403898 -0.78956220829170431 0.26744754118820679 -0.17248385577941203 0.49691431229200378 0.25313738949795184 -0.75274343640053332 0.74870430234030794 0.75364170942333863 0.18187842161619522 0.31165022620814975 0.34101400053488568 -0.30406621748805152 1.2618515934227668 0.37686995306450394 -0.21828075797590746 0.48084261995330385 -0.16732218123906195 -0.032788940944206757 0.86862107915629683 0.36259888384017586 -0.33859592825683832 -0.13804422013852805 0.24829914819213666 0.29441866599403116 1.1011471637219843 -0.11841219539034899 -0.7123098405530911 0.34896841778125054 -0.23308687019802946 0.63269131128469336 0.91211616455834965 -0.096643838846463131 -0.20950271197004422 0.35377479308949911 -0.2084301305728895 0.52620094322654121 0.40683998254367382 -0.42063732456161779 -0.77748183485621825 0.27605680944699623 0.20206044302030313 0.57545296392223388 0.63573728258292206 -0.27413965303643634 -0.26024566158947615 0.12067471539569219;0.14863544179594657 -0.13796939082251619 0.035669635495971908 -0.33871953197503851 -0.037298962919638738 0.18820380922797764 0.24360553152504383 -0.26509634561317624 -0.11284973164051282 -0.93003858250534799 0.47613451722719274 -0.46567423046915896 0.72111161425122472 -0.66977457989112121 -1.687627004403804 -0.45474785977501153 -0.25475760493861643 -0.81354611212734884 -0.27489472098938983 -0.70609118180593167 -0.2214899146414061 -0.78309652728617496 -0.33918436630075988 -0.6001320182999873 0.43654285783692781 -0.56912337928386358 0.57942546022306274 -0.55558286000672152 0.15708204523559147 -0.26773354704015662 0.35059784421937917 -0.10491797090007315 0.47504813474520702 -0.51548774640072759 -0.044051514696234723 -0.37335137923526257 0.023060103089382313 0.039101677591474468 0.64249990131013379 -0.017827038554261654 0.5524450309530925 0.076475362411451517 -0.29118752556504618 0.44092880174457516 0.071529576166475844 -0.1285118344505275 0.26740471662291426 -0.092486612414143771 -0.38054595368671179 0.15735442700420743 -0.22870820963041999 -0.35789836782950324 0.11476866733584369 0.18727123655255673 -0.37466130915178458 -0.040336278480466267 -0.3266933943928011 -0.31867396051757019 -0.36950823872241645 -0.24735441587506088;-0.1109108798233205 -0.99540073288795805 -0.077409799196835827 -0.033498577834591536 0.12571560823349046 -0.079968463369244971 -0.020658794942854275 -1.151417504611977 0.39901224670970964 -1.0284468372838835 -0.85394023318853574 -0.61131046888152141 -0.021079001086068597 -1.037325278018759 -0.029343620099812555 -0.38324250020006168 -0.34446374456737677 -0.3391603850371267 0.27473426281422164 -0.15815025274519795 0.32151925587525371 -0.66743293674399828 -0.22200666277812325 0.15072099151194032 0.027264635544879238 -0.18522304502100542 0.053108540065957006 -0.39899934174048429 0.48653183402238309 -0.018548186678540073 0.210452017515118 0.73600453122905174 0.65941646602362713 -0.030033802223706781 0.34552794974455836 -0.22023293523273052 -0.18499030151649606 0.71290688786768774 0.18948838121152847 -0.29729798843350314 0.5021343656492111 -0.1573518360304694 0.13555355342094902 1.3355406004102319 -0.10665200237796603 0.25382022964188755 -0.25002863624173144 -0.098602817355871439 0.29925020224763027 0.9209862900635758 0.24122840225649991 0.002257430958377632 0.32198430473726664 0.027906439422223168 -0.084041350577763727 0.71297410948073559 0.10475683494943946 -0.52264567592159139 -0.043430110645892459 0.36794503400157297;-0.02530373036795313 0.45038763854667185 0.0027835847243749667 0.094969646028535859 -0.10387825653971143 -0.12684379168439727 0.050269042478089873 0.35782860445883319 0.18504241866029347 1.4506386612732951 -0.17260709245043054 -0.43696778694214689 0.169849176666728 1.3594623729830515 0.96400693875865995 0.27558215983512169 0.40642104013949054 -0.2282077775336494 0.34487653785985523 1.5221816375016388 -0.40701239593601202 -1.1839112852421849 -0.10848605735933319 0.39935902768213349 -0.17954162575572727 1.2787861064451957 -0.035225061130173881 -0.77854948861115936 0.015174964296121144 -0.21948763061061499 0.02655001283579566 0.071169881518569386 -0.18600448456432911 0.7254328087450681 0.34307146162882346 0.073645872607004129 0.11065976316306349 -0.94550358588289329 0.24488751608577486 0.97472373128095602 0.31030455766660109 0.35004898561517861 -0.080851891355731093 -1.4397137598759453 -0.16212649757051731 0.21331797204287706 0.79119817697960615 -0.23266411536442885 -0.038415407662276038 -1.492798196180261 -0.26742412360554974 -0.40701132361969683 0.16707769532192174 -0.43227707532184845 -0.35723236520878021 -1.5303003280368759 -0.47695457249124967 0.018210066510759331 -0.40033260758637762 0.3983582075092047;-0.058351709493465208 0.56737996722738437 0.29061248185789806 0.04512941701904101 0.30421956112881943 0.08156304570809865 0.39407710786051692 0.55447536849800017 0.74945397680091863 1.1660507200217594 0.76018289120693461 -0.2713126799545485 -0.14248420676106904 0.43308883454392616 -0.26935006674603784 1.3792363517976669 0.68479315110923722 -0.50764957360788387 -0.20708287744272375 0.12828326300188336 -0.051898640929867609 2.6211753627137266 -0.32000490788213426 0.18726724045943288 0.029229944417934403 -0.40320889871038579 0.59902914481589453 1.4409095494755522 -0.33755722819332501 -0.041912644120420429 0.24896913073864727 -0.7959722012428645 -0.039622743589055667 0.64466202290708075 -0.23325802940193061 0.30205195828236087 -0.28942110429448992 -0.7373841516362083 -0.14617963515456445 0.25463110934613853 -0.50817363254786829 0.60181186833000699 -0.0017148500837193548 -0.9158457271342626 -0.1335485942036039 0.056304299659718532 -0.24450705311470475 0.08672222293135709 0.13618527185209545 -0.78120304030943533 0.14292942556301061 -0.065999115864767796 -0.56721199338703765 0.22347413280610648 0.043831468119006588 -0.35820664061740881 0.01736598495344446 0.54623662456957767 -0.76381562702290073 -0.42844533194080503;0.58810671988253482 -0.91390277547444765 -0.059457327083208798 1.1641592436106949 -0.44709529307074275 -0.55836004035575038 -0.47618527389919929 -0.68874119852130655 0.22979185405128169 2.5985865542163995 -1.6591502201116402 0.25968639228215568 -0.019147815216649773 -0.18366402088189671 1.2715419209502901 1.1275718884003609 -0.98181511383961362 -0.77754547535448182 0.099436185454137738 0.18028807482266976 0.11619896975211016 0.94331241898145302 -0.42343133772369973 -0.80955837094252148 -0.045883912441619511 -0.2706720570905114 -0.45361913505094004 0.17621853802097776 0.81520528024784333 -0.86524492502195371 0.48745390016076862 -0.30345466042687036 0.7820273583909334 -0.88863318605113917 1.4548675651170611 -0.020175169127150096 -0.44087073171727442 0.17549141814226782 0.54040811489945906 -1.7136191887253844 1.3451510846902393 -0.21000672164651377 0.011297968144875827 0.12935158718892822 -0.55353894267411385 -0.77062529453739015 0.49638280425534492 -0.30091109066843719 -0.066692820579970211 0.43161255218395289 -0.064191231792566777 -0.62437839779611115 0.67706096805208316 -0.65399028060152276 0.1059329819738192 0.43118906429013459 -0.48840531054071451 -0.26362213204487128 -0.36038455428809907 0.20876713373768449;-0.094941507014441595 0.45423607009101463 -0.52992017865611929 0.17281757695433889 0.17082624604790142 0.19433673325757678 0.11956208084573909 0.48841036730473769 -0.038678797306273383 -0.40931983859588422 -0.17578991072036113 0.11751212974657514 0.0090115387404452497 0.15680947387457969 -0.16130733607270353 -0.26824610246934644 0.088964162793287213 0.069364722774282545 -0.20606011507726096 -0.0090011772667573878 0.26368768332303361 0.11542417511322961 -0.33564615100484441 -0.021554938076045933 0.030571236824400536 -0.055856875173075013 -0.020971000871558666 0.11722053816734596 0.13049090239883138 0.0069587903926197642 -0.12188289282031517 -0.3684834938816654 0.088081109800946189 -0.48035536228575876 -0.10143046566243252 -0.23018305265987574 0.30261445038370904 -1.1037538079810101 0.20651450632328169 0.062336970741989614 0.06310196345480884 -0.15803520506491092 -0.16347571831610924 -1.1827902807835473 0.24524244125858669 0.22587137335138041 -0.10579170998478384 0.00805749575232639 -0.053500280584923093 -0.85936354127551629 0.079812254204105246 0.25189004389971376 0.37945204973853813 0.11646120620221845 0.246483622488335 -1.3026958438501288 0.046710378951490404 0.34563351546819843 0.045429859156281116 0.35235713635471838;0.24796601961637998 0.47288777318618436 -0.64302607383684574 0.61884235763670115 -0.26009857417595444 -0.53268332068746682 -0.34986231921953487 0.9355037039341022 0.21686400878816023 1.898192006014618 0.78964052358079351 0.31514863993597947 0.35786171367901659 0.86827980507386238 -1.8690214898957058 0.27026430626146114 -0.94114026409818896 1.3432437176976715 -0.75109710849144273 0.11748205453839287 -0.52756623768589928 0.33113792902543271 -0.50649411957273471 0.23273400651033629 -0.24638547641222067 -0.37077940945913923 0.082385370770767269 -0.13864691340177138 -0.57351543090232771 -0.041755119662054058 0.095925020006654427 -1.1244662369568024 1.0659250832464553 -1.6436435469140642 -0.022771114046026338 0.16421661605301599 -0.050882903315212467 -0.79303794879687217 0.31722403744784622 -1.8892150371164194 0.22146635431799896 0.079805205638071683 0.48325391769562365 -0.58087842788943889 0.44452704814951177 -0.80522154278464164 0.42194738520231134 -0.030670390203292236 0.018649375466937606 -0.29849098367610477 0.41675433678968454 0.2028420806052558 0.6206180241696081 -0.0010549612929642606 0.04407636964999926 -0.1513236603755081 0.50012367486241538 -0.26743479753199029 -0.1700885285472522 -0.22014236984916608;0.30842454440894251 -0.29423284116366538 1.878323587600141 0.90840718153991384 0.41949667813082492 -0.1600386896535613 0.064697414078262891 -0.56873340880196377 1.6758053192410378 1.0456310738709833 -0.028925798809225526 0.068309218068366748 0.13761834232279249 -0.14369045209258241 0.79651534428097581 0.43439184469392572 0.71565441692771814 0.031758175225703643 -0.15131917318003743 0.46383352499998143 -0.52401946045294923 0.36864417191645815 -0.11224461912179207 0.31121770148860889 0.016680526583052468 -0.27131444296211182 -0.69586973258648788 0.24135103491329618 -0.23632254893492177 -0.042975018412141464 -0.35743451995137665 0.023962709101919902 -0.76411676916497018 -0.85708371578887199 0.15165716258510401 -0.13040220853555887 -0.43871449280223734 0.29396654958146085 -1.0927119477618887 -1.1642110871439557 -0.0084239838742546994 -0.044389722167110707 0.045268245505829668 0.44613280144072154 -0.77375063337013728 -0.30759124288131151 -0.045735401675734616 0.081965541767458516 0.22530449689636731 0.27367891323224597 -0.46532402411134799 0.1921031359684881 -0.23554785301281822 -0.46445190507222073 0.34070767419594228 0.77014175328615131 -0.78420612269561196 0.11551944457645122 0.31639969252429512 0.23413515757624634;-0.015609951137944545 0.68529800248414541 -0.59104245635385277 -0.25062011123855688 0.13596750157196075 0.0048713035194663992 -0.10221735552245968 0.29844068871624396 0.2303371815766084 0.025855525328392606 0.56854413700293249 -0.11536588116781091 0.3765673843132174 0.79845411091142693 0.25775900113813138 0.024345866319428641 0.23208632728199274 0.80322586307965682 0.024406252453495411 0.89825217179024908 0.099261041126076047 -0.26329348023226828 -0.1921539725988746 0.53259629000569919 0.45385991523876368 0.52204922170359047 0.33496235656712758 0.31439004165758022 -0.038699260037484598 0.23679790550320487 0.19485438508161715 0.12800274484918794 -0.27887071432626709 -0.42466081910085351 -0.064150496007188418 0.098456700635101022 0.02119429752729601 -0.20033741715592163 -0.2596504989192967 -0.5163915372049479 -0.68568935281400956 0.039956350680349036 0.1877212949684241 -0.6014395352035341 0.01324064834543775 -0.14426658592189484 0.08665465306206914 -0.060185180322742116 0.15724259103498597 -0.44372234891040585 0.31165411677487348 0.23627137724674591 0.15431783750804476 0.51326666449476732 0.21712104057290071 -0.19994561950423112 0.14907932732863807 -0.24035055100278638 0.083684436076682744 0.44726250065001677;-0.083945122686916229 -0.14221249700545457 0.71905138825814452 -0.41054126558178983 0.21397803208352525 0.32185334164374085 0.23666865899069561 -0.42329626683878652 0.77921472624559107 -0.47707294373515685 -0.12808245571262777 0.083308760845405463 0.12016525509330772 -0.73845731830051298 -0.35119212812537798 0.082397768732272184 -0.72338246630064917 -0.015430857053214838 -0.12360266848802511 -0.84373829671137279 -0.17213609573050501 0.21699771332142348 -0.10827631279171955 -0.3494081746832628 0.22014161243173908 -0.40085252134838417 -0.42979023719531551 -0.10108738271661451 -0.012007048470694151 0.03105297332399946 0.044810994021174083 -0.43963115194722791 -0.17606692813330158 0.39880137394208853 0.437440631647115 0.038018361681795211 0.046094260570284901 -0.29823048803111324 -0.066854200168001143 0.28084380829177208 0.40585537659191917 0.44824433234638361 0.037212138998545946 -0.48951163544430848 -0.29244304230945323 0.18508602688075126 0.41354035556194052 0.13167953458809156 0.1696918413384213 -0.27605920296636827 -0.13584201819772565 -0.45623256265820111 0.17407497896518456 -0.30082296694464594 0.1959239283862334 -0.068412204046876784 -0.13722012934312774 -0.023636041651312136 -0.16891443719012375 -0.14839820139104698;0.16628944711692131 -0.86408226888311079 -0.80243547964712991 -0.62842651131573046 0.29085670339923558 -0.26444694972066879 -0.24938162094114966 -0.53529796400026819 -0.66516520131501455 -0.21131514191314496 -0.27819930350671529 -0.047238458397053137 -0.25750161457963877 -0.34738744701063878 0.26990989715080649 0.56707770786764211 -0.27093734249988699 0.1530774641512577 -0.11727619600715106 -0.089667228665027784 -0.15321441532421012 -0.20064285317673416 -0.23073086137857637 0.35397902102253387 0.15811060973339044 -0.22960099484615701 0.11405570269311238 0.52399657577975745 0.14117322227075374 0.001156612239595112 -0.20440542195939757 -0.038813842916821044 0.10260373873211236 1.0941350013931743 0.62022723180590633 0.037399474408177397 0.082858178295637075 0.36152616870383747 0.44687731576002843 0.64737722980122547 -0.00018063484905782388 0.23311736722167439 -0.17587016153048257 0.11146355490957652 -0.11826926897686424 0.08575928506149956 0.096931773177500541 0.20065974867398265 0.14866762939867362 0.21908574385962987 0.030436765162981352 0.0020041972073271712 -0.084017637370162143 -0.27912460294419689 -0.14225409311956874 0.35732529906073779 0.1309802576300354 -0.31359760329009029 0.19047201495026284 2.3140283401024923e-05;-0.39253993799912962 0.33698067730506404 0.29439304718603687 0.75799183919449153 0.053425987644532331 -0.26570603892606059 0.042772701159989622 -0.27697505671014966 0.39724559837198747 0.89837431990118 0.80300532607118602 -0.13546875484766144 -0.092330239019000587 0.089473825560534029 -0.37667203116005243 0.39960676554878116 -0.49195267624282546 -1.35062222041449 -0.077600301478424866 -0.1101720907797868 -0.39365535634364363 -0.20630664791013659 -0.043901808101627138 -0.054093939257759044 0.13668097622790465 -0.56759987418041635 -0.55901264059035893 -0.52534467200249502 -0.28576391448789984 0.45844650460918601 -0.3353446591926883 -0.12259982630332064 -0.23383216622888642 -0.2107032804211795 -0.28395447692382692 -0.13328013964009705 -0.3331373003778727 -0.17310187204523586 -0.15795931003319125 -0.031029858333716964 -0.27271907577106991 0.056275995741796508 0.15939467358493822 -0.18342580405910497 -0.24878797660735327 -0.39798682894002679 0.030426101702905606 -0.075262035960945009 -0.22794487200797561 0.25250432113971438 -0.032908548512804434 -0.45158769069771604 -0.2144482020731962 0.14086429846037449 0.19901761352717007 0.0080012526733860834 -0.41610146739079662 -0.059288125895013984 -0.1588914932229088 -0.0076035661054997348;0.2672848472069379 -0.25338685192122162 1.1699025052704861 1.1738231988119363 0.43899880436910182 -0.121666617585254 0.032238722359278361 -0.47954715362976563 0.92227546061196575 1.7900885494277008 -0.58735393118311974 -0.088421099515128887 0.17759020336450596 0.2911087778934201 1.0054111296177721 0.99221006363472541 0.10016575452923845 0.48037551861924693 -0.10591793663119835 0.29272222665993841 -0.099575415499242093 0.77883096978153576 -0.19897212608215625 0.42219694516841705 -0.26489083056251672 0.03821727342188401 -0.38136585379483739 0.61234921267823628 0.19208239584275041 -0.27295516248882118 0.044291255039111445 0.028038435358585141 -1.051861654124751 0.86962096446053128 0.45535723412842466 0.045713696163697491 -0.09192309155134247 -0.1199438511003634 -0.57476322557933934 0.42238856065756675 0.1539825632378494 -0.15761944078719572 -0.1654171297084224 -0.22659299624406382 -0.70181588275105944 -0.26452133119969096 0.13362520579387685 -0.13473908314009375 0.35931335474000531 0.084568395502047866 -0.28381772924458198 -0.51417078026537377 -0.062949819427832329 -0.34847803152155393 -0.047906756208135004 -0.18316467260589078 -0.59220922298114631 0.17288807224989869 0.205674050097435 0.29984297120892833;0.29888087954447329 -0.34957461734096984 -0.30811858694313327 -0.99688569951901862 0.1050985349919864 0.17257103909007807 0.078938549337080804 -0.57194007042623674 -0.6233057760612315 -1.5874601707699285 -0.3640111475948915 0.47932900941313855 -0.1506706673041259 -0.87430171668648826 0.43076799154111589 0.16766383381928901 -0.15307627479798624 0.3430708453591173 0.11976365448157102 -0.59620324758575083 0.082268258752198037 0.3413782024158743 0.080621292418007653 0.12199251355968466 0.020610316633341903 -0.17468524063445906 -0.18169700978417655 0.75229887291104702 -0.30093500092330755 -0.009392119084182908 -0.12789736360869428 0.091096408407036616 -0.022027592092125545 -0.31700597171452022 0.031840953653842076 -0.25405558077105128 0.045086364509253886 0.28475122383539719 -0.3602966913902278 -0.80384995481803156 -0.10345676337427766 -0.042036907147030067 0.1023047950260919 0.76576219033468851 0.049903645567191526 0.58722170713012278 -0.010520008094178178 -0.36479983591622284 0.015105495337322132 0.87447900565947545 0.30240568761219344 0.51289141052407639 0.1340545688885709 0.21740229074710751 0.16616328089841645 0.84147131501410199 0.03254354761544314 -0.67591718690801439 0.15641715082379087 0.51731452807195144;-0.35498221809403502 0.41529853155068103 0.10152621825320526 -0.36911228605389607 0.28752933619464599 -0.23110883167143637 -0.014418912472246975 0.30941194426558327 0.16674190295118868 -0.10090933984769553 0.5171682928738488 -0.73585485161898456 -0.46342600095962211 -0.034198664716857799 0.18450767300017742 0.29467900549709852 0.17516069263115511 -0.039136332852040726 0.10834900432035939 -0.35062910245494394 0.24667346795169726 1.0443408895405639 -0.10621109763971234 0.57029776506556107 0.13534647246475834 -1.2580158929345679 0.0088215550063361937 0.4584731302545908 -0.53523818169077697 0.052284727262278799 0.051900932674778036 -1.0365655876300779 0.15232165623601457 -0.30787144791956961 0.22736347865282103 -0.42358919232018116 0.1013799150087608 -0.50798632962298573 0.16086027372659067 -0.42995298280266531 0.21157143214365018 -0.19761858574002744 0.019992434486168959 -0.74422793326281311 0.35965546307065777 -0.16047330276519181 0.26662159567897348 0.37116046252406604 0.1212010940632077 -0.21081019008607757 0.23413554676945189 -0.11231085782316394 -0.26895262680170823 0.26346379697605027 -0.10370750038659952 -0.42763861506189299 -0.15491431981484116 0.095880524757620392 -0.39530627670529767 -0.094121256132682254];

% Layer 2
b2 = [0.16237174418792583;-0.92259058253839099;0.93107275452024052;-0.41672282375089015;-0.69925874964629398;-0.64892008264528922;-0.23013051316361544;-1.1053492073408517;-0.42993292393676791];
LW2_1 = [1.0300576889878861 0.35611434737855058 -0.094688965495620794 1.2279454368129707 0.012388060374811324 -0.14899850390775485 -0.057828571506475523 1.5940870404816161 -1.6025683072106385 -0.77274641569795066 0.1138274380526481 0.28579014967540717 0.026686323977698007 0.51352157483014504 -0.43865327926665088 0.49269512951113342 -0.91025192123951071 -0.29758042383621158 -0.71727730600534734 -0.70940769556108174;0.26677594167917412 -1.1771297850082709 0.90754663908949362 0.71577868874898531 -1.1213768546400502 1.3376085947807166 2.0070928915331514 -1.1934728339119749 -1.4985455431487757 -2.5628208934848393 -0.035981997550102486 -2.5009286448005144 -0.48220209182606572 0.38432693660345824 0.49782105912050306 1.0443993234842259 -1.6460864576637622 -1.8619532207890379 1.2977064094102786 -0.78672146001820098;-0.12906797639584944 0.98527247584723254 0.65528588492282625 1.2226840105936727 1.2596449780608225 0.030655562528134707 0.46697995265256448 -1.7664233828427451 -1.3249496675314474 3.0548027679750192 0.18687068795164602 2.6256074704941348 2.6057044782443528 0.43678004674569948 -0.72226373118108134 -0.27257714187845877 0.71623362952998826 -0.25117051767511356 0.70504285553926083 0.88796482710018754;-1.8705612808515244 1.4574522613057177 1.0808662463445795 -1.9526758495163472 -0.89076778618234176 -0.21071215787729339 0.19191348312765008 2.7815409300813099 0.82600752045050041 2.1446413920324519 -0.030080972544258209 0.52592618825264725 0.097449814910560151 -0.32157023977818971 0.46733219401218101 1.3407578125236839 -1.1865794580710669 0.88524919034307636 -0.75352004693139041 0.45435120198928441;0.002576114602099033 0.67099427973363335 -0.55682725217282658 -1.3571409170248805 2.0578747959663679 -1.6736405124937321 -2.1214151432910535 0.19741227123986743 2.8470428457254555 -1.6872410071016888 -0.91187339814203372 -0.88365525784463195 -0.014726199001001255 1.1481983293313394 -0.24056919240208288 -0.19418147326226706 0.14811086367444884 1.0404155798110641 -0.54839441473297879 -1.3949154074462369;-1.2201109791281493 -0.63399990404374162 -0.14652979530729976 -1.3394630478863694 0.72881951907449616 0.77985163820222969 0.27521034501286612 -2.6398335385283582 -0.23373120236487818 0.89158303601845601 -0.65684731960712328 -1.0115167106693446 0.30269742957794249 -2.5271595897996009 1.1332598442598465 1.3209092752211187 0.27136837158317217 1.0194003015657824 0.17099090348056453 1.0745032320379349;0.87922706160700037 -0.46052413417780763 1.2167636726493885 -1.8962006456867104 -1.0966597170819306 -0.060605032271667227 -1.9805735599879908 0.7077226413052613 0.69911975585880304 -0.60157891458108859 2.3641308108779908 1.16014422019316 -1.7781845333585775 -0.23530489238107044 0.83580315710223052 -0.39403429420943914 -0.40633197649079028 -0.4640074625187145 -0.7234860313426591 1.383100629118748;1.0091996306579381 -0.41201884339660483 -0.4297884800167911 0.67356289122128732 -3.6603580802556337 -0.0024212661370861715 0.94553637184189321 1.5681227175039836 -1.2623136563041071 1.0323860781137204 0.41333124712060826 -2.2194327984501134 1.9585475511243424 -0.52423237501060738 -0.69907654484727488 -0.37718516561624832 0.15840204865812035 0.12201708959424432 -0.31615568888240492 0.11246031733857552;2.2294181400955777 -0.69606211846774235 0.14086818744085261 1.065507079552366 1.5102772521734609 1.8266615016843062 -0.26125320498142479 0.51049463725748434 0.71204476339916911 -0.75917727486453146 -0.92583567801435773 1.2920095509940575 -2.6051168018167385 -0.4777578641280758 1.4911223448002955 -0.93693170258152336 1.5824131591159953 -2.7557062353532085 -1.3984010394960535 -1.0501552306465836];

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX, X = {X}; end;

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
    Q = size(X{1},1); % samples/series
else
    Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS
    
    % Input 1
    X{1,ts} = X{1,ts}';
    Xp1 = mapminmax_apply(X{1,ts},x1_step1);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = softmax_apply(repmat(b2,1,Q) + LW2_1*a1);
    
    % Output 1
    Y{1,ts} = a2;
    Y{1,ts} = Y{1,ts}';
end

% Final Delay States
Xf = cell(1,0);
Af = cell(2,0);

% Format Output Arguments
if ~isCellX, Y = cell2mat(Y); end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings)
y = bsxfun(@minus,x,settings.xoffset);
y = bsxfun(@times,y,settings.gain);
y = bsxfun(@plus,y,settings.ymin);
end

% Competitive Soft Transfer Function
function a = softmax_apply(n,~)
if isa(n,'gpuArray')
    a = iSoftmaxApplyGPU(n);
else
    a = iSoftmaxApplyCPU(n);
end
end
function a = iSoftmaxApplyCPU(n)
nmax = max(n,[],1);
n = bsxfun(@minus,n,nmax);
numerator = exp(n);
denominator = sum(numerator,1);
denominator(denominator == 0) = 1;
a = bsxfun(@rdivide,numerator,denominator);
end
function a = iSoftmaxApplyGPU(n)
nmax = max(n,[],1);
numerator = arrayfun(@iSoftmaxApplyGPUHelper1,n,nmax);
denominator = sum(numerator,1);
a = arrayfun(@iSoftmaxApplyGPUHelper2,numerator,denominator);
end
function numerator = iSoftmaxApplyGPUHelper1(n,nmax)
numerator = exp(n - nmax);
end
function a = iSoftmaxApplyGPUHelper2(numerator,denominator)
if (denominator == 0)
    a = numerator;
else
    a = numerator ./ denominator;
end
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n,~)
a = 2 ./ (1 + exp(-2*n)) - 1;
end
