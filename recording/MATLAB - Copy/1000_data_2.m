function [Y,Xf,Af] = myNeuralNetworkFunction(X,~,~)
%MYNEURALNETWORKFUNCTION neural network simulation function.
%
% Generated by Neural Network Toolbox function genFunction, 19-Oct-2016 17:34:49.
%
% [Y] = myNeuralNetworkFunction(X,~,~) takes these arguments:
%
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = Qx60 matrix, input #1 at timestep ts.
%
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = Qx9 matrix, output #1 at timestep ts.
%
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1.xoffset = [0.5;-52.0625;-38.9375;-13.73;-7.32;-6.36;1;-71.125;-37.375;-17.67;-12.43;-17.23;0;-81.5;-66.25;-14.46;-20;-35.66;0.6875;-86.75;-175.9375;-15.27;-17.86;-42.33;4.125;-87.625;-176.875;-17.01;-23.64;-44.65;0.8125;-87.375;-177.4375;-14.38;-25.72;-42.46;1.375;-87.8125;-119.0625;-12.08;-24.82;-43.54;0.125;-86.125;-177;-10.08;-19.96;-35.77;0.5625;-87.8125;-126.8125;-5.93;-17.61;-25.88;0.1875;-87.0625;-178.1875;-4.62;-6.33;-7.99];
x1_step1.gain = [0.00556618542355192;0.0231548480463097;0.0396039603960396;0.0744601638123604;0.0901306894997747;0.0762485703393061;0.005588543485854;0.0188790560471976;0.0341151385927505;0.043535045711798;0.071301247771836;0.0413052457662123;0.00559440559440559;0.0168865435356201;0.0158572844400396;0.0413992962119644;0.0587544065804935;0.0303536196691455;0.00557200069650009;0.0154365653642065;0.0063872255489022;0.049838026414154;0.0636942675159236;0.0276204944068499;0.00562291337199086;0.0154738878143133;0.00566672569505932;0.0374812593703148;0.0489476260401371;0.0266560042649607;0.00557491289198606;0.0129817444219067;0.00564573041637262;0.0353232073472271;0.0439463854098;0.027311211252219;0.0055953838083581;0.013507809202195;0.00683030949839915;0.0365430294171387;0.0383729854182655;0.0270160745643658;0.00559440559440559;0.0150943396226415;0.00686253484880978;0.0405761817812944;0.0459453250631748;0.0299625468164794;0.00558366777176758;0.0137634408602151;0.00654530578850481;0.0396432111000991;0.0485201358563804;0.0345901072293324;0.00557200069650009;0.0153772224891879;0.00684491978609626;0.0451773209848656;0.0997008973080758;0.0518806744487678];
x1_step1.ymin = -1;

% Layer 1
b1 = [1.1007343513954653;1.1712452999453844;1.0889982698199723;-0.97532810547111259;0.48531035615163443;-0.55024963687879525;-0.16209072670253227;0.67353564381959974;-0.0016617278545118207;-0.15297803463513437;0.22878235168707933;-0.85392831331381525;0.70176847537983689;0.8849378736171496;0.19354532803690597;0.57325387419842011;-1.2448623273305521;-1.1230610767328804;-1.6656455649670445;-1.2244174909086507];
IW1_1 = [0.097113040251817426 0.064026105269795186 0.98494907308975599 -0.16508731678872871 0.37142311696963143 0.30100687068291981 -0.055352260402404721 0.27987162531928522 1.1793707746887527 -0.6635726548007701 -0.053605291917512156 0.35413145724337952 0.031228913575688504 -0.23922081707425402 0.43418193930618171 -0.41791377895565268 0.46881977141977788 -0.20171613384618695 0.013217406487320903 0.15070024057611664 -0.29337619926096997 -0.25864932675006941 0.14256168261801719 0.066114278642844526 0.32452344971083974 -0.061272511674882832 0.053761406994342391 0.10340247841735585 -0.051528424340783266 0.16419075862528393 -0.19866965611348891 -0.18532627976443938 -0.47940300548504278 0.58709760719385828 -0.63150046770967061 -0.35190860813294061 -0.026980733724841055 -0.16394757549632283 -0.33999108480347945 0.4223619651233379 -0.42256225960801702 -0.029415220991925159 0.15783052775531503 -0.37016736154426938 -0.51376065693993989 0.32204822935922833 -0.52069836103637723 0.23927220911269478 -0.27957270951699603 -0.5236392578436373 -0.0070246183817310806 0.43875557574461355 -0.25136151571902138 0.11621481354136906 0.22753902870349485 -0.59104568126677215 -0.61899871695682607 0.25934531559023438 -0.03736389851463931 0.080432137721902872;0.13293637636155939 -0.25848446516403201 -0.31477466278006133 -0.014830286171312795 -0.32868550489697124 0.06411166810436536 0.11902346317898566 -0.22639183277984581 -0.06470446508871415 0.64030735723640975 -0.29232979901864575 -0.049107961947857832 0.13702847333981139 -0.05802247706223905 0.058754446360433379 0.60980162669374471 0.13391404725699871 -0.099628427918933407 0.058746017306129994 0.082124421333158684 0.033070004518570194 0.39644813848033128 0.12343496271112733 -0.1168095760885329 -0.080427370036743301 -0.3383121395709478 0.34671010663720969 0.16620729016970373 0.18487824832820907 0.24933679545746001 0.26276291768448756 -0.01591436644982391 0.04561450501295377 -0.04128400906579259 -0.05598497485263719 -0.25433998286538034 -0.22989805125862539 0.050146707165745041 0.093517285304719033 0.013048012093029944 -0.19355637377076873 -0.086076537625576197 -0.11367182293574207 -0.038873062305502186 0.38576146012659668 -0.050898356523318276 -0.086401514694215226 0.16705561054544099 -0.30356152814078424 -0.16282860112399986 0.30557181204774841 0.37490755344274335 -0.036286596575810501 -0.24175090882761766 0.32050300686236033 -0.60162357851201353 0.15618079370363017 0.21507262874322416 0.052815314892717138 0.16978216820444766;-0.18910243391187634 0.10907344546672751 -0.14059765894682505 -0.20908794219896359 -0.021359228776625164 0.0039395907089406134 -0.11807778530871472 -0.31669574628668085 -0.17791786538406434 -0.2286559544077359 0.0049002864578738467 -0.20524859612799204 -0.21315113829714313 0.29558051552822578 0.32149835329422072 -0.12122251734173882 0.12638472308237914 -0.24915427552596209 0.25743053464433885 0.3392841040701321 0.060075443730664806 0.015718826399964251 0.15438037823324238 0.045105613131172624 -0.25330270041895636 0.29353933829575629 0.15751110526003445 0.092008647211422157 0.14842033148420289 0.42637835604918206 0.064409189965795074 -0.21320396903526112 -0.22586579342422358 -0.1513693411532451 -0.10526786836633945 -0.38510699811151217 0.01841129342692932 0.19737594481689133 -0.25434648207496768 -0.34758451297109699 0.23397478186062368 0.089508115627010998 0.022302959791053886 -0.033904397913828863 -0.22998039435766818 -0.13891133497686711 -0.16136023016737719 -0.15965799033340378 -0.036389869116283703 0.16235907183202083 -0.019610468934889248 -0.12423422267715821 0.35790962539152671 0.35258993481177597 -0.16395881232813722 0.083636814813991142 -0.18508491987713532 -0.28628980471512006 0.075617875567023263 0.10858347557424733;0.21683523223979989 0.37510832713778025 0.19483419457211881 0.42329202995088866 -0.39016215244346986 -0.048681652621189127 0.29997950037724463 0.36521090716975235 0.2731245019934358 0.17295635434300707 -0.42171011094905647 0.1508395964840798 -0.017912301468886192 0.20613768866302754 0.21812464240498178 -0.23076845398179233 -0.27272624431336562 0.14432299752165587 -0.12736486301641556 0.30931560095589727 -0.05905031089187554 -0.47637298107861115 -0.43514268518007304 -0.26077243073376727 0.30249838468714074 -0.074784203087706849 -0.40757783610025605 -0.16222028689908866 0.27426802476305495 -0.16205148521479174 -0.30560619980902687 -0.034393233680357876 0.1309806503141821 -0.66184252834099444 0.050074081449575425 0.27624702270372226 -0.3014946458160751 -0.079596004425257064 -0.11255994316247245 -0.4631538622402574 0.13136998797083474 0.077335629727999178 0.10093142840325434 -0.2184270035290713 -0.30794027241952204 -0.25486448010456636 0.3878497491773113 0.20429298406906071 -0.30721135187227899 -0.0314543173432065 -0.3367288436137898 -0.076926163938349404 0.22003830122380327 -0.06752824632353796 0.13154944760728612 -0.74931834205816505 0.037326489708655569 -0.097801867468815237 0.10936491591232114 -0.064315648465823161;-0.010876209150770099 -0.10529732838676979 0.38393574681453219 0.3885743249343141 -0.55668259646586482 0.16013161127643213 -0.18409379285718713 0.63833616268765947 0.17034940437136262 0.45356330247870907 -0.34903053829169117 -0.085825317145863292 0.066166260867060733 0.1243281168553933 0.12843805983182111 -0.50798962477401099 -0.42770912799616367 0.14366626992944859 -0.29597433312382998 -0.36110550947444309 0.12556833373593418 -0.24640904994367141 -0.30686315647562779 0.020430703851133061 -0.16933684542628386 -0.32459954188251 -0.29333068339794205 -0.16018760818095529 0.30099395559183501 -0.22634861872652209 -0.01732173462414878 -0.4644682858596989 -0.430254897993186 0.23470818070935959 0.47769263644009768 -0.18823925644154418 -0.12924908724494205 0.038809616061509289 -0.39963774739669705 -0.032101651936378831 0.42010880819168167 -0.14465579767912415 -0.10897649799451682 -0.17182755518991483 -0.41545973114388668 0.38960699444636199 -0.015637028592343678 0.18515810134441427 0.077069716467761146 -0.24748668364113646 -0.20461771783839461 -0.031909071953572461 0.12555242358838908 0.075530551392261197 0.057678617196703766 -0.30391264181176175 -0.15654276550224608 0.27015674463141715 0.12575054951532089 -0.093506772756184534;-0.20178249381672778 -0.18600159020975621 0.49323718762375424 -0.0085693718005150372 -0.054950458466432033 0.020322867584852557 -0.085452913274312786 0.30739952489254946 0.054146345425849549 0.15119950477564814 -0.053714067897123956 -0.041913050045011252 -0.12458915535035475 0.066817326098349727 0.034264370522079701 -0.09948467902113739 -0.75867470660330361 -0.31984436440059688 -0.18219232047176337 0.136438007047892 0.011167029824546017 -0.13346728844090261 -0.38176440865763894 -0.060300568188476719 -0.25799966877192826 0.27733828630965551 0.21136007352326786 0.59200355756925493 -0.00031102049761415514 0.13307016169302824 0.085468327192403243 0.42495280506099448 0.15473599579669459 0.20734217425704152 0.029056978338407004 -0.23638116470658307 -0.1626512225523141 0.27731998733407864 -0.074339737433696262 0.554278633700658 0.4568414068157165 0.15015443621821861 0.34981621895050513 0.0052087384981067096 -0.13980083018675654 0.022772563401718855 0.28906306459478059 -0.35147732877143067 0.28490779750980483 -0.078888000538468117 -0.2375938721332492 -0.32315312943725666 0.11006129162531034 0.10584861576984339 -0.33406498673336843 0.28143488295215197 0.13870734889109135 -0.33779429537979339 0.0096939557147208838 -0.0062151300315873639;0.63449122621832177 0.16714221023734949 0.14405419578940595 -0.12332024809733393 -0.77719271667498291 -0.053332374284092827 0.37085490915794739 -0.48065363580958104 -0.22733865115741236 -0.072912831039855658 -0.92997664858414009 -0.23386495412993163 -0.18585852533357142 -0.14013108400305904 -0.35003631996907081 0.59971713563335205 -0.36148305790105045 -0.27049151713812652 -0.18745584163852155 -0.25345294600802687 -0.14754598423962692 0.29875222591781714 0.24489742216594285 0.016849395153147016 -0.061945190918990527 0.28345215008727009 -0.32520674688416085 -0.13598609115300395 0.43433661883013386 -0.17236390364544843 -0.15013168479955238 0.17755082815443535 -0.42766562811191255 0.26266194961468892 0.21698510603666568 0.28564052044714094 -0.14719452328325502 -0.093617641948416014 0.13197585621054622 0.13343587456519457 0.17102575498769793 0.05296632707204553 -0.10845640964571276 -0.049961310796356753 -0.1453482981105505 -0.18849653265128624 -0.16373958280405365 -0.22119690317473795 0.17126009467642392 0.44558312819129559 -0.44696158113290907 0.03860689338040442 0.22219332756774063 -0.081894702101025674 0.10288068599975017 0.12459006161641786 0.10482462514684758 -0.24025917379404513 -0.23583127504084314 -0.39607337042392643;-0.10292286832990946 1.2099993953833994 -0.06254354042610602 0.73801974171142004 -0.47763978184861183 0.57706935841720264 0.44683224992154441 0.32902369716966451 0.045685124045813499 0.45043058835142574 -0.17367475114883921 0.62515461255261517 0.29576888013125385 -0.025545245186406815 0.092508579544316544 0.33567240156190464 0.20658936218505328 -0.22377912877320136 -0.090372942827872296 -0.50746715381512697 -0.061325342443549841 0.4560291886801266 0.10998756961541614 -0.22030213612024577 0.028035849508851417 -0.29081769120124784 -0.39885139306140865 0.58640667060360496 -0.18568139714877774 0.32758824020605387 0.014125641037439147 -0.69966745451774981 0.12385103293143591 0.64059312826313874 -0.13767784265309099 -0.090880428400710977 -0.11628994607990238 -0.33962030586035863 -0.28230888688928935 0.15877834544298355 -0.29891954963568368 0.019081432782978608 -0.14398821918180521 -0.72102201619828088 -0.23423080586071479 -0.099204919463065588 -0.067068564346085324 -0.33125983851847524 0.14602845355060837 -0.6958852782832412 0.059706495988922539 0.13188106491029764 -0.1524123103584144 -0.003750871723973836 -0.10437866598281553 -0.47888954779237108 -0.0065917145904902568 -0.14069151371759131 0.048361631401725766 -0.14449426452017053;-0.1178976179247813 0.29686625240651698 0.21863849660828602 0.94851049180860969 -0.60940215698097555 0.59364182187646375 0.49021917086596106 0.40025024039989238 0.57451293067343068 0.66325368890815395 -0.40244392802758572 0.12994003254336256 0.19381330321974985 0.37217533935497416 0.61139197746686591 -0.39945067126169298 -0.23021380505581762 0.14208946262616381 -0.19875269562741202 0.0052196362660072828 0.3225691077113802 -0.94821490734545677 0.64240353524490401 -0.29233270923608401 -0.095394063514784883 -0.10618849456131207 0.38824846710372374 0.12441353533058983 -0.22964833220497186 0.046561263022491237 -0.1394955269043627 0.14047598115522902 0.40765562302345631 -0.024007544165492008 -0.081421651884338031 -0.14493804982362293 -0.2908684386714438 0.31424587906415802 0.049355387223523214 0.41002187227457776 -0.2520104671865161 0.061214905291656532 -0.11165774301524746 0.44094678423074768 -0.0036242190902226502 0.34345104329920029 -0.50941039411344713 0.010525584703352844 0.023660503133108645 0.56603300761469544 0.56727901167349004 0.32340119042077997 0.048773137524299723 0.33720019958602127 -0.13252844618085158 0.65067167588807562 0.50188785439024874 -0.0080407314542678514 -0.0083025415046150686 0.38176724676677548;-0.064435673867938609 -0.27774210564124552 -0.19225327562592132 0.37709672224085128 -0.19160993435038617 -0.24818673384695406 0.28952927160790415 -0.10924811049431139 0.47322120394168754 0.74995206570612205 0.0026690720410715227 -0.50230768877044529 -0.019786529144382111 0.55134421292093538 0.55474338502187037 0.097962559966512444 -0.47597711005337001 -0.28574199616066281 -0.21652251799186359 0.18482859720298439 0.58145062538037562 -0.30679783968575114 -0.30452636448484693 0.15056380490019833 -0.012555065487722963 0.20608200339332164 0.2296300415159146 -0.31160573354001347 0.25404945064934897 0.33643809262465652 0.14701197564033619 0.71604407839091577 0.85681189924540202 -0.63759783879989185 0.21511037599786409 -0.15136532066722774 0.10397635713130964 0.33003715781106607 0.82038949953772922 -0.60714839566855949 0.42537341298779197 0.37911749453792121 -0.010928566747159293 0.4573061300189642 0.66556420481272549 -0.017237040547724902 0.21218182590570514 -0.25461129183910808 0.31934809116346735 0.56179797873723714 1.0161939658340799 0.33079201709803119 0.22370449936006734 0.22340603634238768 -0.069784776413749444 0.075843533754521297 0.75054815275840059 -0.013007367112446232 0.01149400050848455 0.21488566342022344;0.50201264536091372 0.38550293534657898 0.47637687220737501 0.34667200005859755 -0.40344099122550631 0.04872284263295848 0.013970948312500566 -0.1921652624477552 0.43890549848439858 0.453744582680983 -0.78092595967211798 -0.33768167977701974 -0.2693126627282883 -0.23273517133817678 0.21468499077739331 0.28562542414433828 -0.1872127656504394 -0.20366335922664774 0.052086555610719197 0.28051993913857926 -0.18086779128581043 0.5483468132342928 0.1684501778563654 0.23827935679179785 -0.30256059775993421 0.042213430183731103 -0.11242857204883444 0.38439198550806009 -0.046098168786259539 -0.022434982518422186 -0.013557597793133853 0.12428127735266012 -0.77453807653428486 0.31355474774177383 0.36557147396949485 0.13647381718353888 0.0020309118028406601 -0.03048896918458293 -0.37160083309559949 0.43962337512671329 -0.13522073600308571 0.066110772237111731 -0.15010984513229172 0.46496806235351695 -0.76973962930028739 0.36363646269272737 -0.17032681925630297 0.041885428184561639 0.21832177174631379 0.52454647738114646 -0.86102292328384034 0.32308512078392726 -0.26657403475931601 -0.073322141510691136 0.11551733027562679 0.96338915670852188 -0.47480866965961777 0.025672267685217298 0.26307407801967408 0.23716476610307022;-0.27029584126752232 -0.55122180421666556 1.2429005152550254 -1.1998358158370648 0.061608374349713751 -0.09620960997566376 0.21708763994463609 -0.096295898148741385 0.58102765775846155 -1.3535072699325692 0.052737449746346275 0.44131121396582834 -0.26251788824934774 0.14748409952390928 0.47634657466242131 -0.57565301322024665 0.39747986572380972 0.27606585102440118 0.091407364197284444 0.085183697212574558 0.054619923735762563 -0.721558431871135 0.36454572193500195 -0.26786529174774593 -0.13957029306312471 -0.17964969644617385 0.2678440286059266 -0.37565559060945364 0.35941448117575864 -0.32994971407141604 0.21363291096926121 -0.14782579047543942 0.40379915503554048 0.18057734914138723 -0.033817691395898644 -0.13618454335588392 -0.16677297442822966 -0.22545718054685263 0.41207105327915222 -0.35542481098253309 0.26840899780978894 -0.24696804408137871 0.26151116127955726 -0.14670754464708977 0.5860504645689959 -0.17297877626653366 0.14899941645386799 0.11955704346123168 -0.15094148275177863 -0.23746960723300062 0.37577880931268987 0.059360998242970753 -0.23043540180539318 -0.15505135536609257 0.21817794642330771 -0.71810879390448878 0.6153800506061855 0.47481217633806683 0.36853138439845701 -0.09183166485418548;-0.0080956049190241842 0.14749809125137625 -0.79378866410736082 0.47414061100595994 -0.31817696504471005 0.017079121913060224 -0.02565403280330952 0.45357994370854676 0.10733754395841066 0.11848500490394019 -0.17623054359201734 -0.075184194276815372 -0.09354276977669948 0.17016033830899147 0.00052886682941795165 0.063445379330940258 -0.23885847823218057 -0.083173928672912595 -0.18158411040127689 0.053434346537581695 0.089247363615335085 0.46118652073104238 -0.14718589007231933 0.18840245948138717 -0.20153976313195776 0.069429949647114492 0.20154407108328429 0.68481407787244852 -0.22060810115260349 0.14688448061798171 0.16627792066954691 0.18377022005424318 -0.099583810021373009 0.75003800273465748 0.17586321725732529 -0.064944531712701162 0.087847013784356831 0.19175484820310879 -0.04301858404421767 0.33740722584785965 0.011505511290063069 0.02451507032156832 -0.15051418356621871 0.74589239269973762 0.56702259523190002 0.34050527757074184 -0.1016593739504678 -0.25297339852912581 0.20251084936272534 0.4554581637753668 0.55790247085703892 0.40224682820388569 -0.061406239133464408 -0.023879728584913398 0.094860827027892239 1.1078668749246148 0.43903225992383471 0.0035974006309139172 -0.015295993407118213 0.33495697193388474;0.41315182085605301 0.10342791919815053 0.44307688702051862 -0.065629657785020196 -0.27847315466166089 0.18676135513566103 -0.030331120382717573 -0.044383449713382407 0.29462536018312419 -0.1647619453668617 -0.69315316432556084 -0.27928494648007923 0.049247781193441767 0.011729054123679814 0.3407742703876569 -0.16954092422594258 -0.57155558286812935 0.1293515981019441 0.25706405637404295 0.10528398317111148 0.35587573630027086 0.22264701133219189 -0.34286146766713044 -0.092022922493626189 0.067105488051066725 0.48264833318995781 0.25421288413136112 0.95278029602350878 0.21460197216041954 0.0090343671835356153 0.059236460744382782 0.20036010162341916 0.17222726670032101 1.3063230332760394 -0.017677777615059703 -0.18878437239677193 0.054811602647775209 0.44190948694655413 0.31273123774531197 1.3920453581287486 0.089285201117576457 -0.13387709763202463 -0.32184285581188932 0.84367476110604211 0.43691311817231382 0.89196132127282302 0.093714255359202456 -0.33426150799800319 -0.13196405298702382 0.60217589521061532 0.4028776373681433 -0.13964464574433993 -0.15432049610554865 -0.30260793437054739 -0.24960681492484121 0.954045091774127 0.53535727462763527 0.31839616751441269 -0.2851033082732784 0.22130536898813133;0.02727678375085647 -0.24962703661182653 -0.30152312189411512 0.24779647224822252 0.73650209172959036 -0.17949409333176708 -0.15618790049579881 0.22322494159570266 -0.14899474842180521 0.33684972107797673 0.94476304191490801 -0.21973523061451461 0.19202156082769062 0.011541658549638623 0.029831479897136189 0.19093764781127817 0.72849836362484088 -0.17070661746704852 0.07646983872663056 -0.33034818647894421 0.23406533374202274 -0.084343875649942918 0.27089663561265293 -0.3822333685634155 0.32973054814845271 0.16758963178226072 -0.036061898309708469 0.17100265831010406 -0.22641988775675631 0.2715038669237036 0.34131646383675052 -0.19970105190978582 0.17933525467019298 -0.25179629351787408 -0.88860000216255397 -0.037772930404170235 0.18174589747761322 -0.093821484858892024 -0.118555269077988 -0.23894446611086601 -0.20149799954584996 -0.10638135173812001 0.037983184135411033 0.31022716916936355 -0.14858961890298131 0.10529498391525552 -0.16171292702785084 0.021289746141080923 -0.28574024115796809 0.26757118947977282 0.40915062729816498 0.2238871959004313 -0.029096660308201246 -0.079719594157510454 -0.2632848997461707 -0.18025004655071775 -0.04283029159165079 0.063079043467540258 0.040891421119523867 -0.09181879336627681;0.41009948762723075 -0.38314831031189012 -0.25066129114972202 -0.35908094034091331 -0.17049995931172149 -0.09708168812679463 -0.11259145079610622 -0.69242332322295075 -0.20547989980495129 0.18454162932617538 0.16872140571094305 0.10744193949299762 -0.085197444673678721 -0.66034332705257448 0.086797786023548526 0.097811772392873017 0.63325833636645945 0.12366422428625035 -0.080443518751131982 -0.36039240310964049 0.032427918098561284 0.33740692340525652 0.59660156078260618 -0.42719763172714348 -0.30076395728298222 0.17051260728637566 0.37086618006423372 -0.53388918998038748 0.44512012644893639 -0.20894849319492792 -0.26910147750988128 0.043587699474069812 0.14030860877697582 -0.18378058102637446 -0.52131671472668073 0.25997463174284935 -0.23596293358527612 0.42761571467015513 0.64467668378656173 -0.38127401714850845 -0.30647753012803364 0.03692326870080502 -0.044900811870632294 0.26941993928735242 0.25245386510726187 -0.23702650330961705 -0.33280009812727995 -0.039507440696252893 -0.11238433304524037 -0.11880801836489463 0.59834632360912576 -0.023239679509918884 -0.42879120150898081 0.22263766301091251 -0.12007555441687562 0.081138409835915526 0.73595004613201298 0.37605352653399432 -0.07242237317327653 0.10628539540197585;-0.012056951065011538 -0.32450106678437329 0.45378212205211554 -1.1983661130812775 -0.14995907508013717 -0.358705340171112 0.48725177651087725 -0.35794781533461695 -0.026055208269439335 -0.82486668369025717 -0.59435363353679893 0.44734006999891712 -0.14461503249650379 0.37916895274515039 -0.014082865713074462 -0.27029460360006657 -0.41117570618474963 0.02319800127686019 0.26407999846383573 0.14465187855111081 -0.3889269275933202 -0.49274142819838335 -0.29317438658742256 0.06984357437563582 -0.14874834010367177 0.12941529386627001 -0.39369279284094777 -0.1641103139689159 0.29303511379622038 -0.072609988774205811 0.15547587271801588 0.36464116000107993 -0.50161361775617541 0.21976124021664831 0.49811660306571731 -0.0098099855827517984 -0.18278727308561185 -0.0453197495023051 -0.59412473777782759 0.09014566701285312 -0.02178730455176222 -0.080589155390788134 0.06871331811390971 0.2038595566387908 -0.69713275781578699 -0.20385634318548487 0.37508414324121553 0.31835487277595548 -0.089300827356638163 -0.21245109579355259 -0.37154950594413361 -0.24685359335833085 0.29128844763465161 -0.0072348999811853252 -0.38012880383532294 -0.045605885868405714 -0.98296279856660806 0.10375905628037478 -0.3891991367760953 0.082473966957510109;-0.19638484475551379 0.00049549941373727398 -0.019283777335441756 0.14909339457197554 0.23978195417656947 0.26112757608957554 0.13022582064153232 -0.19770773675303341 0.027143880964345304 0.13621534364755353 0.40894700059800793 -0.060166655938733826 0.24075783249715332 -0.02900412532990522 0.42466770969784728 0.034971209539022607 0.82050139851152648 -0.28633290055445587 0.27775360026990958 -0.096052573542106612 0.43198928365854194 -0.16927019861835962 0.19053295478466165 0.13376205300887101 0.095251946186859254 -0.39318065175544864 0.52731610182627942 -0.21228616083660121 0.16402561628720688 0.27821485201193302 0.084564112044551915 0.15607944683112612 0.38211554450791085 -0.54476642023821853 -0.2281701417188996 0.24426555487139309 0.13162254875786697 0.30527097913852769 0.48959123393882853 -0.52829575564820053 -0.12626880429303344 0.14167804632758405 -0.35681695993510476 0.38621999922830741 0.97521164045992981 -0.69738012050492992 -0.12724336328691932 0.17712116088036695 0.041106747389825254 0.38742480877623497 0.89045220301237005 0.02976790284091356 -0.34368105365857238 -0.15445167089191617 0.076902740850031043 -0.064271811856179098 0.55958088159828623 0.08674814084545665 -0.36484306214762202 0.32146672363583995;0.14582387586796794 -0.24992265576936834 1.1423651708958833 -0.57146534170044072 0.034409158868406176 -0.0073205641233535686 0.14685187750750589 -0.13877008308668359 0.89280067725150036 -0.045605007218321031 -0.40634933939897211 -0.087061615653636654 0.020545626838711042 -0.20135392587159084 -0.062771178208526526 -0.45272423140354867 0.00061469643335020779 0.32107063954000398 -0.24839438795443777 0.31429499299266545 0.0086731109354300281 -0.98857638003274007 0.58329216554281171 -0.028237040439713292 0.19940910815865906 -0.27285416177408611 -0.34973911498182181 -0.73947056916485088 0.037275257853773482 -0.17401912569534542 0.0049389448226438738 0.24012285917927106 -0.39159609993592892 -0.46753547088510916 -0.075164736194940324 -0.040590431491768011 -0.28784230366757818 0.18223467332087551 -0.49600738785691989 -0.33096809449108089 0.37756256174246683 0.093342823297203142 -0.083771229215848189 0.24545239306230537 -0.6366120445241582 -0.35971496788948654 -0.070727315880561692 -0.16052041837853898 -0.31171673914211945 -0.1573796913946959 -0.77654682670071129 0.14230554272712695 -0.38925141418308262 0.31506432317048311 -0.089584703176280908 0.16868894184584315 -0.59215538328687278 -0.063517339536636352 -0.25450178289266023 0.13510310290994934;-0.17540471447009826 -0.03330161488029719 -0.073526897396621035 0.33112808315948528 -0.041883369662489768 -0.14380217705982337 -0.46131726062395634 0.39172794779152931 -0.37197129526487166 0.4262603058352798 -0.42186202202874706 0.129967944977535 -0.53931165636684808 0.030112261477445279 0.07097667328302068 0.11119220028601032 -0.082221951398151569 0.046392512639985978 -0.3952473379273847 -0.12679005020020961 -0.16832660895528595 0.80994956904708637 -0.077512862688080469 0.084955888564910126 -0.70423070542938337 -0.55375561320351774 0.24923187212260317 0.23614975059841095 -0.012420286648076258 0.29542950241904942 -0.65991489399804115 -0.11792041436192741 0.38614877818702814 -0.11377126797498249 0.25651596406072313 -0.027317114567589541 -0.18854030495096388 -0.36481052556738802 -0.022545631594035317 -0.40867642993299563 -0.1506868732697903 0.0078776571386472011 -0.63533151788272901 0.062696145451228924 0.046730954217963715 0.19614332718239905 -0.3017503912504767 0.34161845827467796 -0.75991755321851828 0.18321375139788323 0.13468223115981443 -0.23271694235748713 0.049310441481793657 -0.12767688322535892 -0.7272327753865051 -0.18864727541055151 0.18428560622520163 -0.24544181325597045 0.1470070560038392 -0.25409435553173221];

% Layer 2
b2 = [0.078596743037048306;-0.26804847994123687;-0.73687556413715583;-0.54892104763442573;0.59254002959876462;1.1306153432313686;-0.24766688321095992;-0.40182828798881415;-1.082278584747818];
LW2_1 = [1.1573537748099036 -0.78874846653162978 -0.02076600176176523 0.14578986931828306 1.2015287470114211 0.40032859423069711 -0.49950326857821764 -0.1200577078488492 1.3167209158549915 0.98564742882768686 0.088125506524650926 1.8462147812119929 -0.32751960411469788 0.099961204198252676 -0.15645634549911322 -0.074978655260072413 -0.59751786459194423 0.742078283081546 1.5350144075358956 -0.98893974708165266;0.46528675419570165 -0.31044868782747242 0.75806142282469058 -0.81434687808508988 -0.72669517157096375 0.22366950020128887 0.85482818175609498 -1.2154800521144515 -1.267352784504463 -0.93978300403695147 -0.28554894432873751 1.1800517462226019 -0.53069390360973256 0.10121786306432502 -0.75272246539830845 0.19210918626956394 1.3659689673007276 -0.54019936554798631 0.89578719004184715 -0.8043471958887739;-1.3784871120261266 0.75596969775223199 0.86578585018769616 0.77785127376572827 0.57430116445051582 -0.27757896761669132 0.99934682192335622 -0.14056370503074922 -0.049358672241383808 1.1991436545293159 -0.35826667945396845 -0.5810114187930947 -0.45489644814739699 -1.4624224668648209 -0.43261781758723256 0.7829997323984067 -0.52888687539275159 0.40430063151503493 -0.17951991038168544 0.70887997618283349;-0.74772413236949831 -0.34819271157594411 1.1367640739122993 0.70698519274061078 1.2875741356415 1.3550021995178878 0.41653379744576458 -0.43147266881774371 0.44426162662336527 1.1984136802822412 0.36043109361226999 -0.76604575667022312 1.0657878322628642 1.3303304151696702 -1.1141132431025025 -1.3596502964609145 0.34718106158409068 -1.9039797320383016 -0.61036644472776469 0.23974726630515789;-0.57732597875908309 -0.97192916797118978 0.74407892442132539 -0.07679497684836506 -1.111314415141708 0.23255933598126616 -1.0382984125488428 -0.23747471090969544 -0.38989272147085979 0.40390637699262166 -1.0297293026743926 -0.93088266907503203 0.36458561876382028 -0.47989281374104431 1.2825272333958277 -0.33688907410010649 -1.1520314285937749 0.22181298071100014 -1.3485298134291543 -0.52340147425783434;0.15789215589797187 0.64882757745375852 0.090916026293088661 -1.2488967806107103 -0.41224220092184943 0.20464026748869663 0.61990101134550546 1.4396335650858654 0.50884550303427056 -0.82332638276862258 1.8592476215497626 -1.7616610830398425 1.4827932795024823 1.664490224251663 -0.35775980233317078 -0.28154108126776101 -1.5535294775779813 0.10164262062115816 -1.1645456793643247 0.58096648656601946;0.76004597267709129 0.66073327236444945 0.17166246251666439 0.32339464863385725 -0.56733328734209254 0.077143581217390733 0.08351282462242568 2.1058089235283903 -1.0128584052380873 -0.86504956851136705 -0.91424876821567769 0.085751205112297918 -1.1285192524232597 -0.57593366263626145 -0.76183442388250067 -0.83087157915597554 -0.65091460037865201 -0.39913819078300711 -0.76444455134499389 0.65293579003700797;0.67920065658262752 -0.67653877066540602 -0.61101416799978148 0.4810058630708407 0.23681930312743907 -0.59307919371235596 0.30134246269060466 -0.17495222515391326 0.50605719587083653 -1.1951669748430569 0.95679079335812456 -1.3917388814242666 -0.47279084881140415 -1.4670196888272395 -0.46472513999949588 -1.1904132043593094 1.2595555076657337 0.045079628549799369 1.6986810307218829 0.37376516770789953;-0.55636637154606294 -0.024417219007505098 0.020686893347821728 -0.47164869850499219 -1.0603502712739592 -0.39558670208471031 -0.1382833131210337 -0.86246645409031697 1.6915276133093844 0.49649937409977191 -1.7242167742736385 0.80322287186740038 0.92900606369207583 1.3349678876938786 -0.31640908384804844 0.19045492194464717 -0.19819137681538448 1.3184254059434373 -1.3443959633384575 0.61409474540673492];

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX, X = {X}; end;

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
    Q = size(X{1},1); % samples/series
else
    Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS
    
    % Input 1
    X{1,ts} = X{1,ts}';
    Xp1 = mapminmax_apply(X{1,ts},x1_step1);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = softmax_apply(repmat(b2,1,Q) + LW2_1*a1);
    
    % Output 1
    Y{1,ts} = a2;
    Y{1,ts} = Y{1,ts}';
end

% Final Delay States
Xf = cell(1,0);
Af = cell(2,0);

% Format Output Arguments
if ~isCellX, Y = cell2mat(Y); end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings)
y = bsxfun(@minus,x,settings.xoffset);
y = bsxfun(@times,y,settings.gain);
y = bsxfun(@plus,y,settings.ymin);
end

% Competitive Soft Transfer Function
function a = softmax_apply(n,~)
if isa(n,'gpuArray')
    a = iSoftmaxApplyGPU(n);
else
    a = iSoftmaxApplyCPU(n);
end
end
function a = iSoftmaxApplyCPU(n)
nmax = max(n,[],1);
n = bsxfun(@minus,n,nmax);
numerator = exp(n);
denominator = sum(numerator,1);
denominator(denominator == 0) = 1;
a = bsxfun(@rdivide,numerator,denominator);
end
function a = iSoftmaxApplyGPU(n)
nmax = max(n,[],1);
numerator = arrayfun(@iSoftmaxApplyGPUHelper1,n,nmax);
denominator = sum(numerator,1);
a = arrayfun(@iSoftmaxApplyGPUHelper2,numerator,denominator);
end
function numerator = iSoftmaxApplyGPUHelper1(n,nmax)
numerator = exp(n - nmax);
end
function a = iSoftmaxApplyGPUHelper2(numerator,denominator)
if (denominator == 0)
    a = numerator;
else
    a = numerator ./ denominator;
end
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n,~)
a = 2 ./ (1 + exp(-2*n)) - 1;
end
