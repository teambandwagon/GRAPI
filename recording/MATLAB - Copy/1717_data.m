function [Y,Xf,Af] = myNeuralNetworkFunction(X,~,~)
%MYNEURALNETWORKFUNCTION neural network simulation function.
%
% Generated by Neural Network Toolbox function genFunction, 17-Oct-2016 21:59:44.
%
% [Y] = myNeuralNetworkFunction(X,~,~) takes these arguments:
%
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = Qx60 matrix, input #1 at timestep ts.
%
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = Qx9 matrix, output #1 at timestep ts.
%
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1.xoffset = [0.5;-84.8125;-179.5;-9.96;-12.03;-10.33;0.75;-88.875;-179.625;-24.89;-15.38;-15.21;0;-84.1875;-179.9375;-25.58;-21.45;-35.66;0.6875;-86.75;-179.375;-22.08;-25.25;-42.33;0.0625;-87.625;-179.4375;-16.06;-27.97;-44.65;0.125;-87.375;-179.375;-19.82;-25.72;-42.46;0;-87.8125;-179.4375;-20.46;-28.91;-43.54;0.125;-86.125;-179.3125;-13.09;-29.9;-35.77;0;-87.8125;-179.6875;-10.51;-17.61;-25.88;-2.0625;-87.0625;-179.6875;-5.17;-8.34;-18.4];
x1_step1.gain = [0.00556618542355192;0.0129764801297648;0.00556909154194222;0.0822706705059646;0.0983767830791933;0.0662251655629139;0.00557103064066852;0.0124465188642552;0.00556424969570509;0.0376222723852521;0.0577200577200577;0.0431034482758621;0.00555941626129256;0.0127186009538951;0.00556231531374935;0.0336530371866061;0.0474721101352955;0.0303536196691455;0.00557200069650009;0.0125293657008614;0.00558171986743415;0.0413992962119644;0.0446428571428571;0.0274687542919929;0.00555941626129256;0.0125097732603597;0.00557394182198223;0.03813882532418;0.0337894914681534;0.0259437021662991;0.00556424969570509;0.0125638005496663;0.00557200069650009;0.0322268772155978;0.0415282392026578;0.00828938233739858;0.00555941626129256;0.0125539427226363;0.00556618542355192;0.0316906987799081;0.0355808574986657;0.00826523127150252;0.00556134862704206;0.0126532226176354;0.00556909154194222;0.0382409177820268;0.0374041518608566;0.00874479411475356;0.00556038227628149;0.0125146656237779;0.00557977332170881;0.0363438124659277;0.0485201358563804;0.00938394407169333;0.00552772499568146;0.0106631122959014;0.00556231531374935;0.0446229361892012;0.0906207521522429;0.00950570342205323];
x1_step1.ymin = -1;

% Layer 1
b1 = [-2.0920075259070625;-1.504965247149723;0.36482140735079971;0.87742670549470436;0.84770776688280836;-1.33348596069812;-1.1715818563565545;-0.2578779185491511;0.81678343781036145;-0.084116774597272265;-0.16442033242696269;-0.28212026484091962;-0.60223474690855017;-0.21775377956465999;0.13334886506692259;-0.31636266251867201;1.3623262824871301;-1.121148763922053;1.5104312656064884;-0.87759438593032324];
IW1_1 = [0.3437888200520558 0.68694074263421245 0.57055625426214462 -0.8842513409926851 0.23150629933581848 1.6541741839856627 0.14774269111058419 0.94355714754751951 0.42581375597581783 -1.212383362909556 0.99410575779576882 1.71763922856628 0.15160785413820907 0.53021289913283809 1.6361737973898836 -1.0395588197578416 0.8521444251381799 1.8450860272635305 0.12833145400414961 0.70823530892221287 0.53809272100737326 0.15600302060556906 0.46116118001975753 0.65879513174595727 -0.4296240271096563 0.93687062481093009 0.35563366085330589 0.26399335935752866 0.3627636486982454 -0.44597914715187131 -0.040543761745433803 0.56656570858074584 -0.019178253030831913 -0.89460720318583764 0.86044890213256475 0.026858334020636247 -0.24249622980432722 -0.15521843962297932 -0.72537671918747681 -1.0277303311869772 0.32985902222636609 0.24287136764252881 -0.20017149312549387 -0.68157962407054351 -0.033843283705609108 -0.77275849486359083 -0.33662222588442575 0.12151293052197462 0.10991489792636512 -1.4997010575862297 -0.30287473713792668 -1.2948424604824487 0.062447298862271038 0.15794090976252767 -0.44213336324294616 -1.2488235558761824 -0.2597873490525775 -0.60048468147791034 -0.2024452529008858 0.1161738320936582;0.41226173083165391 -0.34454353997716858 -1.2877710416996182 -0.76352948841099966 0.29373966890614406 0.64695762542073187 -0.066584997079115943 -0.6298812080571371 -1.3434552378218401 -1.8581166928726165 -0.16125341033144691 0.4254028489740026 -0.090726303943935341 -0.74941497516782707 -0.45277557496371046 -0.51633573638790908 -0.15480119804908224 0.49207425425982343 -0.036240653373020654 -0.42799929165580697 0.050624213920810839 -1.2988947969885221 0.16789930423149332 0.3967144103362506 -0.15258930346912841 -0.47756905656336307 0.25195068148793792 -1.1445732559086359 0.13777196881784107 -0.022588498406864888 0.12324256847679711 -0.11027134013750921 1.2136080583952891 -0.79138031323270552 0.35147743682928662 -0.18813537011185125 -0.053879542092941039 -0.69193260468234641 0.38838689003519916 -0.80442235885541302 0.62565867005663567 0.18918442732987545 -0.34380066299571788 -0.41684553829989318 0.60344015190725486 -0.77747040644571008 1.170431366425039 0.35568612953576123 -0.32761674380577133 -0.184501274714401 0.60475323061055819 -0.17144910165115951 0.54793320466053985 0.43219433054231382 -0.039952449683205604 -0.0074984142547242054 0.78215730113738124 0.21795004709141513 0.3573431038495522 0.0027005580391103907;-0.045795986844359357 0.49533890236968697 0.13821977254083362 -0.83287129034833607 0.38099166430483933 1.1803072484133672 -0.071030772254799465 0.45773895051917557 -0.7489215599808251 -1.1043845928175624 1.3173645208395395 0.86801784255542003 0.63042328174627738 0.4338363752630085 -0.34588998472346938 -1.8327193881266184 0.93155680138494046 1.1027631903314974 0.14560074309488036 0.17764604269909826 -0.61216413783509016 -2.050438993432484 0.61753213450645139 0.10638432037183834 -0.037052327581064623 0.12657770623383 -0.4058768140830003 -1.9449930810421441 0.32031465779343282 -0.69186810888917893 -0.025483851010534072 0.052038803121201307 -0.00048446511995798268 -1.2404000367717078 -0.113213930788685 0.32363814287492326 0.42546300058288034 0.043144933565119982 -0.54987709418310082 -0.59057495857279774 0.32566198352254871 0.19530793952229777 0.041752768958558825 -0.64430737615666811 -0.062145276305315932 -0.86066862078675432 -0.25809442115936809 0.71286433607030519 -0.27694613124678807 -1.0345452818228107 0.16713889356690773 -0.85609300117308851 -0.33410062439385285 0.94267581687802759 -0.43283024927401614 -1.0141849824109308 -0.0043943948348268928 -0.32031823862327652 -0.53375647592866493 0.37861847819689842;-0.89207040886877287 0.86687462891204636 -1.8388535807226933 2.280723184373616 -0.095512766658749665 -0.90315012446325083 -0.85768905586099287 0.23604948780233612 -1.0261423678667569 3.4869476634877739 2.187820986922691 -0.75859959079832662 -0.18056049763865917 -0.0090234112607664781 -1.819387650491223 1.3751740045239798 0.047475021345007612 -1.2319039201426698 0.96671674066664992 -0.44025173463029349 -0.44505478909937046 1.867328942491431 0.71457772127861174 -0.68107998201049524 0.79775385432919188 -0.5410241813468103 -0.040027559448898041 2.0421761520432655 0.71095134771121937 0.24657480842987961 -0.18162213361172119 -0.66893741460956868 0.83942604524301301 0.44691049115266962 -1.4194638175407026 -0.27459396514948947 -0.92650251629781788 -0.16369847434615106 1.153383319207995 -0.41802754393111363 -1.8946762285346403 -0.021898112631966806 0.26926357165427833 0.18425524464870011 0.87110684227920498 -0.1572970933736898 -2.3909033198743375 0.22318102962082045 0.34788139029338822 -0.18340961640172704 1.738032347674545 -0.08139101261594868 -2.0574485702726353 0.2195661815224319 0.68024619763112848 0.71404720290473978 1.3136576806229243 0.069563373542955331 -0.70616922068998444 0.0041956998022207696;-0.068344815590958771 -1.0252844215177155 0.92737405237186743 -0.16922613585128626 -0.1858105852945611 -0.23661823023847564 0.271248759980318 -1.1638691999313113 0.89325826871375003 -0.39929022735085662 0.22448097271539491 -0.96441635787096291 0.30820226251006844 -0.61440354793472196 0.1099195487648592 -0.19265421273796848 0.22990449435670696 -0.68247676272757363 0.3587948030579321 -0.046898628066775333 0.3057850088711529 -0.1802079593497094 0.13365653553681187 0.18690162512823472 -0.071636129453244671 0.33408537734303434 0.32588146806918761 0.030404071592717075 0.29811918673780174 0.55469647812625333 -0.20663054192684627 0.82408460688282026 0.03441208261974698 -0.54025357053815792 -0.26647021773861007 0.42310925068455135 -0.54812577435713028 1.1628342841859542 -0.23551283520633085 -0.37678427840579637 -0.069724416897761557 0.24659744420998894 -0.45877784943120448 1.1718979588175413 -0.25773872652486568 -0.10477552112263673 -0.19373731067322347 0.16671789366470324 -0.26440015509272041 1.4804097026841032 -0.53706115971042767 0.49699472939556621 -0.096488715518814966 -0.27065958244690425 -0.46164240072916485 0.92057288331233589 -0.10057433268136572 -0.23709017409569874 -0.30001430047773381 -0.035937652465325425;0.09270323270725124 -0.071382864925418302 -1.4372489686830119 1.6601617699174633 -0.25888263523636429 0.33416150314619586 0.37932919113384572 0.3089852710880665 -0.77383143690661527 2.0551506686438863 0.31533119218262318 0.38673852077571191 0.19700329595276214 0.69358403744018104 -0.4008272311842162 1.3901905636300327 -0.071860157411976114 0.46178139859864981 -0.21947374530524855 0.68137563760642705 -0.8598107729626393 -0.31129315485618964 0.024184190502364422 0.2762479487988454 0.22686534811803322 0.23741327817888597 0.035302599856010891 0.54850073471447314 0.80853849445695292 -0.21657548738940066 0.58787337172331822 0.039654620961977839 0.23473865643126518 -1.3811119194453403 0.70577499140244193 0.13549771106320946 0.51320169023925843 -0.17593272318467126 0.064726713329638322 -2.2731465417671197 0.28921498450995708 0.41090026047099576 -0.076304213531485754 -0.3422693993844802 0.30357851560523536 -1.760311477611848 -0.27889557804935411 0.37601422640939736 -0.49613880423601847 -1.1403316966820376 0.086266437369239002 -1.2071251012562985 -0.14426950923094459 0.52123861944896677 -0.59713621067421696 -1.3614741351731037 0.073941961719609525 -0.97026989057907609 0.029341998294279484 0.17067075081070057;-0.10986340243929403 0.87661340531786047 0.22306091056546709 0.93359651661107246 -0.13052224776884977 -0.06719501550676267 0.029590768859302112 1.2453215005414362 0.22658834072941345 0.6100285133504596 0.21951869878796151 -0.20339588966074446 0.75544278589773683 1.0634914229630659 0.92476995847217403 0.20028408756802099 0.69758774314102734 0.11377266140064711 -0.18035724594509059 0.16876910112837676 0.49457602244683768 -0.430430059680463 0.41857606456923224 0.12784484097853063 0.38167585191777181 -0.13819866219735549 -0.52860933059817627 -0.32589015457348885 -0.39556438776409564 0.34651415523548246 -0.082517992751287406 -0.54946419668397017 -0.65053589260125133 -0.8133647014544817 -0.7863356926859415 0.0022297486736608104 -0.19614310328724394 -0.89370136425873481 -0.087429340767497796 -1.6220956983737971 -0.69984245607577866 0.077446049967563116 0.4488156425306048 -0.78276986078861244 -0.46407840010097462 -0.84309558799489148 -1.0677605903317651 0.35420270240929436 -0.118401672099701 -0.71666087848686577 -0.60382648800101701 -0.23734249465990792 -0.67428913705961668 0.62069530405520834 0.3358702195417787 -0.37859986893685899 0.033738615694954337 -0.023350745665827934 -0.72677600595016334 0.69339816838584145;0.31582313583106708 -0.38530886631294631 -2.3854134210233475 0.83456258955361229 0.32179416170431302 -0.022351729437729877 -0.24799288633483721 -0.42759313181818959 -2.4661374095676623 1.1209222188750991 1.2353875559531791 -0.039790301653387754 0.039812134281656843 -0.24025988992757166 -1.7086176439397078 1.3201756477064168 0.1029576850668566 -0.38925088605145841 -0.14006893472233678 0.5666136667738092 -1.0224595705532862 0.63854687440588465 0.084297188534854975 -0.11242045391006752 -0.3092324882727514 0.43991252995785879 -0.022797036780871228 0.35005293703436285 0.28830398785970429 0.73296433171542053 0.39958354416041564 0.36499714233122055 1.1402111678765319 -0.75361881091104232 0.28416310650863386 -0.00043047131853729591 0.085913418144089343 -0.037463803850487032 1.523034883876597 -0.97250685854527741 0.2892652174659977 -0.27214572736948622 0.17532191178508919 -0.13769141449157649 1.5587181820307552 -0.80376099937243994 0.011857425382289968 0.09286769250795851 -0.20070772900815445 -0.59672344218574525 1.5541735145008295 -0.34519801288648938 0.81277243243434072 0.1061169608565157 -0.10338755676139558 -0.48365531506854875 1.5837869402844345 -0.85461595452886052 0.06518795357199654 -0.41823171940611548;0.2506126492729 -0.25313939626330911 -1.7083999252614277 -0.75682581907544733 -0.3099731234772965 -0.81584364257429276 0.051492651662961963 -0.20494379880029451 -1.9058768258334431 -1.2987249089202417 -0.6668095064504056 -0.48493220974779933 -0.11423261320549019 -0.56820067217554704 -1.2638249065217537 -0.71382467311883824 -1.1084239555100146 -0.49490494219375225 0.19114554836775471 -0.72256184421528991 0.065615657418898563 -0.44110516313780185 -0.70626087697737228 -0.32149048899642857 0.64119523356689445 -0.37928416953836969 0.64275490250724754 -1.0645104970717056 -0.27719423486442768 0.069398456956047572 -0.12098554663772985 0.10900510621751459 0.8446195976909816 0.92909143445258879 0.089877881833815593 -0.24885165298142065 0.058145341774658063 0.12350749455893094 1.7097929871403454 1.5997467522888447 0.16339886210444357 -0.47407470642651095 -0.45794212611174084 0.23679285431401989 0.036453708622561941 0.92428978938430051 0.77072257555103907 -0.47227427255507298 -0.24443859319353278 1.0819428115690832 1.0963493078192947 1.6560087920634161 0.28037967511884565 -0.74010668386037726 -0.081627107063009838 1.5298638685872712 0.69025676931133728 1.1738422499395966 0.99802520456542021 -0.038417125294980467;0.065089998694177115 -1.3168792398282601 -0.65291885182154974 -1.6878301532667694 0.48871148195652186 0.4886135356680914 -0.61847859799400584 -0.81904607429518006 0.5193447452855614 -1.9811402952914641 0.72187955021044059 0.50470572771644739 -0.54235738636444941 -0.60990503273657803 0.18852858419527485 -1.2589569735166111 0.58230512175503835 1.2099176911398535 0.22510359144960995 0.28570556184023088 -0.91567005230572196 -1.247301949236526 0.66975929494390019 0.6756714978627486 0.055452060650071515 0.15315651356138121 0.46322834374611577 -0.98490382003244847 0.36665959065895676 0.33896902058170425 0.42507866316511456 -0.43479281858095625 0.31512563987293268 0.52488214503478114 0.48102744675902065 -0.16028660032666411 0.10879306212161749 -0.88848118763520378 0.044716602892938995 0.43206939640339803 0.53533852606370536 -0.3494411589325026 0.14165445310005845 -1.1943369891111295 0.18421826998473148 0.032588358543389123 1.1180322512113898 0.10935272463803986 0.37718306837789273 -1.5168064088441817 0.07457279726249337 0.085554541180630189 0.86949484089550955 -0.15481251077046138 -0.13582423328895954 -1.0304004927358521 0.34374846981210805 0.5098954665941664 0.42778425932828584 -0.048626829792792418;-0.37061470954368048 0.64903071997201756 0.25783372263871362 -0.31988800354596364 -0.37600667923881936 0.51054151092512601 -0.49001747400791379 0.38114480138965656 -0.21880896603314012 -0.434424220061783 0.16633401168648967 0.35620119492738006 -0.25390523002202842 0.46694812008605208 -0.12726528093087527 0.12839985193982564 0.17784494904011844 0.55098466822469749 -0.28737448762771484 0.017326549432897083 0.084057309117691992 -0.059160816313716953 0.1725383132905475 0.33052196609542217 0.17722609325480579 -0.15727718666137591 -0.17723301331258695 -0.40930462575605747 -0.19568911412359422 0.33092878023860839 -0.079810241307041313 -0.68374306406398366 0.31318744616949179 -0.24730230380519977 -0.2516378250901638 0.42245045530705599 -0.18681947662560808 -0.25988829316996931 0.10042262583903729 0.022810726159520688 -0.12417044580046058 0.042789235810887671 -0.19349456470513038 -0.70320966247992645 -0.24029803390722368 0.31842638539686025 0.096893511409151242 0.35849180119640123 -0.14815617009450821 -0.13893299514797405 0.17817329987541308 0.70333078120531367 -0.1278828298548689 0.30693853310464797 -0.12141959874733846 -0.33736751275676885 0.10304196738319132 0.16662240912960011 0.024955824485467425 -0.1276391936757004;-0.19549637091868705 0.59586488453785158 -0.10270594610260192 0.77792314309132704 -0.32946334297991875 0.9189553859836741 -0.16504289605193248 0.7953899001553012 -0.041473194778329912 1.1486288727758409 -1.6564770365086454 1.3413760418346885 -0.2364769623516576 0.78190475943081883 1.3018391754572207 0.96865585757185546 -0.72035555527207695 0.65297574571389594 -0.12296793826790317 0.93680877072846547 -0.054890667700490954 -0.15039101616077816 -0.12674910866155284 -0.37653958011323296 -0.64257034319021411 0.37517270141639691 0.40187383679780453 -0.18845856838619088 -0.55785613221829566 -0.88559791150664158 0.56062403019442253 -0.22580651937762816 0.17949238781494428 -0.41144459493746999 0.70189878191929456 -0.10173128879051793 0.11644049144961834 0.016463349306204092 0.51466009721511097 -1.0044331067240022 0.46093154121788127 0.044391064383617659 -0.079959031218546542 -0.29531265017653957 0.58045823366900784 -0.55574327838549786 1.4378618979673015 0.18233549238287083 0.36835262755764225 -0.5747836614449604 -0.11722650546179748 -0.8093236926443913 2.1088895534553309 0.036346635228633878 -0.36258426677045086 -0.91094188801691423 0.40320093826589753 -0.56972992640598796 0.63346318023586534 -0.19564809290270338;-0.12963323079503045 0.42195995807425729 -0.12624623701151502 -1.3447474787901246 -0.040579986617848153 0.3592905046417772 -0.15121048306965013 0.077425774101744227 -0.56594388961338149 -1.8796143708018045 0.17996850084898985 0.48700694339511447 0.37770648052765377 0.19796209167432519 -0.40155071215295557 -0.79345332140970348 0.67637661370896596 0.12060880045660073 0.099967248304373299 -0.27084919085113746 -0.12539176584700956 -0.49220620088954209 0.75482925372455156 0.027305836308942517 0.082470165471697304 -0.093587181313309509 -0.0043246804205471735 -0.18528859707873824 0.24266796456122525 -0.44751453047975365 0.080532403090704752 -0.30379271248628353 0.0034528741660832078 -0.14067125814330281 -0.29312616486974852 -0.0099426136342109298 -0.1010246070645105 0.12266572541427283 0.48359523824170814 0.21183610744865508 0.027784800004553429 0.28504115822054032 0.38882376455700107 0.31400381997251753 0.32427848409597732 0.30751475582681392 -0.51882370277062062 0.17180268986188904 0.2847015517744978 0.20538176774928435 0.38395878296018482 -0.10170717198966935 -0.31193823615680194 0.25886483459318127 0.23602755774884984 -0.23186274654808514 0.40251291705135617 -0.238056310194008 0.15354385395613415 0.32018094015276971;0.32958865004473914 0.73197440766881439 0.67646942306850566 0.53601534573168375 -0.15071708448350477 0.12071961532160558 -0.29119530447447206 0.73472394183551493 0.80825300103975395 1.3600722697900298 0.057473035995164963 1.2991146595760967 -0.65123737055594932 0.81879794015310958 -0.248601583614629 1.9637054120257968 -0.8157049820271427 1.1171323030258162 -0.14562378516919092 0.78682609470524933 0.14464673007064577 2.0699960259790346 -1.0005782188520644 0.72091449671889174 0.32047689258935946 0.083049889208344982 -0.14436411153957188 2.0647641515608073 -0.36001074811729139 -0.21232113073436648 0.093580145614312479 0.22909391127883708 0.050548142119633641 1.19485371129694 0.79488196940767497 -0.50742841074781886 -0.057920862930461156 -0.65101469973079706 -0.54697474934754708 0.35045321932675944 1.1481379661028115 -0.28948261134200531 0.17029204353749366 -0.8811930750394753 0.23805571649728863 0.13600020154860515 0.9569951991887129 -0.24570668460083991 0.17655024117332116 -0.72388719244402788 -0.18723723089167477 -0.21071483656025075 0.68910464973643193 -0.47221514164529932 0.25813886906943945 -0.78148178231380017 -0.22458969030129883 -0.17346488293381307 0.17523343151074244 -0.14332462306685767;0.4826192135083468 -0.79946091467711344 -0.36180251300470873 0.53148098278552236 -0.22122469417584081 -0.20545977043553038 -0.18420693324793219 -0.63579734767927931 -0.67116165000576522 0.51517713077802607 -0.56661923583376805 0.558815820669605 0.34339417537733125 -0.68714946235899077 -1.0009141759308218 0.44660654554898571 -1.5142190012816268 -0.308439673135873 0.096822863314926802 -0.67646841207268749 -0.74659885519548863 0.62428633107406339 -0.80815196973879 -0.2799914198578537 -0.083453558692804561 -0.5405835548614939 -0.041980678821308993 0.16533025586700248 0.12260136061245928 0.24714539212093864 -0.043523572760024047 -0.045455307185734692 -0.18396802315251573 0.52446023098488015 0.86320128539773056 0.24736077780125809 -0.61810094404962723 -0.17540562953989394 -0.2131404019676586 0.53069858848129681 0.87689471464051505 0.12849194716693665 -0.63608792240958034 0.32599453238001413 -0.23436370101094794 0.89835912910532589 0.70639703941870013 0.71621290900580381 -0.73481971694519765 0.2547464520196992 -0.34922837923195715 0.65180007619613434 0.17759215308290771 0.17439736394065453 -0.37998809431907571 0.65360714471214898 -0.037127951866089644 0.47771344711226116 0.15353924654660256 0.5400471983796179;-0.035242843244546344 -0.77023467649087463 -0.32093005367628025 -0.28041649169586719 -0.022870719000904934 -0.20609827059709768 0.013606611790779825 -0.56896528131132007 -0.66921778399179321 -1.1225540520048072 -1.3734803890990015 -0.4834884462673803 -0.014713319783604482 -0.38119791640399414 -0.95670687050237524 -0.70986385105059291 -0.7029743452087176 -0.54688165903313979 0.25470888183449159 -0.17970717868878169 -0.11797811198323267 -0.21741913700652513 0.0602034083629518 -0.54110654810991821 -0.025868730568610235 -0.10864654090378302 -0.15150386198900059 0.15384647396360462 0.17221143300958625 0.088988240014987202 0.10012248035902831 -0.29248029490717842 -0.11557925249010478 0.49492739631961813 0.35480593777300418 -0.5243287674745557 0.15226567701648572 -0.11494459708161624 -0.34525324197936641 0.26522745848321339 0.44089397478657238 -0.15470617772541395 -0.23362907722937482 0.23675088284027337 -0.55076974728115125 0.42647962915731785 0.98704497143280345 -0.37881935961904023 0.4169715311079229 0.72174489784644047 -0.29249096685916931 0.11060129882560776 0.48703108341364509 -0.1764439526487166 -0.25018366531901581 0.89022428400979869 -0.93902077845452514 0.29269310674056231 0.95782530352614981 -0.17412468740836817;-0.055067883975398718 0.30737486057359187 -0.73460833437318573 -1.7639309056170591 0.17107057157904773 0.72236307760123208 -0.014757596380999648 0.56785216579692255 -0.51287403557183009 -2.3707718492790826 1.1100652016744039 0.97626092717634694 0.15200291521873463 0.12352581092305968 0.012698549346337264 -1.3963162003701306 1.0418861977880662 0.42148678024518016 -0.51133481799146974 0.57922255687206081 -0.059907975175054931 -0.37145824519390103 0.73786292843863122 -0.22864546894841267 -0.0070561249129333006 0.41739749213576982 0.33959805437884211 -0.92841174033026375 0.12130574591259173 -0.11548999969003419 0.055574016003203802 0.51532050896612724 -0.26625161199811381 1.5561039532576715 -0.50947669194178113 -0.37951676643238647 0.47457907224064194 -0.13773916942263317 0.13814940770592832 2.3872160004970029 -0.68057991842745802 -0.65585124356673097 0.23307607379555778 -0.26566271722024953 -0.359122873375535 1.7158697912688157 -0.71522859228710134 -0.71724999162881964 -0.2052204758334385 -0.11081420880210155 0.14294133145504356 0.97434878258453361 -0.67710577690410212 -0.17179746845879165 -0.18648246997173823 -0.088487533535144047 0.081829283665308589 0.42954138967449962 0.026629314587157314 0.0099172781082567558;-0.26817833762542659 -0.2398591804291631 -0.43631763847381749 0.11561194045257453 -0.33009233463375037 -0.19515616086670495 -0.046366842385961324 -0.0054408446003266966 0.28396270875851815 0.19562330000492092 0.6141466712463014 -0.46867373132553652 0.040339160252953477 -0.2466295031605108 -0.035609203606646767 -0.45618974237953713 -0.19916396120274113 -0.18839075134833858 0.19925589885792186 -0.31495818878666243 -0.18827524103244828 -0.17360041884052529 0.081814807290379515 -0.3218874057661113 0.11048642920198201 -0.35793686435109573 1.1164464934314333 -0.013695110816607787 0.43687462262789434 -0.33112680763022356 -0.038282424430177896 -0.16522961703740902 0.93094877374190943 0.22601814456917738 0.11722821647091931 0.069337555235163828 -0.19424836568462117 -0.091440812245916797 0.97606377698542579 -0.04191652177625229 -0.30293998490666796 -0.2839999160487463 0.068009519430522566 -0.14865576938420014 0.8598544418583639 -0.5121560303687045 -0.30491396677920146 0.17087584812620987 0.25152060070303861 -0.35402464321576366 0.88942458770687938 -0.26243165734262047 -0.14156745112125446 0.2277178406395613 -0.30418342279519411 -0.1789105801142824 1.1867227805499474 0.057571908425342377 -0.32714790445966296 -0.25587593525296687;0.1778956058396623 -0.048235064921336362 0.048809072642514495 -0.33717558214079146 0.15287171080167514 0.076557396550401891 -0.021434817554754033 0.16781131824151166 0.17647264460964213 -0.042331951412657456 -0.36889845458376896 -0.0070917657335689901 -0.45506718796838352 -0.21233149335528903 0.42260632639264634 0.011453501809214516 -0.2444021738082697 0.070674787975072942 0.028641737163109995 -0.29692041191772345 -0.09587327503229881 0.48317115072544953 -0.16821186620267803 -0.12344875122559282 -0.045099182609702852 -0.053471458541760025 0.11972096511242697 0.4665127505719755 -0.083142524079371408 -0.06843022550133275 -0.256562701039728 -0.17725046036315201 0.14185352976084226 0.091200311028189068 0.1858094112094919 -0.073368234617516487 0.47886857247552583 -0.21739670262145222 0.29953115829965543 0.11264617298403087 0.2598934098673385 -0.40764593677538091 0.4533389493359965 -0.26012876724824319 0.32789086929321332 0.44078459987817387 0.29946626110817459 -0.069289617582538168 0.10088141367039219 -0.43347134731946818 -0.11549642245605216 0.011071838186448458 0.30045972104064722 -0.43458326127442565 0.21618973801949626 -0.0056360749352498424 0.032395666719432593 0.01641262952321311 0.044206568071371168 -0.29941899858475429;0.87201562732716376 1.0527151329070461 -0.22692991182084798 1.0916864944991125 -0.0711042233165146 -0.49189226953416298 0.73905469999247331 0.72219708214296174 -0.14999909642935785 1.723048944332809 -0.53818423790088832 0.71121539425005675 0.85389141938759372 0.72074336518751159 -0.11315352635368281 1.4862406357734352 -1.0906677938899081 0.36757380477974388 0.16298450137602466 0.052361996632488396 0.53980740919715187 1.1340193636014642 -1.1718645546559561 0.25954269154718579 0.068191405992937687 -0.27950369875061198 0.12992129869624805 0.76433564841348256 -0.28561364631183922 0.14579409082304554 -0.37776632104184138 -0.65102328141634735 0.34602949459152982 1.3489711075559601 -0.079816590089046124 -0.86588106727726988 -0.17899291571743944 -0.52938120532088739 0.18258951868257486 1.4446568580744759 0.37094903366285875 -0.70415760562225638 -0.74905335747590707 -0.37623926233231397 0.25138968323270178 1.0876264073960307 0.010208430288434898 -0.53598833277474989 -0.74765325370166602 -0.38765817316976225 -0.16161542273446861 0.28335750306881774 0.70644954383591396 -0.75831552356774212 -0.80045122940773494 -0.30698796973544779 -0.2152999498830506 -0.087268071572663863 0.22786802470504292 -0.87733478529633468];

% Layer 2
b2 = [-0.38839024366804553;-0.23708961703123302;-0.60634366536371931;-0.39463856016743271;0.41741413584240811;1.7398446216472685;0.72475455080462625;1.0116064434332639;-0.13796116791246582];
LW2_1 = [0.44747634259165331 0.41498547739163111 0.66154189348937176 -1.8265861449431537 -0.037843441351392448 0.41157288935071135 -0.032795738752300962 1.9053489845481866 -0.31391992946459091 0.68148073311453028 -0.099842540324150644 0.23054176906899523 -1.0503507670585874 -1.2642455726658111 0.026811635256786689 -0.0084912937257806236 -0.57981612801660642 0.56717900848700287 -0.6812069105947367 -1.0320384362377537;0.62277091899813763 2.3054618753953999 0.49278673084524877 -2.7913751664841517 0.55528772608053201 -2.5525136616118633 -1.5374647676516575 0.0065360502728059738 1.8607503002919068 1.8216427543051734 1.2193535175276511 -1.3701979488320575 2.0451784347155857 -1.3086482945637907 -0.21192148833379515 1.4565256329595437 2.56784234607272 0.15583117887058678 -0.52445049217410888 -1.5942820880916808;1.1705752286121605 0.27649410473906327 -0.79024149409179301 1.3890339296892071 1.4166830813281499 3.1225490658445709 1.2393964510666289 1.2569274855220316 -2.028396744666455 -1.6365058896731697 0.49009406006830342 1.2823352182235812 -0.43038740822765403 0.3720924505445613 -1.415058571553715 0.70524337968449302 -2.955523194001171 -0.076097639594955843 -1.1527363088900693 -1.2257639524889903;-1.3705452306505834 -0.60352716394985284 -1.7761163002954188 -1.0283093601242657 0.011232649317856695 0.77293857152407208 -1.1206729187053064 0.96973919258793995 0.62237739058576991 0.66641959329136569 0.1863787968469067 2.2003312643789217 -1.1613359006810107 1.1007200797277168 -0.32312266106927573 1.510816399173833 -0.4929663151579679 -0.47225871377623774 0.88414703548526752 2.2157310257322527;1.3280693595336437 -1.9840028870514557 0.35493628139874056 2.7233555578808102 0.99610913796646561 0.10957957242584297 0.26938919213563284 1.6067559593259322 -0.6475900443376551 -0.64268733273402279 -0.099199416417903738 -2.2689798496739702 -0.6450342522689666 1.0271449543566291 -0.19926562066195258 -1.0182630491941014 1.3926599472412493 0.35609329278253898 0.092445712609027855 0.96937179632078041;-3.2791670284781089 -1.92290666140176 -2.1406392642266807 1.7798900373778268 -0.98239652434132752 -1.0681849564682291 0.8753128513620495 -0.010405926194901671 2.0801340545717744 -2.5295730501669107 0.19143756040957055 -1.1079201365258173 0.011432381167265984 0.26021900555844374 0.68021166611361816 0.31572787257434692 0.0022489013484342096 -0.36746432763571368 0.79180203469041088 1.4373304194069838;2.6074120236735965 1.0700986562353416 1.0845611594798192 -1.327022860530634 -1.7532528711833324 1.5546000487961835 0.76523261521315267 2.0815166701457009 -0.39950203804751877 1.0258774837634805 1.0914484590639875 0.78587460113938223 0.26452307364290673 1.7948696378261788 -1.3244730357025807 -1.0471915661007936 0.73859480011885992 -0.94378954785774205 0.57933849018531491 1.6482227807055145;-0.077601264431980399 1.079018291340021 0.75957227860015553 1.069711737445346 -0.20771030069036736 1.0113194818001594 0.02932590915156956 -3.8879839405293 -1.1250753634044448 -0.4908079394520321 -0.26864189347875811 0.46642109566931145 -0.19079514539423859 -1.9923508500389122 -1.0369163634817546 0.32132974118810759 0.83057069567587893 2.0214048460889682 0.469374957675052 -1.1107988661307959;-0.094238890576979192 1.4959699735027741 1.6978413867102859 0.85047196570006101 1.7984274835300553 0.20022213343286477 0.32032698117176389 -1.1835529123315864 2.0672412319572113 1.6833897767112334 -0.49576328194611119 0.12407661926775906 -0.3922232179049111 0.35229569283890588 -0.59885174215125658 0.20974454551614413 -0.50539166742142017 0.43843621173301539 0.44014040210085081 -0.75096143464824594];

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX, X = {X}; end;

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
    Q = size(X{1},1); % samples/series
else
    Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS
    
    % Input 1
    X{1,ts} = X{1,ts}';
    Xp1 = mapminmax_apply(X{1,ts},x1_step1);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = softmax_apply(repmat(b2,1,Q) + LW2_1*a1);
    
    % Output 1
    Y{1,ts} = a2;
    Y{1,ts} = Y{1,ts}';
end

% Final Delay States
Xf = cell(1,0);
Af = cell(2,0);

% Format Output Arguments
if ~isCellX, Y = cell2mat(Y); end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings)
y = bsxfun(@minus,x,settings.xoffset);
y = bsxfun(@times,y,settings.gain);
y = bsxfun(@plus,y,settings.ymin);
end

% Competitive Soft Transfer Function
function a = softmax_apply(n,~)
if isa(n,'gpuArray')
    a = iSoftmaxApplyGPU(n);
else
    a = iSoftmaxApplyCPU(n);
end
end
function a = iSoftmaxApplyCPU(n)
nmax = max(n,[],1);
n = bsxfun(@minus,n,nmax);
numerator = exp(n);
denominator = sum(numerator,1);
denominator(denominator == 0) = 1;
a = bsxfun(@rdivide,numerator,denominator);
end
function a = iSoftmaxApplyGPU(n)
nmax = max(n,[],1);
numerator = arrayfun(@iSoftmaxApplyGPUHelper1,n,nmax);
denominator = sum(numerator,1);
a = arrayfun(@iSoftmaxApplyGPUHelper2,numerator,denominator);
end
function numerator = iSoftmaxApplyGPUHelper1(n,nmax)
numerator = exp(n - nmax);
end
function a = iSoftmaxApplyGPUHelper2(numerator,denominator)
if (denominator == 0)
    a = numerator;
else
    a = numerator ./ denominator;
end
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n,~)
a = 2 ./ (1 + exp(-2*n)) - 1;
end
