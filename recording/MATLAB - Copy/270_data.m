function [Y,Xf,Af] = myNeuralNetworkFunction(X,~,~)
%MYNEURALNETWORKFUNCTION neural network simulation function.
%
% Generated by Neural Network Toolbox function genFunction, 11-Oct-2016 17:06:33.
%
% [Y] = myNeuralNetworkFunction(X,~,~) takes these arguments:
%
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = Qx60 matrix, input #1 at timestep ts.
%
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = Qx9 matrix, output #1 at timestep ts.
%
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1.xoffset = [0.9375;-83.3125;-179.5;-9.96;-12.03;-8.01;2.1875;-88.875;-179.625;-24.89;-15.38;-15.21;0.25;-83.875;-179.6875;-13.66;-15.24;-13.09;2;-85.9375;-179.125;-22.08;-25.25;-27.26;0.125;-85.9375;-179.375;-15.38;-27.97;-26.4;0.125;-84.625;-179.375;-19.82;-20.48;-22.82;0.125;-84.6875;-179.4375;-20.46;-25.58;-29.42;0.8125;-84.3125;-179.3125;-9.11;-29.9;-16.26;0;-83.5;-179.25;-3.54;-4.18;-2.99;0.5625;-83.625;-179.6875;-1.29;-1.67;-2.26];
x1_step1.gain = [0.00559734126290012;0.0192655027092113;0.00556909154194222;0.0822706705059646;0.108813928182807;0.104547830632514;0.00559930008748906;0.0195003046922608;0.00556424969570509;0.0473372781065089;0.0617856039542787;0.0687049124012367;0.00556328233657858;0.0206851971557854;0.00556618542355192;0.0571265352756355;0.0715307582260372;0.0694927032661571;0.00561009817671809;0.0192076830732293;0.00558561703613196;0.0452488687782805;0.0506585612968592;0.0427441761060056;0.00557200069650009;0.0188235294117647;0.00558659217877095;0.0386398763523957;0.0482741974414675;0.0459770114942529;0.00557394182198223;0.0188124632569077;0.00557200069650009;0.0367174591518267;0.0471031559114461;0.0391619345995692;0.00556134862704206;0.0190930787589499;0.00556618542355192;0.0421407501053519;0.0407497962510187;0.0482625482625483;0.00557200069650009;0.0183696900114811;0.00557588430040077;0.0524658971668415;0.0574052812858783;0.0801924619085806;0.00556812249869497;0.0190136660724896;0.0055963623644631;0.27027027027027;0.280504908835905;0.264550264550265;0.00556812249869497;0.0194528875379939;0.00557394182198223;0.778210116731517;0.558659217877095;0.387596899224806];
x1_step1.ymin = -1;

% Layer 1
b1 = [1.4986376079747716;-1.3078891142753546;-1.3040342836170056;1.0474523739944532;0.37425818659089999;-0.0057221410562436209;-0.48725324890353455;-0.7160013389448262;0.19089331886406086;-0.42356013444314655;-0.032438013918631672;-0.66855961081838167;0.21244173078311041;0.31523855016499636;-0.80750241592267047;0.24412229954593523;0.67446667767804969;0.956644978223681;-1.2678917323216476;1.5497653923755681];
IW1_1 = [-0.40994535108796459 0.3610631491932762 0.22628386467432687 0.31193552441817873 -0.060010998568645918 0.19373122458776196 -0.13488441966503709 -0.016322063935255066 0.2632067588102821 0.48301479765242761 0.38228499018047457 0.62600309986069158 0.036130216404517371 0.0010210380392837695 -0.079261292440227268 0.50834137670325485 0.11922259381001447 0.56961681608683656 -0.27377621412658287 0.32412460870125892 0.076086421668237161 -0.31189630823750647 -0.035628926814209816 -0.50612394283273598 0.36771796614321706 -0.23062209522576926 -0.096726508687106028 0.1732741524582857 -0.01143155219463248 -0.73083441385893422 -0.023839635188459014 -0.028719016141215064 0.02015097476059842 -0.47819770882982232 -0.39971700783950992 0.0080550229021363363 -0.11190305023568116 -0.1462774420641168 0.54516338060612179 -0.27865079254815206 -0.19596036245649887 -0.28621024121674432 0.32891180688926641 0.40026978247780343 0.55163644918200916 -0.023716122991056254 -0.034908072372566962 0.10086143205612748 -0.025075957053075776 0.16169210376413995 0.54423339427964856 0.63658411778552881 0.22295356969373969 0.093237996118228278 -0.060867264062120258 0.042138798254402164 0.65216568913848116 -0.14172505607287389 0.085247938041424123 0.34265923889085592;0.0054052407321674295 -0.40923078810416652 0.4127318048849607 0.05866126411430627 -0.13100632014644001 0.31734346382600032 -0.40712991955044292 -0.36542624732007867 0.80068695010276691 -0.043494762366869354 -0.1035967338178317 -0.068718058694272596 -0.20547033050247204 -0.274691142150217 -0.89530231339959454 -0.072617505223561737 0.0061273001950170993 0.031415690034701717 0.24561271710430099 0.31496312371112223 -0.39429759049487001 -0.31008517131768676 0.1362280849719775 0.055903253739092287 -0.31956094834585907 0.33906797119371207 0.02265730940196806 -0.032859146814643976 0.070745730225301201 -0.28097069003163117 -0.09822740149994022 -0.065725835094075188 -0.31044937881786827 0.067939991037796174 -0.095672039769620354 -0.21014611094613142 -0.11322508422142924 0.35783763586538525 -0.34013329248825874 0.17616549706463033 -0.12309091479121988 -0.18076053301099373 0.28198789011919517 -0.15548585878078233 -0.3883346582183389 -0.093068945591104679 -0.14033274953097935 -0.16314039245318845 -0.1891165544046523 0.016651306089748998 0.081963043241705419 -0.2406187960777243 0.14527384196742271 0.10496065376567185 0.095946289262360054 0.18260094627461512 0.13974366140292102 0.22107921331101352 0.18207742315440917 -0.11460796206482457;0.12599176525286238 0.2508752246385888 -0.15772261342366917 0.0087973426850650877 -0.22650459054791577 0.3535972827863752 -0.28305490967711511 0.009810658829957554 -0.29901150464313481 0.13176276323762159 -0.47758221749763102 0.091881469162535631 0.14920166094076517 0.099399291366409195 -0.13249788694692174 -0.071404390725820749 -0.037805511727608737 -0.15433863731146164 0.33140134409131805 0.35523381998843806 -0.62182159277469462 0.2033541449217168 0.16900160728177535 -0.12536425682369173 -0.03818346975678627 0.16111009414339056 -0.12636301867652375 -0.03190671025861222 -0.23489424782148782 0.092136300029533061 -0.17441832484482195 0.13935057612189702 -0.32149482489552345 0.22394502880420988 -0.10113231890461967 0.30983157631166047 -0.12547381082063827 -0.076183025794447842 -0.26284137334509827 0.19699322043916911 -0.40573190890053606 -0.0066136686086604654 -0.41804693810888938 -0.39259511326546637 0.009299528685713581 -0.11516622351796682 -0.3107875948029889 -0.25892196542031348 -0.23936313193991851 -0.068361135410936039 -0.54850084852578262 -0.048000391157247434 0.25831365245171051 0.21279808627846766 -0.043353526213987845 0.12865017359309383 -0.27980094186651444 0.1626481799152284 -0.26891046749157527 -0.011874352134555696;-0.35923842526452832 -0.16254792452797334 0.52842060367732568 0.46931411413927732 0.031059150715616664 0.14157542468867879 -0.40398797719157997 0.014053871172500804 0.16603328653702024 -0.31121737588848003 0.10450433642893517 0.51744251194549395 -0.085608810481693207 -0.15034717531389136 -0.25398591229854656 -0.36101433552980849 -0.54515331347399698 0.034377314771530505 -0.19869918429151931 0.42237633793000284 0.095264465965809092 -0.87964023704887373 -0.15664579010197555 -0.38685002205948099 0.025395656081338445 0.65577439696487561 0.013757093870469498 -0.78099265538699558 0.1799038275450201 -0.5431750257618343 0.17760359304965545 0.25933472196896079 0.20786482367328982 1.0033203352801054 0.14633840765314432 -0.23685321452226671 0.25597834404030995 -0.44399555324925633 0.16526629298123174 0.68544107271302535 -0.12601376520675112 0.06622705377225116 0.049467476998660567 0.05756884322634815 -0.18816562899513667 0.31551214132474459 0.17400996130873977 0.13277647450729282 -0.32877298761346835 0.13300733551381716 0.16608887453863971 -0.5542935154332933 -0.35494266122535345 -0.068726944601284617 0.021215697267742129 -0.29225879687832568 0.066124949363650154 -0.09110470235338225 0.13359084571338897 0.29850407168951615;-0.58898340267869087 0.46073916145289728 0.3437030964339402 0.15768672263729 -0.67650098621804544 0.14869273226090804 -0.19714817064018522 0.8198322235644443 -0.38712420541132447 -0.39454724770926375 0.74460383417482612 -0.040145949768620404 -0.24292238971075331 0.6309956654297626 -0.33092797567838506 -1.2138811182115676 -0.026925677289845032 -0.29928994673046805 0.24718448364264373 0.44086672389481396 0.2122633808353048 -0.93255387229431208 0.34038007445032403 -0.077864984853064215 0.66510818409325578 0.26337336895200419 0.18986964974735349 -0.95679710407869967 -0.34842080854634705 0.13512179082081346 0.093382674237710114 0.1532271554050362 0.14324207792750474 -0.65363118066286541 -0.063514058984334126 0.11060105830659041 0.030594799783139955 -0.44509987765230286 -0.31090442619051123 0.5532316657942542 -0.20785601147630745 0.10067969635713951 0.78372017457832788 -0.77365073016422992 0.054602473260829607 0.048239825551011639 0.19956688884290533 -0.44517946884429604 0.093372132725136336 -0.87686627461344491 0.055075557218616782 -0.44680455629805288 0.22908281665127858 -0.44327604428806328 0.23962669291268732 -0.78355404675551621 -0.32670273575674541 0.24696384532086799 0.59420143635356448 0.30211585157568965;0.089074901958522093 -0.22096098865613345 -0.23853650949854915 0.68189042568839919 0.036480573537903904 0.038938640148104157 -0.1135380111774706 0.037289248536907085 0.29443173714011256 1.7892566230865254 -0.80892695241215429 -0.18559698688615156 -0.029755926783028741 0.97138858245240067 1.0084615173955813 0.75422290373091705 0.71865199623617348 0.51207500971381015 0.06396886048586542 0.77837596947753296 0.37091493790627267 -1.0134694431606663 -0.25062656158829821 -0.34678638621460561 0.42742236177009985 0.35569805701612683 -0.18992149628911562 -0.64585683489451429 0.36136402581424665 -0.31024350214935276 0.36180568275053437 0.48229694337719825 -0.01577243613998074 0.38193305216033824 0.17779911111189303 -0.12093558253735219 0.042513915697079983 0.2647047534895528 -0.43192705151921479 0.77983909503253301 -0.12741250963181064 -0.28681870191497083 -0.29980479378455349 -0.21533489405024336 0.11545547352639961 0.54237425201880007 -0.56995888072803913 -0.31872370127832805 -0.4599476847039411 -0.050702557566064489 -0.38449533869703567 -0.53317474485290117 -0.50390672076267862 -0.43837190220774713 -0.34516721383232218 0.44028134768036375 0.052763900317237836 0.092826857009318975 -0.28598897992255723 -0.19281781602519987;-0.096106768755276809 -0.10332114833494381 0.66736328996027483 0.26952323723272753 0.064636618599414455 0.21078538532194524 -0.54545932266355512 -0.33243603113924791 0.21103261317642719 0.11615339723784543 -1.0238863948093502 -0.19319292530098317 0.17963471898796934 -0.25563318080006792 1.4262363255827841 0.89493572931854382 0.93631165322703747 0.11165909304140829 0.40866367266529424 -0.39455956373332651 0.18387946151787382 1.134646853186257 0.05719281116889801 0.028265106013128136 -0.17878382382052024 -0.18560826623498697 -0.38439031234295862 0.040125497709045374 -0.23074647477489446 -0.40099228174974233 0.068775306157742674 0.2743301156689758 -0.82981814994439052 0.69132152216782661 0.40119956810971497 -0.35884893063723133 -0.51165005043625689 0.35030610484198416 -0.068242403587392711 0.73628162337587766 0.36951895814189079 -0.27429542489715902 -0.04781612294008622 0.7893846839563966 -0.42152041217639635 -0.1328405985984317 -0.11261433435071901 0.23874067672518565 0.30646863536284419 0.65356300607609874 0.079488490374282073 -0.44422466717235393 0.054455068820205239 -0.28309420615056324 0.00042289507034954689 0.61751287057632887 -0.40820379222219022 0.078410876923528855 0.63311888576714315 -0.029673350881139704;-0.24979164059203704 0.85243934053607517 0.10198123166978129 0.49220191063257684 -0.030308566753086762 -0.0056039088656695841 0.022048421424757197 0.5021861958176399 -0.50160281133968598 0.18241334816561364 -0.1464739269703374 0.035526833342092994 0.10657900637566867 0.14213661990326285 1.038466948622186 -0.36407644465746242 -0.13765526449512225 1.4419409944677446 -0.49514350774859006 0.34193858406431149 0.20657793455099194 -0.2424575073956898 -1.1604007173405904 0.59430496895236273 0.59321698273544432 0.58457503663123556 0.09802228874143594 1.6508302779551398 -0.11203173603735266 0.52211757806818127 -0.23636714160905856 0.018015907054226697 -0.32151279789355092 -1.1016782550148818 -0.12039549807922766 0.37855631849216842 -0.5363490474931164 0.016542913182451931 -0.169939574020327 -0.85639213567653683 -0.069643436021966501 0.12929327185148706 -0.14005452948239688 -0.26120681139943774 -0.42839093840163517 0.14548722591403013 0.084238313928240799 -0.14182792541716327 0.36550524623877401 -0.040430813803422672 -0.16155443621214702 1.0822323250481278 -0.082000566188347904 0.061362577198291107 0.32496673785684604 0.13654758164560107 -0.51452621856621761 -0.17516820967786403 -0.0021080501788314863 -0.12143345341849966;-0.099846215257129708 0.40551652382861791 -0.41453624991532345 0.037824719334486903 -0.041926244236749809 -0.23541675897420761 0.19076697817321939 0.93001450211211956 0.37999349488899492 1.159989328534875 0.25363708404547203 0.32946149124096669 -0.041240394899348769 0.66244622006633203 0.38972631536535196 0.8690310550458813 -0.29959471606408261 0.41376582119648242 -0.039677683100852512 0.14540165384451428 -0.014186313405144179 0.94896813253889101 -0.24437476047432852 0.18581220633489903 0.12582142282985428 -0.073887906378797996 0.29802929626219427 -0.18689198860868317 -0.12289305917869178 -0.099371460664076275 0.38011063742504392 -0.38307108693807346 -0.22219468737022061 0.21046515636783267 -0.00062478223936721783 -0.29011012234490607 -0.61365878588882949 -0.47456292482680124 -0.3213506682801493 0.33659086750231809 -0.056938398262095888 0.13334438636444737 -0.36056799042452775 -0.40628420480753974 -0.023351490346732721 -0.39037813335017368 -0.14372686421280031 0.076015341291217953 0.16533381741177647 -0.86368679340760401 -0.47905775516460813 -0.068649811496025545 -0.12164321410842982 -0.3045832168686276 0.20013577165402638 -0.75217347768158771 -0.062456157297659971 0.11488391775945515 -0.21183724206592872 0.19677657118024289;-0.3250674203901876 0.51630180688577143 0.65622721869457568 0.35435421241862508 0.064959752846692975 0.028749362807347158 0.31840788986729379 0.20576759997573241 0.50754534330754142 1.6935732236983789 0.45985290953978025 -0.15756150740737396 -0.33084438498047081 1.0262112303145015 0.22101788143750931 -0.26283821049669731 0.30396881798261355 -0.64437960400136496 0.27473127914131262 0.79144059425240931 -0.048502960611266806 -0.81518542163961405 -0.1114628063401177 -0.41449397231982588 0.31323996480330718 0.31224725331543479 0.30310716292623352 -0.45162483690762889 0.044194261725027675 0.16649021858153618 -0.074606769417608729 -0.041127239289039212 -0.12252387457242214 -0.51006325462425672 0.19740229060219183 0.17373867768388107 -0.041630801232438626 0.084863653206560988 -0.37963945655401682 -0.25417630934810359 0.16682274044015138 0.069948780428111687 0.0058663361624337693 -0.29855539633231615 -0.18368656751466073 0.41036520400952625 -0.50321439788452704 0.019318875176712248 -0.1683655714804709 0.06958762294583809 -0.34505098357555197 0.14059113301765283 -0.047857031015266338 0.09129037084196602 -0.18965739187862243 -0.26016922390859964 -0.038761436246129093 -0.0081930716280471678 0.6657876990703534 -0.10508964416917156;0.26870811336629163 -0.13889538687181269 -0.098783694251971255 -0.1000762486363239 -0.056829794765256264 0.2330610984162641 -0.06130797211104784 0.18940068061103008 0.35124960747023248 0.25261313118777473 -0.2528952108941126 0.066919101120621161 -0.61182089394793704 0.12511219151838981 0.16319269253715607 0.48329538490594154 0.66981359930296369 0.54372394784201472 -0.26316054239974523 0.11722528086458617 0.18809862179357664 0.49906033372996922 0.040076649187660802 0.29089665555987515 -0.45809351771700629 -0.48579762602077703 0.088487607865422868 0.73021545981009983 0.18690877202978623 -0.0067242221930423896 0.22169649918154571 -0.43020812245929912 0.043178678578053839 -1.0201628380620651 0.069317745506875555 0.4279076636839752 0.24282725223137411 -0.65666093503312695 0.084979992240596866 -0.43074084916386562 -0.10712826885361679 0.16464865159836264 -0.2632235109843154 -0.86211992393963022 0.17861904009298632 0.32228758586102668 0.087813578776897966 0.10813476136552148 -0.01900311482086332 -0.55662410152883446 -0.024545794614672083 0.16001305310763722 0.050722747802399534 0.12090832239894013 -0.231600312205162 -0.57500811362685522 0.0043112284980292934 -0.52869233744546351 -0.23372111761913567 0.0059796474757488711;-0.18659396405637937 0.25206055176465486 0.6199510559861201 0.28737276540864859 -0.18486584509575016 -0.1907826778582172 -0.20997708098430323 -0.07969229952921425 0.25467854049711525 1.4243257679071821 -0.19577483587740399 -0.26237789859686933 -0.26666655741762646 0.42965343254733557 0.50665534102838061 0.73620515702353206 0.0931623215396718 -0.29266932743164548 0.29696043593712657 0.53667052648524871 -0.072611634054485258 0.078390260892873639 -0.17358740434741943 0.018335207863325372 0.20689966470590404 0.19829612351335058 -0.28307451193304689 0.91589081378545301 -0.28510092563323408 -0.11145291885910001 0.47578405617387681 0.24736608466311522 -0.088774106872709105 -0.76157207836477581 -0.28650674742837101 0.37402209570174277 -0.17830048782826935 0.05938933421550658 -0.39016786702120138 -1.192949003051273 -0.33170151823338145 0.1054035535369791 -0.18714724394106244 0.19657115658175978 -0.12323503039410297 0.071916933717416198 -0.34146460756516678 -0.096865680813570179 0.1857811170116265 -0.24595020401870696 0.064253426658977306 0.9129191303797497 -0.17188858389067485 0.1293014370970266 -0.2248281807232782 0.31226838341251356 -0.15476504120738965 -0.053612977190557784 -0.43524190488971348 0.61601191192402627;0.11730495623883283 0.029637253474517566 0.29802203491150459 0.55033096155461314 0.13273954108333852 -0.035756812203245628 0.011851631353587386 -0.43899906694480101 -0.47095650692704322 -0.3790870037928793 -0.083327985856039649 0.50510299838356199 0.11435802330226505 -0.74300472770551784 0.020098491217722621 -0.16910263240808479 0.11037186991469099 0.44400709720227083 -0.086783083111545312 -0.8149462571150965 -0.15400629287222287 1.7965043495473898 -0.066442672020181198 0.013012468134420986 0.17126221544257195 -0.43264024453987998 0.12958880039849796 0.88821014912094287 -0.57400702204191589 -0.050081724770643425 -0.41462537441596864 0.22191735552164982 -0.37144393271083886 0.5626264264790426 0.5143358329215364 -0.3463276235774026 -0.2976178250278278 0.21767520131921048 0.1427981373058553 -0.073915329575411262 0.23061959739309701 -0.095494661555873023 0.17628067975939565 0.61408733740276178 0.31485688562227765 -0.38852171176678701 0.097990528605573432 0.48936858689377022 0.39675875699206981 0.54521625230419568 0.1149135484071383 0.15516029270716203 -0.38123962963029789 0.20633842080292639 0.18780457541943463 0.91451212172559648 0.00091870766199341966 -0.089752636257060911 0.46439007296623203 -0.44096821239250161;0.23769354565720538 -0.5191562555393735 0.53666803325054757 0.39891766934278811 0.34232131811609318 -0.26154261959308128 -0.28669592991250059 -0.31434198387121715 1.0771912125246608 1.8492422609663275 -0.71496401373466534 -0.052732557912450184 -0.11868411234312017 -0.37564940478206366 0.69826934462518997 0.68122545515858812 0.36199564396238598 -0.32712820866178105 0.075770759085017611 0.014289439646380218 -0.24895739545150436 0.11809943344957358 -0.52596462041766168 -0.058415091188523428 0.096073099501735176 -0.3920897371576651 -0.75600973754340151 0.51979140022256765 -0.21729734510531484 -0.14711835863868555 0.05490363498000797 -0.065937125830951127 -0.68380581727310441 -0.77487457681527838 0.06606257514544718 0.56449174335942653 -0.011979372806757906 0.40231168599531614 -0.25922821166535115 -0.85204158533071894 0.28284433671640508 -0.18749014468281255 -0.09258712715220023 0.56118246017172368 -0.051502408711569865 -0.059784114554464043 -0.51019157731337672 -0.22702942974087431 0.061787215284254203 0.22121979051310231 -0.2661937797511319 0.97802188089205666 -0.3139167433048089 0.47836454745561463 0.28411141183588984 0.54915708480451564 0.11725775896388188 -0.29049660570887237 0.22810576040572397 0.18894443194918498;-0.25378861127940044 -0.014106036081811706 -0.20228065168496012 0.1630652295835677 -0.082801728598079716 -0.15374339528429953 -0.48479841936967366 -0.27113453121536391 -0.69784236923595033 0.31916860457992602 -0.78364963036749569 0.32531123374047943 0.15363261316594096 -0.062192042847178428 -0.19740610289923269 -0.10858856468129195 0.49535648624538675 0.54220820962191252 0.19417965974511001 0.1485026529980166 -0.028162878258526911 -0.96594015239696074 0.072086139680658926 0.10785334328798687 -0.20861694688698681 0.073609777356114722 -0.39890944071002887 0.162539405205955 0.14493540762691373 -0.48445542372534489 0.12135824774926988 0.23814220492248936 -0.36214017452687947 0.089518441084944556 -0.050897880577288904 -0.10586729120697382 -0.042638078876314843 0.4371641671510007 -0.17915438571713718 0.094403648778950175 -0.063413165029066076 -0.37351297980534409 -0.30529737659725725 0.49827277562851235 -0.29620553951527184 0.11134377093177315 -0.22342440938036548 -0.27826509427219198 -0.038179626344005901 0.69888904512808137 0.015348237002257157 -0.046040830506097537 -0.17026407801851987 0.10475571830244965 0.014987576735914027 0.074459370222314969 0.34467207397310962 -0.20910396057614733 0.16167996659939224 0.31116107959540718;-0.09278695103587524 -0.19622888590582743 0.71663237176382033 -0.79343883290603745 -0.099726809652685933 0.19140227256688216 -0.13251785718615869 -0.52945186060657401 0.26778479062140709 -2.3837122763250012 -1.0910140659427154 -0.07814175199065175 0.23505263853521294 -0.30856612201077754 0.6024878095204963 -1.7114580163697737 1.4257146549589965 0.27910533183150521 0.21840917713801844 0.93518942214459777 -0.35289663886556755 -1.4164451647388956 0.37188764900701704 0.088854959898947761 -0.40824224235419154 0.45458788988894117 -0.70663887145044513 -0.31030410419450322 -0.084355332791679921 0.048188874503201515 -0.44985841615196098 0.38408299745767432 -0.060981609560635801 -0.98307402902115992 -0.31726150354098287 0.10771397190695646 0.17273123693107822 0.20624766376325826 0.061317379863852398 -0.48559036075888429 0.092667325951705876 -0.44270602195957542 -0.078890429373899867 -0.30008168180432909 -0.34677269994656473 0.39755076676140594 -0.19815564810509101 0.012152942396926138 0.4747933793785285 -0.27769743307950334 -0.41237859253155235 0.7258064904287187 0.28784406186518224 0.20630561522791468 0.13259940431126407 -0.39151967427700746 -0.080677905446214032 0.48427826883480718 -0.22563163048763851 0.35395237830672144;0.037823366612474561 0.16911743123645789 0.16465982748697808 0.2099070050594504 -0.074842115467200432 -0.22011618297135291 -0.20803176067074286 0.087139212504094288 0.19664476590355026 0.43635299357614843 -0.19841069977381426 -0.15181313814892267 0.1518336334201808 0.30798611252506491 -0.12036310536924939 0.18543614763129798 -0.32728001618882935 0.099093879826933323 -0.31939486370466968 0.29256862903436093 0.16197738944185133 -0.26291942706280019 0.18652945979044641 0.1955611432818809 -0.32833585671516718 0.50959612049045688 -0.3533464280542471 0.12512924349212656 -0.20998021720374263 -0.19393653818434248 -0.2509870315222798 0.41721990630187389 -0.0040277868143161503 -0.50756874194804358 0.13911799902154778 -0.14455571431970368 0.12390630364020028 -0.18685315073703879 0.098759185781219283 0.10578778709007851 0.02041484802118131 0.16470006622315828 -0.24888154814646432 -0.17540989967105231 0.028618113897133361 -0.18460996535254634 -0.052263429412406165 0.07396708933058796 -0.095600639036130752 -0.12883458661113215 -0.28221762711840215 0.21071281000322395 -0.19623369851720579 0.034294535363505456 0.016045005446694502 0.30588195701657261 0.21815505868648646 0.02089951950970487 -0.061348633112269478 -0.16840408961170422;0.3489479384709579 0.035921495542880599 -0.25667148092247083 -0.2148640540729938 -0.19018687529576525 -0.031087029095842357 0.24219271716134524 0.18989169704536288 -0.36861524144356311 0.43948413286543841 -0.66128527748698229 0.1181898114366359 0.2189624987306584 0.28046363670967095 0.78031578110397914 0.62701225486089951 0.72137899216724233 -0.085044681936879571 -0.015682342788145471 0.2168852255523141 -0.087946497211241759 0.038309362673097064 0.32515693922642069 -0.45921765757307276 0.061867801317381232 0.18021502873431486 0.046920921646267204 0.45323060805114479 0.14642691914068368 0.060310464216773677 0.52625547699985087 -0.11077186616976853 0.37755149283186729 -0.10659332538119043 0.16183005030738926 0.021470500566249162 -0.050240474419119524 0.07680705044453065 0.39193687552171402 0.051421867359155674 -0.066816417647971735 -0.14116643674857501 -0.20769063166879478 -0.044343206626428225 0.079505082275131547 0.1933562604321481 -0.27990795493002302 -0.13298559851937489 0.19408197364775828 -0.49164066214075591 0.35159700559131168 0.37594229689941017 -0.082737630895280759 -0.31319681733532456 -0.046690202750948706 -0.25444644378525644 0.093495020588469563 -0.39950107402914942 -0.0089372602872772079 0.01952579900377626;-0.023826802407276547 -0.21944855390105136 -0.060327247955103247 0.38470815084505328 0.35262265703622198 -0.23843303858996201 0.47728786947948748 -0.1124724665213329 -0.29653626400367061 0.0029520957857366199 -0.04633414550777832 0.50070597865942834 0.10149134445144595 0.11252093622386188 0.14535514995263685 -1.0750340664948268 0.65226062804019713 0.12151452941298693 0.088803919594918526 0.19230591070278161 -0.0019832696066791351 -0.91999132740576284 -0.16983466076037643 0.060785770176830976 0.30036895346743786 0.18472923368794236 -0.29783792256962083 -0.21830638187410814 -0.12691907437171251 0.66174338469450356 -0.41004057265489702 0.59413164808865748 -0.27119933055101308 -0.33496453794264991 -0.13324690137078923 -0.25992704643957831 -0.241513421263649 0.39800885821039605 -0.18820701118303768 -0.4111722026912793 0.11047547871581902 0.073837060787138017 -0.2196224531877819 0.062979780219927325 0.3964816962419318 0.30619970292016246 0.22144274663554175 0.043959992918366012 0.46211414697099235 0.26056121937197807 0.17975305164480032 0.4452522822086219 0.4316876773361058 -0.25846278424150571 0.19989518651778557 0.47338264000313401 0.07741593087066527 -0.0012614569996153568 0.70286519579711837 -0.14173247065971253;0.036123050612005624 0.078603043790952273 -0.030088185139204783 -0.36550467245864043 0.24422450398972992 0.2758140768782274 0.23848473498115116 0.2376301845399646 0.18632209501481645 -0.18659109180056407 -0.38353641181784071 0.20208669686304045 -0.18599756393897107 -0.18329531040436359 0.082191439289547349 -0.021411309687487098 0.036307874192495898 0.023485420192264503 -0.016390836563920968 0.40020522256025809 -0.22466513362068086 0.16651140751294785 0.048354507134091507 -0.16480721910803336 0.18784626920038486 0.20024005663088645 0.14757921928472689 0.083446272059277876 -0.27386788657555822 -0.17622061141027756 -0.1141731589856563 0.0071073938785815192 0.20619981012312602 -0.068432495718713793 -0.29246534934565549 0.20818659519649529 -0.0017468250287953984 0.012567141198079956 -0.19133674398479103 -0.31056631782959021 0.27638408518188323 0.11251760818907255 0.057447506356263091 0.31705781923141546 0.19971374912124254 -0.17196941500956903 0.049826914042294571 -0.071702024152389451 0.34848524466825076 0.4419177299301949 -0.10639077618098891 0.18897268475811732 -0.014308304158543249 0.078540834400447873 0.061143255142229055 -0.034496112311794093 -0.13744287100777255 -0.28374090167787025 -0.036977499298911781 -0.00056351921548122342];

% Layer 2
b2 = [0.13293794285767524;-0.50999932945619375;0.19327341510248144;0.15937653201749541;0.44553279040919147;-0.29531170420404523;0.61938051546025319;-0.10535696017013128;-0.56885811100892802];
LW2_1 = [0.13033988374046601 -0.1234586458168781 -0.34220944070424819 -0.6661159877696804 1.3412388629621104 1.043607638865041 -0.52189138694637083 0.54959238601420601 0.73366337613382426 0.36021477597290319 -0.37760536224291902 -1.0176041559914992 -0.97062198265610744 -0.76688265915391451 -0.21868140954231999 1.4779387267950796 0.09396954216247963 -0.44728033871169798 0.75618005953425527 0.3490794357580157;-0.5372255836360641 -0.66481477923654009 -0.37351955854155539 1.4430819057767554 -0.47454451312390344 -0.89596810450728881 -0.20843870021380545 0.15648504762320462 -1.623603886179287 -1.7170881875896955 -1.3430157525948863 -1.1889036916883244 0.20471512377347212 -1.679967544271697 0.0011060426725018613 2.1549098954436632 -0.44390757490501076 -0.080405712431644003 -0.71711720701656412 1.087243990495693;1.6366150385600529 -0.44502395922842836 0.040836624281833982 -1.0929049146481289 -0.37259104667281095 -0.78158438182703571 -1.1262780931183605 2.3169087356282509 -0.46831619669494917 0.058226361443640955 0.48504334468929977 2.0085839621781898 0.18021344170679096 1.7125381520033773 0.59138844705059479 0.10006496187509199 0.64600840116584579 0.3050379179412871 0.40111408147266314 0.42385082525753737;0.48132672168229379 -0.31774949325646396 0.94513684783400365 0.019430092953737675 -1.6157862831476477 1.6892418204126343 0.041455430004679703 -0.56208233608717295 1.2002676045366119 0.15249528399772946 0.2239419839566201 0.9599835636015871 -1.2004569364301378 0.38365376609980323 -0.36812445232676055 -1.0696165467024099 -0.19243385660102677 1.3321505059328727 -1.8716851409918767 -0.22428505174759114;-1.3986073033744264 -0.51906339847300909 0.30336065563900866 -0.97524781895928869 0.15544849690456103 0.73421555695268237 0.95270308517324853 1.6398160939001201 1.0964213345827714 0.89256371082247121 -1.217729433289634 0.32975774628724347 0.82192304478995826 -0.23926122436561278 -1.036147151662147 -1.5197198793111615 0.66971107930501017 -0.2918885641851931 -0.21437490672979873 0.32265766178850708;0.082922274480443356 0.59581460363421546 -0.5472398786846786 -0.5343936729529295 -1.5471097809496337 -0.50099313468459261 1.3666257988715778 -1.3611057425544801 -0.015204657016932384 -0.81577213537400906 -0.27171864150978792 -1.4605515477069713 2.4316098519906628 1.0556712973153211 0.18332498872448585 -1.4046013489793041 -0.68956663610511715 -0.44369463784511004 -0.64941266997412017 -0.10302230926613308;0.67803469366560587 0.98971071757831564 0.68985297893698971 0.23607336379435404 1.0551148647573252 -1.3686944682783357 -0.77435646294491622 0.0689868724441208 1.7262587465122148 -0.38594899134673155 2.1392878231411525 -1.5106069945359646 0.057248251399350275 -1.3858604385554427 -0.75959700337596847 0.14984745001305097 -1.0168283980516544 0.48288562327217183 -0.9040003136175635 -0.64340434941149516;0.44554348723650239 0.83223014369002568 0.93366079249444289 -0.55303184568208941 -0.30885782713463389 1.0277465871789553 1.2992632422296915 -0.42360710183157063 -1.0962934850195156 1.8188447129786909 0.1454780376065346 0.98778317898761403 -0.53001276764535088 1.3845309387252336 0.89427338888535046 2.9499225724238878 -0.17090549346511877 0.46547386603832902 0.76434379873576086 0.79775411140975039;0.29702932965181128 1.412953432467454 0.24555512365491111 1.1797592937428838 1.690938003163253 -0.73022198417105477 -1.6895832353175546 -1.4966704665096309 -0.3172626398729142 0.92345239057119866 -1.6260053205435132 -0.38182174776128863 -1.1752398710373206 -1.3941893120208839 -1.2368922127236148 -0.32409990170958025 0.24052621086660128 -1.1199130872639778 -0.59780149119601356 -0.66714597570551948];

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX, X = {X}; end;

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
    Q = size(X{1},1); % samples/series
else
    Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS
    
    % Input 1
    X{1,ts} = X{1,ts}';
    Xp1 = mapminmax_apply(X{1,ts},x1_step1);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = softmax_apply(repmat(b2,1,Q) + LW2_1*a1);
    
    % Output 1
    Y{1,ts} = a2;
    Y{1,ts} = Y{1,ts}';
end

% Final Delay States
Xf = cell(1,0);
Af = cell(2,0);

% Format Output Arguments
if ~isCellX, Y = cell2mat(Y); end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings)
y = bsxfun(@minus,x,settings.xoffset);
y = bsxfun(@times,y,settings.gain);
y = bsxfun(@plus,y,settings.ymin);
end

% Competitive Soft Transfer Function
function a = softmax_apply(n,~)
if isa(n,'gpuArray')
    a = iSoftmaxApplyGPU(n);
else
    a = iSoftmaxApplyCPU(n);
end
end
function a = iSoftmaxApplyCPU(n)
nmax = max(n,[],1);
n = bsxfun(@minus,n,nmax);
numerator = exp(n);
denominator = sum(numerator,1);
denominator(denominator == 0) = 1;
a = bsxfun(@rdivide,numerator,denominator);
end
function a = iSoftmaxApplyGPU(n)
nmax = max(n,[],1);
numerator = arrayfun(@iSoftmaxApplyGPUHelper1,n,nmax);
denominator = sum(numerator,1);
a = arrayfun(@iSoftmaxApplyGPUHelper2,numerator,denominator);
end
function numerator = iSoftmaxApplyGPUHelper1(n,nmax)
numerator = exp(n - nmax);
end
function a = iSoftmaxApplyGPUHelper2(numerator,denominator)
if (denominator == 0)
    a = numerator;
else
    a = numerator ./ denominator;
end
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n,~)
a = 2 ./ (1 + exp(-2*n)) - 1;
end
