function [Y,Xf,Af] = myNeuralNetworkFunction(X,~,~)
%MYNEURALNETWORKFUNCTION neural network simulation function.
%
% Generated by Neural Network Toolbox function genFunction, 18-Oct-2016 16:23:28.
%
% [Y] = myNeuralNetworkFunction(X,~,~) takes these arguments:
%
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = Qx60 matrix, input #1 at timestep ts.
%
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = Qx9 matrix, output #1 at timestep ts.
%
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1.xoffset = [0.1875;-47.6875;-79.625;-12.64;-10.77;-5.96;0.6875;-68;-81;-14.03;-15.75;-15.48;0.0625;-86;-88.5;-14;-30.52;-19.09;0.0625;-82.5;-134.9375;-21.97;-25.86;-26.04;0.4375;-86.1875;-151.1875;-11.28;-14.14;-20.69;0.125;-89.5625;-179.875;-17.05;-12.69;-18.21;0.375;-87.9375;-178.875;-14.29;-13.09;-8.48;0;-88.6875;-178.6875;-4.67;-7.33;-5.94;0.1875;-87.875;-178.5;-3.96;-4.64;-3.09;0.125;-87.625;-177.875;-5.94;-2.9;-5.75];
x1_step1.gain = [0.00556328233657858;0.0274442538593482;0.0131470829909614;0.0812017864393017;0.0854335753951303;0.0806776926179911;0.00557006092254134;0.0222531293463143;0.0130505709624796;0.0614250614250614;0.0664672648720505;0.0570613409415121;0.00556909154194222;0.0187025131502046;0.0123552123552124;0.0550357732526142;0.0486026731470231;0.0556328233657858;0.00556231531374935;0.0186697782963827;0.00829445308449974;0.04;0.049862877088008;0.0427899015832264;0.00556618542355192;0.0144209103199639;0.00765001195314368;0.0410930758167249;0.058021467943139;0.0423190859077444;0.00557588430040077;0.0143112701252236;0.00563976031018682;0.0467945718296678;0.0664672648720505;0.049079754601227;0.00556715379262352;0.0136054421768707;0.00560714911512178;0.0604412209126624;0.0656814449917898;0.0749063670411985;0.00557006092254134;0.0133779264214047;0.00562884784520668;0.137362637362637;0.0898472596585804;0.10989010989011;0.00555941626129256;0.0140597539543058;0.00561502017897877;0.171379605826907;0.0854335753951303;0.136986301369863;0.00557880055788006;0.0145520691223283;0.00561206594177482;0.174216027874564;0.247218788627936;0.0969461948618517];
x1_step1.ymin = -1;

% Layer 1
b1 = [1.4652744855658784;1.2402587517888797;-0.92393964239272908;1.1633585286419266;-0.53022020318026186;0.19421404397517403;-0.34765541007786083;-0.20167305964244014;0.24802436675086867;0.031003587824215639;-0.22294708530473184;0.14589831915833448;-0.49156365929027623;0.5905356215329548;1.2492143876408408;0.50974622015315552;-0.59361171603182872;1.1040596486671421;-1.1787690280438867;-0.95926946822758918];
IW1_1 = [-0.14204870007947751 -0.71554009976097976 1.0502828390430263 -0.63817225762668828 -0.33928538255777241 -0.062757349210213434 0.19317239538114339 -0.36414601530746771 0.36058326419545894 -0.96031926796125655 -0.53480078763185124 0.17278978173201523 -0.039736951498496827 -0.49050530431085471 -0.079074715182332528 0.25711434230854241 -0.087795732724972014 -0.15157334105563752 0.25831764486633224 -0.22393639747419139 -0.47211274107606882 0.1601307140102991 0.16041628246471631 -0.18720220939541124 -0.096385902485273581 -0.19852457883118932 -0.77084404669366624 0.30086212533518025 0.24869539271837279 -0.049545045298247797 -0.23043642346965551 0.43369310599965194 -0.32916554917081819 0.94798625413242554 0.38717678683027296 -0.2808620127996691 -0.25839262234609056 0.39055846312655751 -0.33271993371695607 0.54415054487194159 0.16714907327843181 -0.36389135270972128 0.26242008407187417 -0.18111772683689997 -0.33446596457438865 0.61618122390403229 0.073668552711844956 0.28641733965856958 0.20519047010504871 -0.14551490981609019 -0.66270988737113845 0.42290377030332987 0.27891998733854589 -0.10943254202950944 -0.075827168224772701 0.077011591468354471 -0.45551988926272868 -0.20168522923837953 -0.019995150751709136 0.052875035657464646;-0.10312632387280467 -0.1320218426183043 -0.11333040015696844 0.49539762044170188 -0.83168439729874588 -0.086694205608418867 0.097855259920033022 -0.10954170496122979 -0.48288120687030484 0.77141230020458551 -0.66445691176748167 0.025194500574394568 -0.020575602361728638 -0.57741738943707199 -0.81987718317254954 0.42162107682221395 -0.12766017500479088 0.14990148614303062 0.39403197284122532 -0.65589909602685981 -0.47921230481744465 0.37551793561317409 0.27381000001672479 0.048207180147764879 0.011419103754791576 -0.24858929346802602 -0.28736378042708238 0.048927480163567579 0.57112286760535691 0.22863634319507589 -0.34165125090596266 0.091947042460188866 -0.49357475111795024 0.035909580183263685 0.63867864348516901 -0.20338143695428257 -0.32690228860068371 -0.23572928190772077 -0.38601506082397002 -0.053926233565916915 0.52256745890532807 -0.16311943289677508 0.19300394147029484 0.10739680396622317 -0.44639044091653135 0.010922333462008365 0.071987946822942683 -0.017351705265343784 -0.10874764114767899 0.12470639753060954 -0.54911648186305206 -0.13593015631492078 0.20382605641908683 -0.078872282631967439 -0.10849158142125347 0.10799293643334093 -0.46889760368719324 0.15508843318948648 0.033333314573084145 0.18017447255409727;0.2813849990407522 -0.03245509229668822 -0.19288622309262363 -0.026353247985887316 -0.12443665600478707 0.011482881765859255 0.12391429947683309 0.14634854473514025 -0.27174470086401564 0.057555961235129363 0.37625027280956808 0.13648794150169311 0.28396566887912911 -0.13391144611041039 -0.16100693643539285 0.1498389197477209 -0.019031915323959689 -0.25241203994373373 0.24972697768366922 -0.24499159189697337 0.13144002949221434 0.25861513732331726 -0.18472399418650054 -0.10313544856386377 0.10612052603265526 0.15190881974833723 -0.10659220666513353 -0.32507004435772474 -0.20328245785131088 -0.10213082062793012 -0.32447662510706576 0.4097290812666336 0.17578007255736633 0.061152119691717077 -0.50865734812422503 0.2839012200942595 -0.44705229873453534 -0.12644585822439763 0.43168736086932474 -0.19551777382046623 -0.29700805406722586 0.0049463622042708088 0.069024130598987127 0.15805947347568278 0.093941053061089047 -0.27512459084283292 -0.23611696003248142 0.10537992390840699 -0.012044029639645553 0.31565335570774378 0.37460220659466514 -0.10833499112869165 -0.13440620675974024 0.28350554309080267 0.19953872105943166 0.48949247573681254 0.1403712880818189 -0.0067520611461326218 0.20090903100398508 -0.22089756219412496;-0.015405845851883919 0.11875833363311107 -0.055066021386706375 -0.086440396029355424 -0.70829357941232773 0.061792844474755276 -0.066323777401278344 -0.21772390615207604 -0.1973659039602233 0.26693713329264246 -1.0156302223766589 0.29322354382705729 0.14478192816872279 -0.54999302648871684 0.34073511776154308 0.0031925792499860853 -0.41663635886306549 -0.37282296258187059 0.010985881967409119 -0.66102896001723144 0.46908608394765205 0.16699273816303117 0.06308240814405866 0.18515430024479215 0.0023560475189559824 -0.77846381690296462 0.44274338158683901 0.19190587017325705 0.17947015011824552 0.044189793492331764 0.038962013149501776 -0.52318317298384309 0.077116634853433369 0.26311596638845691 0.86221312533640382 -0.28260064686088482 -0.2429575530520296 -0.77456370048101475 0.42373273306408982 -0.11477835589698629 0.17871978984058939 -0.024492429483909589 -0.0066337213966757708 -0.18042705914862092 0.44130092930902542 0.14537357515956834 0.40283414189128136 -0.28693220142279874 0.24948640309949499 -0.7203010296449478 0.013821495932930267 0.2163491702664927 0.16596582163116241 0.076276744815856529 0.0915716133106034 -0.66283220932860709 0.19024693979218804 0.18093822784147354 -0.29962971657733117 -0.0013801130611158601;0.18090078642366031 0.45193049472510222 1.2690333967559373 -0.05329599495604085 -0.5748520266234014 0.18919856218583567 0.023239393772148075 1.0010239515340287 1.2896948509847046 0.2412356327597838 -1.1003552911443237 -0.63613876869603381 -0.029795797205552935 0.48999113834285929 0.40856577793949089 -0.35668622556104085 -0.25581755913414528 -0.13040738896398654 0.10201613818575821 0.23930836635162675 -0.35605096863113778 -0.025998268802064604 -0.079747712351651956 -0.18513214910901743 -0.17542489912967291 0.28461061087444772 -0.23355449661944544 -0.57481381841485246 0.49979718236940973 -0.20382503259541085 0.33465099015656902 -0.18241771326057304 -0.26570322249438993 0.53314394799305664 0.86729551488899836 -0.25211414781872626 -0.11025567781729401 -0.50452619286606737 -0.55281635199877488 0.15701263861477621 0.5644414740647794 -0.22239050888584808 0.27291383479825154 -0.56775627415623964 -0.28536082561748155 0.54922428064694262 0.42165632533885428 0.0052401100141364777 -0.044069149484778414 -0.58132483227559029 -0.64331662927394961 -0.24803737818368859 -0.026442927898059607 -0.13640140816933274 -0.16529342609915346 -0.364820548786286 -0.58645717734203684 0.17670465689223647 -0.21752118256180322 -0.27740341878136515;-0.090491119495923505 -0.3010219768245615 -0.95449312204805181 -0.13026338746020705 0.30581316723381025 0.41667628259631118 -0.11719061731120403 0.036283653697989859 -0.43206404242814073 -0.55977556834106179 0.37736191028166971 0.65091030757723622 -0.34028302766244811 -0.2190410780309803 -0.41894163805975448 -0.22003229980585401 0.26156292426596406 -0.042265051388657382 -0.35104338667392948 -0.25171258837034594 0.18154139556295434 -0.35503210776371796 -0.41782292402147653 0.3622097209803245 0.12338698404356649 -0.34336281370187932 0.22611392353687018 -0.050807279165742417 -0.063108983594806864 0.36879246378110342 0.47387268598138194 -0.17418175465276514 0.3769689378541895 0.33299826751662887 -0.35369636687881123 -0.2073808039170838 0.04445107551245616 -0.33316377184491569 0.022543694507982194 0.22936619453365939 -0.58672991174646849 -0.1162308079531959 -0.39101402401463387 -0.47609718234911336 0.26841823370394957 0.026828785934799024 -0.36041723778790247 0.29723680392951934 -0.24284910883935307 -0.54155611912719348 -0.12929891118733619 -0.077412865260706648 -0.18308150282508157 0.37071651946394951 0.32264975808129703 -0.4879429837279543 0.20963290989500286 -0.35009483004356406 -0.074626841050941708 0.41514149251497917;0.10269558768352276 -0.0067389303325118347 0.68824441503630407 -0.18771021915426134 0.56213804736398665 0.066171113245619723 -0.014269042323863404 -0.10584792250504928 0.9143827404748831 -0.5910781018725233 1.0519761177681715 -0.17916877513385226 -0.022492548236580503 0.44660474534712952 0.25766017693958199 0.34134614069282199 0.43753112039501335 0.79028068265530227 0.15744184065139402 0.1219581302250094 -0.098186229642695869 -0.031736929087026147 -0.86849876685788396 0.41234878487672777 -0.083946159492814157 -0.035857775760914361 -0.58974438147008301 -0.13570147354382353 -0.23151453409135045 0.43229182707033625 -0.018618275605268197 0.10308262658912215 -0.32409435635436012 1.1358821006029824 -0.6035706662795931 -0.2786777805575596 0.44915653237325182 -0.42307073034211551 -0.63122613632979352 0.42728733410099168 -0.69631516697036067 0.22019504408033991 -0.24870705568905713 -0.28595863732112664 -0.31971999523939698 0.12050449138936087 -0.19880940512724216 0.0018723205969034687 -0.019180107028283017 -0.86850995994977931 -0.63276026555920428 -0.062531589517686018 -0.54432403033470056 -0.19133843428068401 -0.26292145405666889 -0.67534649865522389 -0.32532912789107021 0.18453902653736332 -0.04880351779768799 0.032258004573662444;0.074568363526635789 -0.80367074359953883 -0.045638081360405744 -0.42825751106074766 0.42766317833419965 0.079934916286981211 -0.30579047439505508 -0.33688400654057032 -0.23326397097861129 -1.0887165081247872 0.021369098630325871 -0.062001287579611437 -0.29197126890959357 -0.48691815921891901 -0.86564549020970283 0.75110135903967357 0.2828946870722045 -0.23580506895169356 -0.10183279379401441 -0.15930354210007563 -0.46086535094732095 0.49271798827380409 0.29386387755401455 -0.29086541872092159 0.32555060167307509 -0.068752045319512331 -0.90740403238278655 0.45515223945618594 -0.079812087891983574 -0.35248650924703617 0.082361411696127124 0.67779270084360566 -0.74409551328736823 -0.42750011109259217 -0.24089895979364667 -0.09151043986391752 0.018822340602395321 0.64391925547672202 -0.82368823648920153 -0.18403035587084685 -0.11416702283967378 -0.1611746783883726 -0.051566035775416963 0.41160443370165667 -0.56148944139758861 -0.30884407082463677 -0.17967186119518294 -0.24235645709488865 0.0053928771323473422 0.65163936857820681 -0.58981685138540374 0.11294098443153455 -0.040269704472948607 0.11651229746302498 0.14995404109685603 0.69186753038125037 -0.59098890626800726 0.11569523189413297 -0.075264527257493191 -0.0071875013750581727;-0.031662660247383914 0.046364663881164413 -0.063487630746809465 0.89049925890083703 0.48179385350939091 0.17967436421619989 0.23104616471858661 0.21141624304128651 -0.12233237527422436 0.97643600628681293 0.42346768854567518 0.3917607049246522 0.12352439341108661 -0.15895649978960963 -0.074675536732680695 0.71807469077680752 0.16907039117322142 0.52827373950073686 0.23634210450377499 -0.085501409414250718 0.0043921638606233835 0.27773670220124014 -0.058659134744470598 0.49995961707045372 -0.18906545199251379 -0.53986053875856121 0.40327448835959989 -0.29885512433217737 -0.36357501019914684 0.39895408830772061 -0.28306050784042613 -1.0790718149894507 0.18806879115032044 0.072597910377794089 -0.30431201340440062 -0.20438632676816829 -0.025650641775397682 -0.95092941110627982 -0.17583842054044008 -0.12367106780543252 -0.12803536866128354 0.11357083830904942 -0.09180638424078405 -0.86054211975274386 0.24313206051316869 -0.4926694347181565 -0.24383015939592823 0.022883062077803516 -0.055036515005521411 -0.9677143558241712 0.0025530018158923468 0.16008368767761602 -0.18758741091175704 -0.23679003543204433 -0.22280094280749252 -0.86038628721226318 -0.0032131100927449514 -0.12977573233511897 0.15348350368972133 0.2658301939337821;-0.064630221766700011 -0.088973923511504197 -0.075637636300640507 -0.086921663516130399 0.90653250749080261 -0.14123367707729687 0.14807599206462405 0.42857239763894128 -0.20650175161376599 -0.38973470578063729 1.1783628468000262 0.60645462178703735 0.18718850654222247 0.61189718716316943 0.0063614672048524917 -0.09999155110243893 0.34957412442547853 0.51167899380247639 0.06566521328719474 0.50283004254346275 -0.28120254596478023 -0.35683820043251879 -0.25304581018969241 0.66549036790120641 0.076747197125713346 0.069823957029392009 -0.56275478320466632 -0.16400343142684765 -0.11091154504323604 0.1635237533929014 -0.054237730084550413 0.052932583538479384 -0.6187298560449308 -0.45907979197383203 0.10702261071619085 -0.27108242186831766 0.1805205034714695 -0.6381483249572345 -0.40130903685407332 -0.3885591824060558 -0.79804998929420412 -0.51351498406676066 0.10606297295698884 -0.45692955758834169 -0.67436587597847364 -0.31928738349368085 0.064489995625641242 -0.0085593175818745957 -0.14483520264352415 -0.80317927072734885 -0.27703771560552315 0.074955016087623519 -0.27170164454856721 0.28327206565497159 -0.063637296931254486 -0.67342258986807191 -0.59117375212620027 0.023506397422110699 0.32215467890445204 0.32864877393461067;-0.16008265513041331 0.021209981415132046 -0.24000036501546088 0.30851733635105211 0.32365418630131398 0.44632933283637372 0.27427458073577754 -0.057226095211562855 -0.036850802294304569 0.26367419211682863 0.94852371424573756 -0.098023599181068358 -0.18258000366054447 -0.34492577304660821 -0.6109802327430659 0.2979702915831498 -0.037043872030750949 -0.24233984377919707 0.34959510044783415 0.019875270509686384 0.28526463091861065 0.32079971601203694 0.14747277949515386 -0.72998797467567811 -0.14281716430378705 0.0029234314640608529 0.044008921963306066 -0.013230298641646142 -0.66725435705933989 -0.35357369873645678 -0.49642151740201312 0.41738289531798989 0.29667843011655537 0.29246302672650365 -0.68530612670873148 0.032983709350240142 -0.045941318083131642 0.36862639742904252 0.18542880366913908 0.13404973325051947 -0.038538777132423915 -0.09322491565036764 -0.12064759905098463 0.57040363900268065 -0.0015297392197744161 -0.26179951514754413 -0.30045289805997638 -0.15235226829234719 0.27717674762459049 0.66869907932546913 0.065137841873053687 0.027004622124624202 0.16492359554095065 0.43825377998782522 0.25953781915058516 0.7887790311902888 0.50892371131791203 -0.080436069370920515 -0.16439047730168388 0.193180498158808;-0.042959363165531686 -0.61724577412871606 -0.11910053708973158 -0.11226505098589216 0.25009379977536006 -0.52256375091208918 0.38072223335638811 -0.087866213749963007 0.31957571255085454 0.24979900099596164 0.14160837456259051 -0.056674343629877291 0.31821427636274457 -0.36878108712060409 0.84491456094737838 0.086418853291820155 -0.11602461478781227 0.19078174228844438 -0.055001894333523801 -0.34534939870928127 0.83804878118471882 0.070539342102389144 -0.020227598276338347 0.11430740534220163 0.026856613164661626 0.12707725047094037 1.0856730944491582 0.035721087447588923 -0.22992067121852197 -0.11445855248908678 -0.21657769142932304 0.43488502683574404 0.31439673399110452 -0.20375676856644631 -0.22438697877078245 -0.13551593523714756 -0.16023833624856393 0.27809691999246489 0.34901215807721331 -0.18825856480145853 -0.27025033458553194 0.054386412167370946 0.13812845365856263 0.60127824442260991 0.48200897277895305 -0.22380398120850695 0.053460649899765442 -0.3142554247489116 -0.19109410840469954 0.1779719751043557 0.24832284340140531 -0.36132002374534794 -0.30689348431413083 -0.21572824824005199 -0.022084086315733074 0.22506617687448482 0.50575177503827007 -0.30885448744420962 -0.14730111928300868 0.13089964517699057;0.13824294329413236 -0.072756548613807329 -0.61294393022012061 0.58106873539724635 -0.0096334531516280245 -0.043983261692600632 -0.070477125922413661 0.17736828045457861 -0.37394506549518658 0.98379661731916879 -0.015416200465393 -0.042332175472643785 -0.054564776984779371 -0.21729996210439542 0.47854961889259062 -0.071168641991983222 0.095564005572676761 0.10306863081328629 -0.088556798621657468 -0.10763219624191846 0.72445664400114462 0.31447957963131057 0.47325249395987495 0.31312204837690255 -0.15546136093902369 -0.11185135800475846 0.57862505000840403 -0.36634582765125695 0.21109786585240331 -0.038003843000102816 0.070049100816171619 -0.057924712317616631 0.2931442484693334 -0.54663089178437463 0.55016191231919809 -0.094414986676574844 -0.093317938052240909 0.47886324670459607 0.52288472604993463 -0.5735237434337177 -0.049059528780171148 0.39633878519220733 0.23613665479415566 0.44529969384209228 0.37924107195276818 -0.89828500206486317 0.40391274007638667 0.080298788014372222 0.16469793430452107 0.5984976248405699 0.83173775261385907 -0.27596484275806399 -0.17077480636557191 0.027836208462861972 -0.14152634251954777 0.8469679052819431 0.23502689190627543 -0.30002765423419858 -0.2373306275532403 0.13978185582696318;0.0014311335707920536 -0.13977585284087624 0.19846245051531333 -0.79176229169217294 0.042683458068689811 0.21013072178104131 -0.34925749221162095 -0.059653796037590072 0.11061537553399814 -1.4890392868948745 0.60105810450534036 0.025927905381144607 0.093694475569584795 -0.15491714722453337 0.43745681172622025 -0.56154756034474673 -0.050121491299838034 -0.050369378486945407 -0.089652455227556924 0.11918301077293635 0.27893840565223404 -0.90884612290202371 -0.26243241063645439 -0.32619984072930475 0.10455174855356435 0.28246934166948273 0.86874645171524534 -0.014633029992331965 -0.29106169441355934 -0.094341409997815817 0.13806323380587973 0.48668499355765343 0.46393571264517397 1.2270956323207258 -0.00077671520893673671 -0.068556859864416592 -0.31081599407273824 0.28660204518341503 0.51577717085369224 0.5819178243263563 -0.29088619964427248 -0.067601070248268738 0.099483456548632831 0.36766713529642386 0.59728776674061324 0.77399722380605751 0.0038423111950792784 -0.04030073900888078 -0.03898440853496473 0.026915693109774898 0.13499631801489761 -0.084434793635817157 0.28128432228268496 0.43906030386180672 0.13651900695741812 0.33026718242119235 0.37320465601589436 -0.43126261752600725 0.1346559868991839 0.26810026316762425;-0.067370159573318794 -0.17708399577188691 -0.69950171359758984 -0.94731920807721981 -0.34588107916842104 -0.0059490022925226503 0.20013541715559238 -0.13846114675547536 -0.065433987734600838 -1.089416750973403 -1.2156894197317347 0.17995023456472994 -0.079233043822503263 -0.83925080959379261 0.33739058152276208 -0.41674166873912305 -0.22501623093764267 -0.39483560391257466 0.12336214168407407 -0.48122345843608211 0.45537675099017261 -0.18734316378538832 0.30677720376415635 0.03663385634745199 -0.10736808028766257 -0.14539818727650786 0.36616069242809879 0.35833566524048022 0.50383675552848539 0.056475167574735675 -0.22060951450889141 -0.08241181179368455 0.36688458605097679 0.99397237041159425 0.62777385133351959 0.29882881384397231 -0.22442995629683768 0.28008785378739659 0.17026841809720158 0.92454596052175275 0.58186830719000926 -0.075365344511480525 0.26596856872349894 0.17866801016959225 0.13428210690510156 0.25831631903044616 0.56068022668741546 -0.64307528352049326 0.16502226931704045 0.43551317975642762 0.038262244129880219 0.65252315974141695 0.19253143482692819 0.23431062033543956 -0.025497198617409501 0.083344799282398671 0.30518713692066735 0.27740354109041898 -0.025617722782359152 -0.44093888287554944;0.012708113623002877 0.58410155902390648 1.1253129981134087 0.58275772211625732 -0.090044932638988634 0.28981565201223108 -0.21797561595820208 0.59901659649149319 0.6195244705520041 0.84713770932482724 -0.50691041627437672 0.24686157642061687 -0.12292246331712857 0.50224956504684282 0.14368942255547332 0.021506467584824555 -0.11722715134842006 -0.037259703923925934 -0.0062683987437800667 0.52650324886786604 -0.60952343618494886 -0.0058768308667243949 0.12517086227148649 -0.061968513903408698 0.22397696113360788 0.41949903570816593 -0.63798603082629834 -0.21073317674097702 0.084375936021474779 -0.10028319679521647 0.17838458856380632 -0.34664411338762174 -0.37301103723422474 -0.63296671988911257 0.22790541961470542 0.093903364393004965 0.19727570003755257 -0.49883235761069017 -0.43718000011219066 -0.23133985086326639 0.29335286443069986 -0.061355139104156353 0.17234818494466672 -0.49392624939561125 -0.031606120010973994 -0.055484788237760103 0.15195356896724502 0.3475623608509138 0.11247327538506612 -0.21495161480115374 -0.5850880584838567 0.055343670834257418 0.37001484176849969 0.24354716961096975 -0.38473869948024292 -0.67238085341100806 -0.10487977942564571 -0.12457308448495767 0.32193571043302355 0.25739759516416677;-0.09239161482509016 -0.37162615946968158 -0.4727869246469717 0.05475867832171355 0.026046289679082849 -0.11879539165238905 0.11092552264148844 -0.015764451307426146 -0.35828399427379032 -0.0016373266789177776 -0.50834999032679751 0.78616457223350278 -0.038347930558436348 -0.58437785448395618 -0.043654138732713163 -0.16194377564571341 0.16970931928977404 -0.43831812877784343 -0.037351123861957318 -0.26528559676189573 -0.25685960034940852 0.32279795719068877 0.23183346234580884 0.2643378402088486 -0.064179409985163235 -0.0097787202177847254 -0.021864883319228316 0.3503281464439405 -0.20386211071487928 0.040999894287812956 -0.057489188432574612 0.23544285680795235 -0.41229069927104878 -0.082287690836096411 0.82273696457898526 0.17961876231806581 -0.055542712336296637 0.59738894504936535 0.0064578005345988379 -0.27728351703311616 0.021212635700744081 0.083856118739113916 -0.18271364214001537 0.40943551647263887 0.23897359740411683 -0.30517869875368164 -0.27773436280131353 -0.37569223913963207 0.12583763741696899 0.14727484714937694 -0.2105616975397529 -0.095179357540193729 -0.31579302630660794 -0.2444776412470116 0.23363241639361515 0.091580670609673023 0.1576637464944175 0.10737589057442776 -0.12690184320934594 -0.12310706338077082;0.16999096893213447 -0.34207264906977458 0.024414597771829569 -0.28078108535730179 -0.010350386278350835 -0.036982291901438577 -0.038410910951894639 -0.11235950153574112 0.1043822887985822 0.015574337095390994 -0.1563919015184031 0.00075590712574869282 -0.22357214741415476 0.078986023502851777 -0.10685320250026335 0.33290736563163281 -0.31402482332718312 -0.04585937777119474 0.069000856925756721 -0.13446388956565702 -0.022540802758481457 -0.077097307435610454 0.097039667734390045 0.12271509614454967 -0.19669450511673858 -0.28297725634925569 -0.41490464486007778 0.20754753490002398 0.25884094312490991 0.015885173058288557 -0.0019227504928864356 -0.3153644447723159 -0.67491948685804581 0.22504469997094148 0.039117322598790014 0.30707031081701724 0.17186919653413468 -0.45344165582151508 -0.65774781908513236 0.21267088246314864 0.30267011125260013 -0.21691202324849002 -0.20660751440606928 -0.16224690127268196 -0.33813758145951411 0.28931154299876483 0.26048006792387995 -0.14919081739576312 0.30375975127888466 -0.20287210214536874 -0.01810471421982494 0.23724640065890615 -0.2615121468187992 -0.36204116159367894 -0.0484207743630969 -0.20727724657032071 0.0097874004141275429 -0.2119273971429162 -0.11572638160605965 0.022171406383782098;-0.38697794148374032 0.57045466159856251 0.39003790710049741 0.16828640655264562 -0.65000561335165907 0.13954516744089648 -0.084307972901919617 0.29852511777426843 0.29997204778353742 0.54631444835990939 -0.83395215678402412 0.18403114037619783 -0.27636334292463594 0.14319809211591761 0.0078504430559370956 0.1502989697089418 -0.31140667833440183 -0.085798242777730196 -0.19285130923906868 -0.0023795520167708408 -0.48494663591439313 0.1457443756642815 -0.11320343363417001 0.1132789117285054 -0.1885897375501662 0.21174864901749071 -0.50667582010262047 -0.33753639744066183 0.28779122464213824 -0.027887273913046847 -0.075843071338278251 0.27084422717768358 -0.11386325431051687 0.19289538270206921 0.40176393867004451 0.37931030584124131 -0.24840986865733766 0.43545295805475182 -0.14509676484173045 0.15665068318817588 0.59017226487964547 -0.11770529272134919 -0.33127680145289773 0.4321843948624875 -0.21681911980292862 -0.31086221369951728 0.30442831055088432 0.072414286093266486 -0.049504757517201937 -0.059619609176094365 0.0064195816691740544 -0.10833284986574969 -0.30430035975775932 0.040776575595353221 -0.52885518773051932 0.061441884896432944 -0.2639361939135112 0.34432088815820583 0.024247921665921462 -0.060311946891845478;0.00011318780969970556 -0.020476961900200687 -0.029110546168990607 -0.15423575760028674 -0.086516239724047414 -0.19835479823025809 0.22227620703624798 0.027427029570351088 0.053111201019515816 0.28205251492882699 0.17796809116748882 -0.044719151935124823 0.37061054668413068 0.11712367284232315 -0.12440415027915247 0.17315453240270215 0.13059259652871458 -0.08981990358863684 -0.21085743820484407 -0.04524819513982891 -0.12640507390634492 0.55439831701066 0.16469140410834598 0.14789199298524802 0.30501823313133131 -0.47109838053065578 0.12397333842425023 0.092724075122812818 -0.23890381935763025 -0.15985188081326593 -0.042767380567922411 -0.14524810559731291 -0.17746243154949101 -0.47405185433863473 0.041743959148282092 0.23712912073869602 -0.072877741102677612 -0.55647800039904538 -0.2035648564574942 0.20810819919115689 -0.42294668629733528 0.054446739396708202 0.089758775406972066 -0.35766704531803084 0.30604588905533925 -0.46286781200688681 -0.17011160266123951 0.072727826112538238 0.063968576960274359 -0.60191894816389513 0.30665671161703478 -0.39330874848419012 -0.19158491567747568 -0.28190441307330849 -0.31469646648696337 -0.3842158017777802 0.039719171259493494 0.377031081608309 -0.10289702753808892 -0.25106824680440037];

% Layer 2
b2 = [-0.068353729351016454;-0.13435207494203205;0.55289657568239026;0.1712752111745221;-0.050032131125680737;0.19462653828083029;-1.0115705234726997;-0.13217518633875244;-0.62712639983491258];
LW2_1 = [-0.66469764891029293 -1.1987216636474836 0.027276793808508112 -1.2422311370485744 0.86325359897997567 -0.67134540124088304 0.12714705857999811 -1.3110169517806167 -0.8481388437899956 0.46987944501719658 -0.28911401883139509 0.74824105985637768 1.0736151873750341 0.89088567277516595 -0.5050471442049389 0.72556490517171768 0.44656456032832664 0.14618290673223527 0.55064145218186211 -0.49160937632681551;1.4305409720913183 -1.098300962952611 -0.53986355105322537 -0.60652815318764275 -1.0590426880614991 0.62227945204731883 0.01699349897241436 1.6506301220344544 -1.4614749105562932 0.7169815429529196 0.058011376202579679 0.046891887707845005 -0.97212887810770865 1.1847389782537616 0.8508488561807882 -1.1673293827904525 0.95405741810332545 0.62972660487528753 -0.78446140412064547 -0.16349649003101263;-0.87292737622735983 0.72913177133818274 -0.42706599961001401 0.046112355712903709 -0.68331228760684926 -0.064757656510460365 -1.530230044725841 0.69585167520928426 0.43147691066913391 0.93005525810606093 -0.048339329873564534 0.74364881756851209 1.8187203796192701 -2.4001551089019162 -1.5158919218558844 0.6874008648627673 1.0717356658633337 0.56581392602533598 0.068768557478531819 0.559671363846168;1.3091009532854636 1.5708177667040319 -0.90836946640522764 1.0941193243995959 1.6177377803456239 -0.80983858565654887 0.23649198123867976 -0.78848842027834265 0.36772853067152733 -0.83297491252809253 -1.2627665021485706 1.1934989168624968 0.36933173420793303 -0.45799922941222654 1.1930251257726705 -0.029063327754846838 0.31264737389076191 1.114595231728895 0.49912176184052326 -0.17687247772270223;-0.33522760915531041 -0.74744141061659208 0.22026443766614731 -0.9944990324634797 -1.2884382597817232 0.74141545257450892 1.7581534840821316 0.089108276204063475 1.4429095830790915 1.1919078970140717 0.94531794418133763 1.0175721507568694 0.25154985024604326 -0.42814530690841934 -1.6749526142051632 -0.44951179902241639 -0.0069161818561282087 0.31223534981709139 -1.2230958545276844 0.58038673283902387;1.1150388912333735 1.0627910334850268 0.35910610129592407 0.45820042150618434 -0.23744146307679381 -0.93984185985780488 -1.0077710708218226 1.0741967968381256 -0.47684192959319549 -2.1699068429148953 1.6599670313528032 0.41076957644452483 0.17989924745399305 0.10661301948234991 1.1029261284709198 -0.56112940757214902 1.059908264100762 0.21390958719215111 0.47402411688352308 -0.20230973371446523;-0.35565008244814145 -0.3956775478317423 -0.87186259195547577 2.0657021129518376 1.2734585180452389 1.0986631882634312 0.63742537523453702 -1.1890233989674099 1.3079068372897795 0.34073118947501624 -0.15645839945023474 -0.66875992337577861 -1.0687472313467734 -0.35030945147873943 0.020744015559196381 1.1537168346887001 0.13833436315554462 0.74618653022261039 0.48753599658337321 1.3250944194255772;0.81075566146887801 0.79678423341298743 -0.51339588851724172 -1.4100330631107663 1.5321391489183049 -1.5658199109867978 0.76581595372981426 1.5159137652372305 -0.67566418262714856 -0.57819428533813266 0.8182062814742469 -0.6295988170756458 -1.0225170870570077 -1.111977973246326 -1.6484583569970155 0.66980470385409219 -0.7364974110135396 -0.20884734770451702 0.72214122778655543 0.34515830726282359;-1.4239931811493833 -0.75092882571992936 0.0797377350091142 0.42784476659172299 -0.31371095636129692 0.28400430856244496 -1.0449921169434579 -1.5103725909169787 0.031356208863737155 -1.4999396762082584 1.0939359511765845 0.52275091338529545 0.23583969580742303 0.86780883898644601 0.39918252670999504 -1.8192200626214665 -0.72060173230329561 -1.1750009112752977 -0.71214949497246249 -0.51857707113620555];

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX, X = {X}; end;

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
    Q = size(X{1},1); % samples/series
else
    Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS
    
    % Input 1
    X{1,ts} = X{1,ts}';
    Xp1 = mapminmax_apply(X{1,ts},x1_step1);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = softmax_apply(repmat(b2,1,Q) + LW2_1*a1);
    
    % Output 1
    Y{1,ts} = a2;
    Y{1,ts} = Y{1,ts}';
end

% Final Delay States
Xf = cell(1,0);
Af = cell(2,0);

% Format Output Arguments
if ~isCellX, Y = cell2mat(Y); end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings)
y = bsxfun(@minus,x,settings.xoffset);
y = bsxfun(@times,y,settings.gain);
y = bsxfun(@plus,y,settings.ymin);
end

% Competitive Soft Transfer Function
function a = softmax_apply(n,~)
if isa(n,'gpuArray')
    a = iSoftmaxApplyGPU(n);
else
    a = iSoftmaxApplyCPU(n);
end
end
function a = iSoftmaxApplyCPU(n)
nmax = max(n,[],1);
n = bsxfun(@minus,n,nmax);
numerator = exp(n);
denominator = sum(numerator,1);
denominator(denominator == 0) = 1;
a = bsxfun(@rdivide,numerator,denominator);
end
function a = iSoftmaxApplyGPU(n)
nmax = max(n,[],1);
numerator = arrayfun(@iSoftmaxApplyGPUHelper1,n,nmax);
denominator = sum(numerator,1);
a = arrayfun(@iSoftmaxApplyGPUHelper2,numerator,denominator);
end
function numerator = iSoftmaxApplyGPUHelper1(n,nmax)
numerator = exp(n - nmax);
end
function a = iSoftmaxApplyGPUHelper2(numerator,denominator)
if (denominator == 0)
    a = numerator;
else
    a = numerator ./ denominator;
end
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n,~)
a = 2 ./ (1 + exp(-2*n)) - 1;
end
