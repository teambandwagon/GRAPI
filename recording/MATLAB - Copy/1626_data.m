function [Y,Xf,Af] = myNeuralNetworkFunction(X,~,~)
%MYNEURALNETWORKFUNCTION neural network simulation function.
%
% Generated by Neural Network Toolbox function genFunction, 11-Oct-2016 16:00:40.
%
% [Y] = myNeuralNetworkFunction(X,~,~) takes these arguments:
%
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = Qx60 matrix, input #1 at timestep ts.
%
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = Qx9 matrix, output #1 at timestep ts.
%
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1.xoffset = [0.3125;-87.5625;-179.8125;-17.51;-14.7;-13.99;0.75;-84.3125;-179.875;-25.16;-21.43;-28.18;0;-84.1875;-179.8125;-25.58;-20;-35.66;0.6875;-86.75;-179.9375;-19.38;-27.38;-42.33;0.0625;-87.625;-179.9375;-16.06;-26.34;-44.65;0.25;-87.375;-177.5625;-14.61;-25.72;-42.46;0;-87.8125;-170.875;-11.72;-28.91;-43.54;0.125;-86.125;-177;-13.09;-26.19;-35.77;0.5625;-87.8125;-165.8125;-10.51;-17.61;-25.88;0.1875;-87.0625;-178.1875;-5.17;-8.34;-7.99];
x1_step1.gain = [0.00556328233657858;0.0127490039840637;0.00556521739130435;0.0576535024502739;0.0806776926179911;0.0590667454223272;0.00556909154194222;0.0128102481985588;0.00556134862704206;0.0374321542204754;0.0375304935259899;0.0336870473303015;0.00556038227628149;0.0127186009538951;0.00555941626129256;0.0336530371866061;0.0537923614846692;0.0303536196691455;0.00557200069650009;0.0125293657008614;0.00556328233657858;0.0416927246195539;0.0334280461307037;0.0276204944068499;0.00555941626129256;0.0125097732603597;0.00556038227628149;0.042256496936404;0.0459136822773186;0.0259437021662991;0.00556618542355192;0.0125638005496663;0.00561699139898192;0.0351802990325418;0.0439463854098;0.027311211252219;0.00557394182198223;0.0125539427226363;0.00571020699500357;0.0367849917233769;0.0355808574986657;0.0270160745643658;0.00559342772242615;0.0126532226176354;0.00562884784520668;0.0382409177820268;0.0401929260450161;0.0299625468164794;0.00556909154194222;0.0125146656237779;0.00580446218030111;0.0363438124659277;0.0485201358563804;0.0345901072293324;0.00557200069650009;0.0125934671389217;0.00561502017897877;0.0446229361892012;0.0527704485488127;0.0518806744487678];
x1_step1.ymin = -1;

% Layer 1
b1 = [-1.9558742989458204;-1.7559705285236684;0.27722232865676733;0.69037220160821899;0.59271018510508888;-2.241755525119268;-1.4169353736232217;-0.30698990853567004;0.70606494172340106;-0.093418398125368257;-0.33597347135331435;-0.40506037681215351;-0.5348638514488705;0.27732622054468736;1.4337117779974111;-0.16352936018913081;2.1542436699759477;-1.4921057175749171;2.185104352329716;-1.0839199168432931];
IW1_1 = [0.38390853584417772 0.43209085725728258 0.30289754829034055 0.22261604935867965 -0.09159776400286454 1.1119435885175659 0.14219137675805002 0.64966408230389616 0.33438236077363315 0.48746198468485508 0.78887407198160087 1.554995414342599 0.25074366617088473 0.12237772910991884 0.5070006232405041 -0.46958127781091086 0.44257715571625195 1.3690045498016952 0.0058271320622740111 0.14074914768311139 0.20150807002900517 -0.1953922934513799 0.50577387792449069 0.29570687616702951 -0.26444233101230702 0.5815422612557356 0.24581936008025179 -0.17647177213980864 0.28618892603146306 -0.40300073363007988 -0.36340702974577904 0.74504806179305183 -0.045120317254184861 -0.71223188299670903 0.39969241649508097 -0.87540843364433307 -0.4050165776858527 0.3527088369186237 -0.35577214923010086 -0.37152854397463053 0.27950145358631251 -0.60219333898169602 -0.057822877734072756 -0.14997800473015691 -0.41523881981993677 -0.38721393606491761 -0.40593468898733731 -0.68223229164177834 0.1504155368113729 -0.78882020315710477 -0.7049319644374239 -1.3329802084098463 -0.10553452225424122 -0.65789063923881697 -0.31753845065614072 -0.68800478315650493 -0.70957050750140593 -0.71626723856907282 0.079190192493301947 -0.50868552238071196;0.064418918316708679 -1.2001308821259042 0.34361669922744953 -0.17066641891980419 -0.44458959316316571 0.36946830734534442 -0.18672890011721252 -1.4781353198808538 -0.17653203318120325 -0.99964126037934542 -1.627635831653242 0.34772099213025326 0.047069195798134685 -1.1885898475742294 0.94350756581247885 0.015008304485039484 -0.033804576232708251 1.1051752475272676 0.15428173712064033 -0.4976578765499472 0.7920936530837398 -1.8545792344656447 0.60655633773321715 0.30576304258566345 0.2071979017555117 -0.26238677723973947 -0.57714110630951809 -0.87511665017831441 0.85782114860090852 0.5419938511584691 0.035889689657392469 0.077981680419611454 0.5496968059780416 -0.62732768159076624 1.0711161043835316 0.35007413209161981 -0.67131013608234413 -0.77056421637563666 -0.37145860521721147 -0.90073212353725118 0.60347706317775729 0.21490332907796802 -0.046211101703104787 -0.57224004904761416 -0.0089605519390805362 -1.192207461755493 1.0590183277998042 0.32807859635728182 0.0062595287588196949 -0.23189530016801688 -0.035793883779089444 -0.52770699742012306 0.62477504263482397 0.44409733697947157 0.47475789977920979 -0.02512815777728062 0.54549009009260208 0.21643173879717031 0.19848986912342709 0.59809963978815306;-0.30345555350209458 0.59071886986905286 0.024171412893562408 -0.94035449827708317 0.59654471909910567 0.89657734662540722 -0.45318819743902222 0.56638395991812385 -0.030116584721443827 -0.74839356569861648 1.1069942352244972 0.22985087299288567 0.42107668166961193 0.47521909467158807 -0.032583292951667966 -1.2745815817833801 0.55589966982037697 0.78397856311274605 0.098692206430387008 0.24518284433871046 -0.025481853547760943 -1.3569768008919081 0.5431353771609525 -0.018150105631474938 0.30179493887892039 0.10744396232500476 0.24917307875860098 -1.1489977785474974 0.05139344691979339 -0.28522036643920767 0.23404840740712474 -0.036846112431281976 0.16235186112635505 -0.79086251683587672 -0.29450660491302116 -0.51889195790534937 0.1965237698032381 -0.0051401245761548437 -0.41643387666666604 -0.12438854198682599 0.021170055508300839 -0.8024211208117964 -0.10724643578104257 -0.74688868740081893 -0.14244925440422898 -0.1350736938099458 -0.5097004217264216 -0.39310153375850776 0.0048801309522792536 -0.9895647095014537 0.10454427287685866 -0.049323571281270198 -0.41936150870781314 -0.055008908529855981 -0.23124496588668503 -0.87397379063193037 -0.12930205677541073 0.59233478764035208 0.096168670064387604 0.20628972945992127;-0.28048587823767823 0.18377868674576528 -2.292996410832965 1.3040348702872024 0.91654069757935497 -0.55054583789198741 -0.39998479064555342 -0.45854900790902625 -1.0581389136871548 1.8157861271156706 1.8775223631608173 -0.91030075931738974 0.38205655688131313 -0.54010140013462804 -1.0221420985075433 0.47219795259771247 1.387373571919702 -1.2685901951512797 0.094456442689060588 -0.51400911322914566 0.085683633050780764 2.4578423343881175 0.62857023894284436 -0.51073004645977627 0.4056895983192465 -0.32093003154796546 0.32806222759510106 1.1174263489343255 0.012991652096607232 -0.11150934963633943 -0.45278234125340194 -0.31135841447584278 0.99625378315416235 1.1565454858042847 -1.0587903146528608 -0.18392982677826444 0.0034464974203233644 0.0075847946441329889 1.3344000181918989 0.084903364433806486 -1.3516393303318366 0.12474170420772994 -0.65312090766507092 0.37198252063592907 1.1799358465095933 0.082535735527122206 -2.1812877856867088 0.24721428217861113 0.13068324460241848 0.07535116008664855 2.1865903997330931 -0.26047986391165978 -2.5005973731186537 0.51880108864346153 0.61616612462689213 0.9617917901903732 1.4376717304537667 -0.24062080375001638 -0.71090309655840989 0.53551548506366076;0.049377658680568134 -0.6281127043143574 0.73186836273712197 -0.11782186486229182 -0.17299440782121173 -0.44892839865870127 0.53421275469901042 -0.73846083587677824 0.42075782401677242 -0.017440807248611391 0.10798180440890252 -0.59963787003978442 0.1301990569722174 -0.26942522070545488 0.22672015813398036 -0.089568787960073781 0.24165963892819423 -0.21029210098112572 0.081106047463685244 -0.27085961090095206 0.14211577820141985 -0.51141170557561744 0.075759588806084771 0.12282735627154366 0.059747985787883422 -0.21274058165679546 -0.0057565018772052553 0.086343351352785938 0.30954231538338045 0.17315182276794705 0.083717438485945261 0.13316913516658424 0.14274018354098544 0.074909934259235242 -0.50196205686076845 0.62007675313585353 -0.15931076489031787 0.24424036030773799 -0.1177905038613964 0.14416230996213952 -0.081072140210421445 0.44889817966357787 -0.27393076584659803 0.27447613234684903 0.013295567783522196 0.24001287265028926 -0.23342554938286608 0.41958583213033945 -0.013531327364309266 0.63887741051472868 -0.25128836277061872 0.78457799320684141 -0.03547903279329228 -0.10656473340913317 -0.17820067603278919 0.33527143531250203 0.1453317421527438 0.17158025637102955 -0.10626115045197608 0.36014649197344212;-0.29745182652044455 -0.47956829509551768 -1.2393033420271586 2.6368895634025318 -0.40858492488100978 -0.034139317877613616 0.078074970453405654 -0.035303716263082215 -0.93224301911146412 2.1336688437809261 0.45309692824110842 0.070150578653821294 -0.10300308153483777 0.2262529036557672 -0.72501914235681297 1.3361627161547724 0.24442964174721357 0.26044773758258893 0.026430658416225904 0.10364396667230823 -0.60161207628381952 -0.021874365662108729 0.020863174079875653 -0.11351219455556405 0.47377810500366718 0.14513452580630512 0.40370647593981629 0.070830571812424123 -0.021092203883178059 -0.22914897530198544 0.081786072093932211 0.23081803412402269 0.34729774292079096 -0.4686441748874563 0.48218470735536861 -0.66672375212644674 0.30243191243328288 -0.080955448556237167 0.68077158460589393 -1.2597958066717148 0.22004551061196564 -0.59934745361034103 0.15477709801030579 -0.27651766848396531 0.76187046482006904 -1.7178215420970053 -0.20437262919503232 -0.18044239691883215 -0.16476708279484184 -1.088499259988817 0.61790795704730284 -1.7064604659138038 -0.15455670923585815 0.6055771510538196 -0.19950784500414043 -1.7002383713358211 0.48387606525333077 -1.1635188234263698 0.71741155237750331 0.11793519003080014;-0.26954390200680656 0.45412455328560164 0.52873731230351151 0.41538756118519654 -0.14710058973724094 -0.083348189314536775 -0.32538560517452264 1.0000812594020285 1.0476714226144379 0.27108885726429793 0.29514416196640536 -0.25285786446420849 0.017284949463577632 0.85420687774538406 1.1288777556069456 0.20521242629860459 0.25693322201493984 0.092675105326339852 -0.080854739669141862 0.25946727657939284 0.74399753787327316 0.0087550144099617089 0.39393425488883943 0.29131925801554265 0.13597629417344673 -0.077694579952828996 -0.020092181057750534 -0.21575125087812402 -0.46448970978549492 0.38648415960095961 -0.04234738646595046 -0.6008047623571332 -0.89654522926554125 -0.15212602071696546 -0.17652613792160779 -0.58917982414341918 -0.35348490272137678 -1.0111506076205403 -0.55607199988002687 -0.8859605041775982 -0.30787409629899193 -0.69585760111773265 0.19344156786875313 -0.86594239759001623 -0.91202384586903584 -0.39058272925830517 -0.65298195047653407 -0.25368944207353478 -0.092138029356623879 -0.74804630218634693 -1.0713597972857087 -0.21917112209619649 -0.54050754938022239 0.20894647775918021 0.44147608276141365 -0.59025926463717204 -0.69223436005949479 0.090040987538829734 -0.32232013740249094 0.56106207700074129;0.080654282899230947 -0.2095043355113097 -1.5083791194568414 0.90022456402984319 0.3311060102407879 -0.20977072144860875 -0.36794103903122305 -0.33931067668940518 -1.587071165166464 0.93278553880422055 0.13581530502344638 -0.012908721400905151 -0.096007939440256179 -0.15198086873569702 -1.0136909742751776 1.0808384454101605 0.44994130591111592 -0.26428232744629665 0.0036984998022482141 0.67641443689431857 -1.0926594079909213 0.85440172400326908 0.068516270130317206 0.0015619587492544213 -0.063491775795411098 0.69464831748518996 -0.35917277306399964 0.085901471979703339 0.5786515035806703 0.56906838369660528 0.24777930238584031 0.67269914307404433 0.73141287912637498 -0.62596007403494414 0.12931520435848648 0.267531155429652 -0.00080910165826035118 0.1658784549798642 1.365555688352974 -0.76341256122577472 0.022111879608012013 -0.16337596467122709 0.11588757949871885 -0.022045665783232977 1.4991287679893934 -0.725083446964916 -0.267122847319408 -0.046882463763760429 -0.16784876585120709 -0.44807228161790602 1.7624807729413268 -0.19842492232593129 0.43091925015585381 0.079557885652118188 -0.093696299858369192 -0.29262609632234393 1.7204807342470132 -0.58881068271714898 0.095820409672344231 -0.21082339346564011;-0.15919244172425256 -0.0092727123916885399 -1.3250788716498951 -1.1074629527925763 0.041199500129593433 -0.4660072370324691 -0.37575268764635422 -0.16004168564238946 -1.6662174521080828 -1.181187461188077 -0.43189049460429679 -0.53760574353181445 -0.12926519428004171 -0.45522842676430297 -1.0618803663774379 -1.0687609000663432 -1.1091065932355497 -0.10593749786784443 0.12549361467409231 -0.40717892532645872 -0.014755741334529046 -0.79838625367195648 -0.67404371244337558 -0.059687215642291555 0.40989491655161425 -0.18143160990848875 0.062509773985508818 -0.31983726514018246 0.23623441724633648 0.10756926303111747 -0.11904017816608975 0.065643714621677451 0.097361858660627909 0.5898273384899857 0.73512476234494184 0.73197765653623648 -0.30148903246603437 0.10921001723661899 0.99777417427570603 0.30036013831751085 0.069021072246226903 0.1737892968658547 0.092701052446702278 0.32841949526026543 0.59440653292329604 0.20545872713430777 0.36844841294897901 0.22180745319462875 -0.13244193209795874 1.1997570753924622 1.3675330190716382 1.3895938215665289 0.3507112719560827 -0.021336581254281711 0.13086904189712611 1.6897751646961887 0.98603889131117672 0.70606728818080677 0.063681762375223383 0.50255338918120684;0.50987206483304404 -0.83905615826158986 -0.36654914318011106 -1.7228741103259704 0.010933410460267443 0.56247434428641219 0.22021925105662257 -0.4621841543737889 -0.047643918838370734 -1.8082983755714839 -0.39792612247834147 0.73383634844462464 0.13378301647669702 -0.52884372282266578 0.16765938981018524 -0.42288624243994932 -0.057813008686689475 1.1681160396288135 -0.15727058074421618 -0.10549189331803159 0.13635858159386438 -1.3281202325004182 0.39245646861039202 0.16897421178606628 -0.3706559157484362 -0.10068777108749016 0.94374005093584834 -0.53790527532598409 0.64725414186230812 0.08697801217862379 -0.069792312506877258 -0.23631046755018009 0.70095940662081735 -0.18521589429948815 0.31395060695698979 -0.21471860149920924 -0.30908187696480033 -0.13801039753223523 0.80579275031547704 -0.071986914174726038 0.59874032735312288 -0.26830077196729391 0.40808735975450317 -0.5189411993995755 0.87482980454319892 -0.11165476194683996 1.1701150311885409 -0.0030900408692422689 0.14557646114140066 -1.1521772225081028 0.67747606944553918 0.083464186181693364 1.025476822863068 -0.60888083930080483 -0.26559603296238565 -1.0808492487839778 1.0629293488822726 0.41096295503110369 0.45119096591004376 -0.26240900458796584;-0.21040029896221205 0.6725969809744925 0.11727422475505954 -0.14942402013713729 -0.30654924491156299 0.76398089236312561 -0.12458834868252416 0.40392949447711268 -0.1664762601468715 0.36066256531666752 0.19517550649543644 0.77510860231574408 0.24937218114366483 0.45242780304256325 -0.10639772284991558 0.26135698365441268 0.35372297086003629 0.54804009403326459 0.038142240896650498 0.07926222896343911 0.26385637595140315 -0.32649956728095497 0.16342609400889796 0.36410138814315157 0.25467927771162302 -0.1182159769474365 -0.15767895946894708 -0.98597842672316205 -0.10271924916328849 0.45578442385619966 -0.23411096816038632 -0.62585245017104874 0.37787165909945963 -0.36445415011911436 0.040563089293132057 0.22780979179887886 -0.36570827517530585 -0.25293967631027925 -0.37475932309980609 0.11437159039682826 -0.11082133116669111 -0.35027842588717362 -0.12528236934174505 -0.73194278891041908 -0.57133798047410567 0.22627396699362584 -0.061061685664872217 -0.052382521481669844 0.052515925120732838 -0.07877691437226117 -0.071083201296896992 0.7956425782500397 -0.47573145835134917 -0.010591788028598167 0.16688270962891252 -0.15736806362726349 -0.10019943035628309 0.46868703764810732 -0.0071218308849728268 0.089654121986858418;-0.25128734562291827 -0.35743187982861302 0.51721738962634123 0.72470679968484264 -0.6729737853338269 -0.022473365054245992 -0.14584604460948924 -0.20036308074704606 0.2064472556101643 0.55424675257631961 -0.56095853474097856 -0.35244404132462664 -0.38490601412068726 0.14188689221296913 0.19151627639000876 0.22807073103857886 -0.70410770837830161 -0.31428481721165064 -0.21018921118737566 0.68329612863379374 -0.23518310880519888 -0.12257258880685293 -0.19323273609903982 0.52980121272067904 -0.6184288026222271 0.84790511498059107 0.1353999649715581 -0.47416177572907303 0.22915812688167733 0.5452292640110673 -0.15816814845340244 0.16389408518869977 -0.15406824527254556 -0.48543411851618545 0.9263309581093806 -0.11249000725424615 0.082921763531667428 0.0979991710815213 0.27063503733449051 -0.92588608877388345 0.4007977792171758 -0.075706015119538173 -0.13699526344091509 -0.3576067332462608 -0.16340052808153538 -0.5638531477562283 0.84637114854211581 -0.1221146965735127 -0.047677600860363059 -0.51876601751871332 -0.56227843014002765 -0.11469148103270328 0.97993491518383669 -0.033201276213734573 -0.67193057335500095 -0.66862868208150883 -0.13844812502841189 -0.0014166183521565996 0.47838147935084457 -0.097482561021431588;-0.63949308788814219 0.22447649899261771 0.57926178556721952 -1.5065162340084446 0.14592176084884129 0.74958457852135552 -0.77373522835248687 -0.09327851696465389 0.12255366283925589 -1.7985506172400827 0.37207288382181197 0.56890353630465351 -0.078512966578340379 0.20645914169586935 -0.027623882629731134 -1.0450915513213155 0.76444517661504907 0.72838868677814284 0.063121594905520981 -0.095320799379416662 0.1346025445698622 -1.2101871984646442 0.53741647698896056 0.22910708282528319 0.29991348462577683 0.058753293494177086 -0.24515542171583865 -0.27582092059230601 0.45675996739729929 -0.28175289371690465 -0.11744371965610667 -0.17164720758275451 -0.1917575367147607 -0.40645436361468673 0.10990040832134634 -0.10380376911715888 -0.11329664539970993 0.22298033740639461 -0.22252030189834543 0.0031778804195765308 0.25139316733058159 0.092744980247243064 0.34482760970634974 0.39078755444637181 -0.25847191225838928 0.085142875212889199 -0.43338660204483964 -0.031311425482515802 0.39353263583993231 0.31730028715124475 -0.13851406172742151 0.0870610368124832 -0.87491465498519405 -0.11543850582742211 0.51644830380375017 0.043734488637589386 -0.17179633646591994 0.03236667255051956 -0.13015577589914951 0.43590824323948907;0.33366439903212353 0.52766588457121266 0.28497157470168344 0.90403841884500924 -0.95054086302582863 0.31701262378518436 -0.12909987090690178 0.40588628642393887 -0.050216641163491796 1.0362171376699374 -0.88099152786474255 1.6033471343789578 -0.68112722042358276 0.40536844744346845 -0.54616685273084609 1.534510560712834 -0.9880958324317124 1.0040464452397495 0.1838392336682407 0.5759403706284254 -0.13838993511409961 1.5576710722208511 -0.78664940747303236 1.0969364149556007 -0.30515692786286719 0.096266522791778719 -0.29190939205313532 1.5978481734061851 0.088968752368861925 0.086718485322544309 -0.21296959203633981 0.039810789154492307 -0.23616885462233117 1.0486048982955809 0.60735416718848401 -0.61838221494768542 0.045358047477418909 -0.81236620945766991 -0.37296535369938183 0.65095940765654436 1.0553071516254968 -0.81914382559926413 0.30478690012181181 -0.90914037486538402 0.25194562246445895 -0.11660928694180779 0.99938214196966779 -0.84521058230753521 0.25434692261647385 -0.48365607263899563 -0.19596211287401386 -0.32362183902459296 0.51931193155482169 -0.63931988062342215 0.15981958562899079 -0.47221944745852296 0.02122292646036893 -0.3090391487889334 -0.18501510525508427 -0.43289629516742267;0.89023599861276781 -0.15686606229011091 -1.3980131918256991 -0.12988126309287612 -0.21583959605401254 -0.83112378313372126 0.45544942699981161 -0.2167672113405307 -1.4871889865814505 -0.20440104754122559 -1.163014896580105 0.13040228380079694 1.3667854857116781 -0.40203990660448374 -0.92338466660864282 0.45393693731041812 -0.91876420119245095 -0.33668461604408945 0.42784313531633678 -0.38510576716864148 -0.37557892688313071 0.61987903972754832 -0.50649998347074277 0.1409075111892106 0.16794441856166206 -0.41056872237208297 0.6332446126940815 0.084335449770081089 0.13491796478728538 0.47949119908479526 -0.15264459922221876 -0.3593693491684215 0.95450899966032132 0.46697102637231525 0.41298041333288521 0.13226471365028319 -0.26477492763931409 -0.63571563635270456 0.30445820447422545 0.48146960754575197 0.21243711318937303 -0.17220042990194659 -0.99941194799223687 0.060077227519108933 0.64187945429781268 1.0212918852908344 0.6051505818617674 0.20313416990689101 -1.27598079220773 0.30715743885606273 0.41842991764823662 0.8202856101527185 0.6935788212231212 -0.2980815380054177 -1.0600569274675007 0.94200559999360856 0.78579942281431869 0.28485861811833996 -0.007910080488097845 -0.097274630489408181;-0.28936252867197748 -0.63590607675098754 -0.095350489796373492 -0.20642448601194419 0.036364552219877173 -0.093440459320024788 -0.07470685459765547 -0.47831612592946315 -0.50334580806806795 -0.88338493243897132 -0.70378406149946104 -0.3430081861797431 -0.21983018409812252 -0.1515804346979403 -0.61089946387790828 -0.4081334287568234 -0.58883741109230292 -0.13719140260258567 -0.28589555570843361 -0.092823721487854352 -0.07175386185100574 -0.46341595676200231 -0.03361685733404253 -0.50066037829447374 -0.066451676068494087 -0.11686793005812182 -0.64823409683586597 0.066582608832359641 0.54401363226323873 0.035296947686051218 -0.094614409187192897 -0.35417802484486122 -0.027842370248853311 0.18381185231424163 0.16885334934542853 0.023175204255133787 0.090061980401935735 -0.18600810883931743 -0.27607676529060271 0.188318683079258 0.24510909451248572 0.58103500239428763 -0.17655492745752602 0.17673837729452896 -0.19362474302085786 0.5470278539405532 0.7909578703500143 0.37748438412436697 0.17249537987853544 0.57312466718027244 0.028254752605490759 0.21437706436194126 0.48967928618523171 0.26144815892539452 -0.54233618860568134 0.78751042302764851 -0.42778018398581613 0.20181002070797438 0.56221928990736947 -0.058731946602452442;-0.065450955390418869 -0.41466351001617013 -0.56315307710487128 -2.5893123193765955 1.032427697120273 0.75540167175394279 -0.37439213165882002 -0.37416448557224935 -0.39851497298956934 -2.4486739268655198 1.4875593483092642 0.60929486659339438 0.75951997795324333 -0.88120024432652078 0.24553065016485937 -1.6735655356971322 1.6721818534581523 0.10031012600509459 -0.66859715144272791 -0.051586141343007347 0.51035166409861088 -0.66844170283547344 0.71247440369411708 0.118019412146397 0.24310695213980441 -0.31094383295026462 0.61361149121636349 -0.3067378335088054 0.45236800475613981 0.51900819729890468 0.22833816656253761 -0.29066710820406688 0.029985102179177232 0.092199545373229858 -0.72978058911697363 -0.10572921687350083 0.42987998598103383 -0.53070449338428816 0.24981732931613734 0.77801153691238578 -0.76960631810344426 -0.20993008517597719 -0.19044148740796421 -0.70587247744037618 0.1039771195969349 1.5809131666554856 -1.0108415087592342 -0.77936816496659811 -0.270621679969625 -0.61845793493070933 0.66888181640423738 1.389586617213876 -1.3617780150641654 -0.75336050297752333 -0.10495207652695411 -0.24410616132534932 0.1644193093989316 0.57930032694807754 -0.77956192671619873 0.29761401195881365;0.037336177129408031 -0.057406298667611204 -0.9355153251655568 0.23748942621087057 0.20580958214738493 -0.11048514532332918 0.32473787104058355 0.20372005408251059 -0.5552025553762826 0.20327924497814609 1.0056356587434667 -0.50167435762283741 0.40429388636312924 -0.18311517238993419 -0.077347117915985669 -0.30185048863017244 0.24652308065728129 -0.50060657879611969 0.094739661252160837 -0.25676594457474922 -0.46951882736995415 0.46580889280263094 0.32637461441942572 -0.81929990752618453 -0.16955549741344741 -0.27015891683948945 -0.11105568551530397 0.40607960462269782 0.41989554572596949 -0.40250927761584177 -0.21332813221143079 -0.038106284537172304 -0.26547138305185436 0.10441842625427157 0.27168609276587302 0.18479342528314693 -0.4591784778132304 -0.07378830326234416 -0.48392101966514151 -0.88902899630784304 -0.10828095569575992 0.056769952876104965 -0.095368092273902888 -0.33727955343957733 -0.20687692497857818 -1.1208896313992849 -0.56950363181080332 0.48413007305761874 0.15587551661603161 -0.75195867331716559 -0.11980646442304137 -0.75461889977404728 -0.94472356715599015 0.62072829212966052 -0.26142367527658228 -0.84106101444932369 -0.034861882434688837 -0.4092334321898311 -0.85947339762369723 -0.2016135865913401;0.45127317922748128 0.17475605693143387 0.03946044617453582 -0.78630360559991697 -0.24574882409504722 -0.16547005914270105 -0.085839883150188936 0.17233250276903753 0.38981719543148047 -0.26255266119627735 -0.99574228142738763 0.31182836651837559 -0.75696161395282868 -0.39995817884787371 0.23337146580374254 0.55193061980010905 -0.4908726953026562 -0.0011512680059097891 0.052928938485122 -0.40343596958773137 -0.37285683730615971 0.88742756293896363 -0.41992525344898779 0.36527697819550342 0.14674563031953608 -0.04729828588539689 -0.037079941655074292 0.70958193414330095 -0.0079854470426334173 0.19316131495560054 -0.076301837053698016 -0.25033503972741794 0.0062822541002580945 0.29318194965350602 -0.09655226681940493 -0.21706788603946325 0.62141843009235931 -0.15643049540842324 0.23009935222056777 0.65871541282636481 0.08659645128786593 -0.50806621539175933 0.44733676436611708 -0.1017446234966595 0.15582108356890834 1.2865738133875175 0.53266506267930025 -0.24560059706653858 -0.13963386405272968 -0.16873825254468716 -0.46497162398332836 0.86445287372711543 1.0038397100912995 -0.7162888382437953 -0.31297263728288521 0.40565647518284942 -0.29920508910973936 0.49441731273707273 0.26811923431942902 -0.80648411792676566;0.095519891633285739 0.64165997605763359 0.55281013103785159 0.61007718006592515 0.013314223850486107 0.11759031739940617 0.037894066245757578 0.32467704983476547 0.49017412094372997 0.38969854678009075 0.18886959647185511 0.65876282113531015 0.29923433522323617 0.23817107184453543 0.55654322193452443 0.55613025645354286 -0.34103275827401996 0.27043589467030194 0.0942167659099893 -0.10207960476551528 0.35532268438107306 0.91332512089812556 -0.36044094355258011 0.60058513481061682 -0.15705425640867701 -0.37728564656870245 0.19501065927218378 0.96294715336098735 0.084011337727836907 0.29096352340264725 -0.087203825465198906 -0.9581412149023909 0.26869807424801723 0.4995258210567104 -0.26909853451186266 -0.67400490344506669 -0.0050335138889010637 -1.0029412158397146 -0.1980033165976896 0.58929951049864937 0.017852972109471003 -0.61557779991296269 -0.55341541970139863 -0.85016937514593061 0.13080877803316113 0.37127811683075618 -0.30681979592221231 -0.3180867071203064 -0.35450693313786935 -0.82686155370454784 -0.17489385401151761 -0.083569798209437954 0.13339242566271944 -0.37602340046998872 -0.3356028455003488 -0.68781862153621121 -0.14105089395984993 -0.34011770198471653 -0.45379177578091823 -0.64069438799621881];

% Layer 2
b2 = [-0.47043096367497578;-0.57973885656562918;-0.90933622466857433;0.25928481914392659;-0.25798099507617639;1.506181616804712;1.0508452823337602;1.1829763530127966;0.34739546627483731];
LW2_1 = [-0.31160837564726218 0.14844952096226366 0.39305521523513104 -1.9334006220467099 0.095087505490082713 1.0903926057865592 -0.6716578171663995 2.3854506969022942 -0.82167762600248873 0.50660700793699331 -0.51944382588041316 0.75433809249797501 -0.2575104206097576 -1.380948569168617 -0.94992288936096569 0.56949314621196767 -0.61837611958683869 1.1965128863446182 -0.35935576764592858 1.0494200873064929;-0.35791841813540082 2.0864900805862927 0.33147077123177371 -2.4201270091066736 0.90756578633302698 -2.8923351921553371 -0.75667543361082945 -0.37637181328417718 2.0245859900153067 2.0541330923011309 1.6804647671048079 -1.3196191804038937 1.7609761171357625 -0.9289706642755291 -0.38756863503766242 1.8595308826989669 3.0345608934207946 -0.85713536724505268 0.18815687697367037 -0.68458603316711564;1.3887360736566272 1.7311549103164627 -0.92367139296320244 0.64405382412358247 0.023182914382466613 4.389845600483115 0.49180076867721195 2.1476454102272275 -1.5062277106127131 -1.1270208690599948 0.27523712805872758 0.57161527381821564 -0.86000534971418718 0.17410968441475116 -1.8252738874179748 -0.023025026176808867 -3.371064412033141 1.2331317905577137 -2.4944763189303583 -0.012753043102815595;-1.0501083580330506 -0.046150376722708511 -1.3479926827489765 -2.4375001206073286 0.42558374706039009 0.44382864382284204 -1.6660691561783172 0.19749258159211261 -0.17613182100834812 1.1888853355995053 -0.26381800482636453 1.8760156639408652 -2.0896278828258437 2.4089727679601154 1.6079557129477229 1.0171803298816939 -1.7169945531127004 -2.0177760579546038 2.62029472335725 -0.33573282010667521;1.3297697585400832 -1.9316612157505182 0.35447551143086264 2.7076012141730925 0.83877988327182529 -0.065792483076259789 -0.087308027493649618 1.1818138324540612 -1.5977508845490234 -1.0510310709630486 0.066321911191989436 -0.22450980796315917 -0.090636997021665805 -0.53192349195416488 -2.3635286365203991 0.30994627561453059 2.9562531635073537 1.0510145502733002 -0.47610346589030417 0.5373816947118546;-2.4185809184895608 -1.193882037998957 -1.8320950467099346 2.3059101204420447 0.70364273064493366 -1.8718180877481527 0.43360506723858028 -0.37391491861697523 1.511973838941979 -3.05585756549858 0.23192957890831606 -1.4708905501469955 -1.0619922327784719 0.24039745889041092 0.6294996023956706 0.39205695244048461 -0.50709298730416774 -0.20168763669328618 1.0514788523320477 1.060720470119779;2.5841497494653658 -0.28731317735785056 1.3258647424323566 -1.7100541000509704 -0.86494857323842733 0.8738980153235113 0.32423983851229166 2.0491963730958753 -0.42419651360367394 1.1669478512863072 1.3803710691979045 -0.46878807980061571 0.11642246185459823 2.4509375401902052 -0.88008005861561189 -1.1565730357762576 0.23413137055877231 -0.95120973154428556 0.81349558682704604 1.8670001942112018;-0.29817908243924396 -1.6333603471327656 1.2246112676837475 2.1627715563384529 -0.92554992446286555 0.46693474528988704 1.4514723377613288 -3.9555240496446125 0.6612608123168916 1.3190437138118776 -0.6419593666157084 0.19181041127528717 -0.048852783745670605 -1.6516379969301562 -1.2646047710022357 -0.24535499211530398 0.6636085752044304 1.1518924586097601 -0.04074213896359815 -1.8471604831461099;0.48849103035398239 3.2578643092989448 0.81852428631797347 1.5199148327455585 0.59319287117520425 1.1271292973681464 1.2886429972513147 -0.51090654937899727 2.4441827719880664 -0.42247136625453996 0.0061620046102368008 0.43251080949842935 0.98223428569562465 -0.43883962554309336 1.0309373810275313 -0.27781287070347738 0.32319345520547416 1.0745914167493027 -0.40389342697282021 -1.0774788222585476];

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX, X = {X}; end;

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
    Q = size(X{1},1); % samples/series
else
    Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS
    
    % Input 1
    X{1,ts} = X{1,ts}';
    Xp1 = mapminmax_apply(X{1,ts},x1_step1);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = softmax_apply(repmat(b2,1,Q) + LW2_1*a1);
    
    % Output 1
    Y{1,ts} = a2;
    Y{1,ts} = Y{1,ts}';
end

% Final Delay States
Xf = cell(1,0);
Af = cell(2,0);

% Format Output Arguments
if ~isCellX, Y = cell2mat(Y); end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings)
y = bsxfun(@minus,x,settings.xoffset);
y = bsxfun(@times,y,settings.gain);
y = bsxfun(@plus,y,settings.ymin);
end

% Competitive Soft Transfer Function
function a = softmax_apply(n,~)
if isa(n,'gpuArray')
    a = iSoftmaxApplyGPU(n);
else
    a = iSoftmaxApplyCPU(n);
end
end
function a = iSoftmaxApplyCPU(n)
nmax = max(n,[],1);
n = bsxfun(@minus,n,nmax);
numerator = exp(n);
denominator = sum(numerator,1);
denominator(denominator == 0) = 1;
a = bsxfun(@rdivide,numerator,denominator);
end
function a = iSoftmaxApplyGPU(n)
nmax = max(n,[],1);
numerator = arrayfun(@iSoftmaxApplyGPUHelper1,n,nmax);
denominator = sum(numerator,1);
a = arrayfun(@iSoftmaxApplyGPUHelper2,numerator,denominator);
end
function numerator = iSoftmaxApplyGPUHelper1(n,nmax)
numerator = exp(n - nmax);
end
function a = iSoftmaxApplyGPUHelper2(numerator,denominator)
if (denominator == 0)
    a = numerator;
else
    a = numerator ./ denominator;
end
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n,~)
a = 2 ./ (1 + exp(-2*n)) - 1;
end
