function [Y,Xf,Af] = myNeuralNetworkFunction(X,~,~)
%MYNEURALNETWORKFUNCTION neural network simulation function.
%
% Generated by Neural Network Toolbox function genFunction, 19-Oct-2016 17:19:06.
%
% [Y] = myNeuralNetworkFunction(X,~,~) takes these arguments:
%
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = Qx60 matrix, input #1 at timestep ts.
%
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = Qx9 matrix, output #1 at timestep ts.
%
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1.xoffset = [0.5;-52.0625;-38.9375;-13.73;-7.32;-6.36;1;-71.125;-37.375;-17.67;-12.43;-17.23;0;-81.5;-66.25;-14.46;-20;-35.66;0.6875;-86.75;-175.9375;-15.27;-17.86;-42.33;3.25;-87.625;-176.875;-17.01;-23.64;-44.65;0.8125;-87.375;-177.4375;-14.38;-25.72;-42.46;1.375;-87.8125;-119.0625;-12.08;-28.91;-43.54;0.125;-86.125;-177;-10.08;-19.96;-35.77;0.5625;-87.8125;-126.8125;-5.93;-17.61;-25.88;0.1875;-87.0625;-178.1875;-4.62;-8.34;-7.99];
x1_step1.gain = [0.00556618542355192;0.0231548480463097;0.0396039603960396;0.0744601638123604;0.173761946133797;0.0762485703393061;0.00558171986743415;0.0188790560471976;0.0341151385927505;0.043535045711798;0.0630914826498423;0.0413052457662123;0.00559049615653389;0.0168865435356201;0.0158572844400396;0.0413992962119644;0.0537923614846692;0.0303536196691455;0.00557200069650009;0.0154365653642065;0.0063872255489022;0.049838026414154;0.0534616412723871;0.0276204944068499;0.0056091148115688;0.0154738878143133;0.00566672569505932;0.0374812593703148;0.0489476260401371;0.0266560042649607;0.00557491289198606;0.0129817444219067;0.00564573041637262;0.0353232073472271;0.0439463854098;0.027311211252219;0.0055953838083581;0.013507809202195;0.00683030949839915;0.0365430294171387;0.0355808574986657;0.0270160745643658;0.00559440559440559;0.0150943396226415;0.00686253484880978;0.0405761817812944;0.0459453250631748;0.0299625468164794;0.00558366777176758;0.0137634408602151;0.00654530578850481;0.0396432111000991;0.0485201358563804;0.0345901072293324;0.00557200069650009;0.0153772224891879;0.00684491978609626;0.0451773209848656;0.0906207521522429;0.0518806744487678];
x1_step1.ymin = -1;

% Layer 1
b1 = [1.3604342850714564;1.3567412191909489;1.664335791847374;-0.88257037826349216;-1.4752532797894666;-0.90365017809370574;0.29733093934303839;0.29083339941483433;-0.16422937582453984;-0.66733864527411657;-0.058552997260924486;-0.26157790969662742;0.43694133587508377;-0.75970686550049993;0.68659319435303301;0.31530268648589493;-0.82736167871370681;-1.2682405917375636;1.32442706534185;1.315588286003273];
IW1_1 = [-0.18959054074262005 0.081967217013665924 0.10676693635604298 -0.23467869941983166 0.29905872588325061 0.14210052789863931 0.22115614639978468 0.14139134184123067 -0.23561617052753756 0.25379749562924298 -0.22675090094087461 -0.11364802281617598 -0.15264484163865935 -0.16583956879769141 0.04570096376621692 -0.14313558882222477 -0.28149343144441263 -0.25628135669843694 0.024772910266608099 -0.17842180294745413 -0.36111708131889103 0.0091829177502291484 -0.17915267262824902 -0.1450839832129607 0.32153234811577702 0.42537157518365926 -0.47114892444739115 0.01215076435160436 0.030957390746225593 0.379383228895663 0.029385448276834827 0.40957634056659264 -0.44561058474814319 0.29675222986455491 -0.1451012903851997 0.093425498259031264 0.3525735341825873 0.2381144261657088 0.031946381379730361 -0.25931260224028213 -0.20610584792285597 0.24106665231281993 0.26551401693810317 0.2509451267048195 -0.22321872546288807 -0.038458384453671307 0.15189868902422091 0.015701731786899549 0.04851707564354505 0.16644373310971097 -0.0069667431749020356 -0.051137815209113063 0.24599973154245736 -0.087894673771621259 -0.0074911236166283982 0.47777282875508154 0.0082169083942341299 0.075460493040245311 0.29526849712793168 0.018911853046751373;-0.31305698690771439 0.55303869844017206 -0.2080411829764022 1.5205787387613925 -0.097682561058051745 0.36425953215314616 0.13431695797297311 -0.055737068432560391 -0.017806168035387128 1.2352972528534376 -0.4839515954722986 -0.14598760122677285 -0.073499444622407303 -0.26590869733662187 -0.24666758325463936 0.78590508308328733 -0.21095180952754702 -0.094674938828869751 0.25643506786886217 -0.17651837749742055 -0.22171003460934663 0.35450858117460537 -0.18019423604804422 0.41394695816476196 -0.031803322381079628 -0.033748627611567265 -0.52791548813861511 -0.13066067923690219 -0.33912545655561477 -0.16367140587500487 0.085933702841753334 -0.40431037855075047 -0.36358457485070056 -0.31373480391403991 0.11141961442340702 -0.15639061390039485 0.036045235633568068 -0.077700034887247652 -0.12078713428512625 0.12028159070630944 0.14889541318174021 -0.13278793884797221 -0.11687430096382012 0.41890967045471722 -0.08949637363385686 0.19127951027845913 0.35787711429375774 -0.30485282414313847 -0.28361678870457974 0.46479852529207344 0.077226120726582748 0.68722906356612246 -0.22296729155375333 0.081728804410920952 0.33195093352022648 0.63645855321422351 -0.20808011137610796 0.43463374741823424 0.49813974677503725 0.29085759438422309;0.12471088071120774 -0.051573176135072105 -0.61157409044917299 0.86161140282462434 0.21241824135609336 -0.16202704797910633 0.1635019387410894 -0.2202421411241528 -0.61565082647937242 1.0477335695775376 -0.47357123084833491 -0.27927915293040728 0.020518645958145676 -0.2382854459637917 -0.44653714177758214 1.0172991688940685 0.061229281861106662 -0.27756856769467325 0.033388127883815101 -0.051723901452130891 0.012371424748323723 1.1378443907981215 0.048228049537760213 -0.040897498048754852 0.2383902301288322 -0.15617920680377878 0.36386765389731573 0.27737507637496245 0.057834128404125294 -0.078519472463496942 -0.1271877240716266 -0.22659894937729622 0.14488031521525596 0.25736393641619526 -0.1685912993432816 0.11639718826523035 -0.33093561996480608 -0.051983250877417606 0.59251086430648658 -0.093380402269798962 -0.075979578267936748 -0.14056138822415293 -0.28308911906406681 -0.17102734884771872 0.87243454233616557 -0.10987235537656551 -0.12514247314307059 0.18100361553002042 -0.018338156788852158 0.0058321658195107868 0.95194143676831522 0.5290558437731776 0.0070431145182123017 -0.2003741805198041 0.2956629839654456 0.41927910016506764 0.72965555370972868 0.23518768462584985 0.091762429890175495 0.10811006948315331;0.37775470703328934 -0.12939227972408282 0.433553171082463 -0.54255881242101223 -0.35145342897801962 -0.5816327480794572 0.011900668272226023 0.13926913949817879 0.30195322944013386 -1.043544736748192 -1.3939433161242827 0.193215818608308 0.1154472385723368 0.55002360618450929 0.060365125800525277 -0.35723991932927096 -1.6718632463161023 0.034592389670714312 -0.093316147080271208 0.031571780268974156 0.037330645669648478 -0.31377453269904326 -1.2338960037195583 -0.19346760897922177 -0.4156587986998897 0.33586391693287271 -0.66983247369108267 -0.00053671193467551628 0.050715233109513883 0.10443352365290706 0.050456563481582992 -0.053430690940925465 -0.47370782841362957 0.59062909282021503 0.87509924792546623 -0.14966723427808351 0.25546399978440532 0.05904750809179192 -0.98850238401848289 1.1143624250417929 0.22812752193690494 -0.48164484039964672 -0.012234663219024463 0.23757969301670567 -1.2675375122280277 0.17006045838706418 1.4718850578083942 -0.20187429917037408 -0.12827434924027312 -0.15315060485828699 -1.3066122063087164 -0.17660758570265461 1.2247560795051802 0.077456251368947224 -0.17895403419665754 -0.0650573364463818 -1.0777369914578956 -0.50047012398828117 0.25499095520662735 -0.26412250227196626;-0.034483822388239119 -0.11057685636568904 0.62914826296120907 -0.33146140352260023 -0.10442918544419698 0.35025414023675305 0.29488565534746586 -0.23717828157266074 0.14815829226603788 0.039060318031878594 0.15138691359606543 0.70929067305418225 -0.085828736290169891 0.17966518554330929 0.25563048737451455 -0.63468803317837064 0.52095755917891329 0.17728184053219667 0.090547040232136874 0.14685299969937454 -0.23858023494251118 -0.96641719864536557 0.51001087374794696 -0.32426147073615003 0.05722125615236854 -0.036766155455747997 -0.29344029541209127 -1.2217877832767423 0.19147759733831668 -0.22962246819862628 -0.1176990739456676 -0.25473815248553988 -0.36387786920575677 -1.3184345937065378 0.0014991914083407019 0.024609095512480094 -0.079192936420327889 -0.28664616352470934 -0.16449324132823528 -1.3123648850503322 0.0026019079184224653 0.40825036953909255 -0.20336495458830703 -0.52364764177273326 -0.4873451803672384 -0.88398601835060586 0.37998896355971334 0.21596147867066798 -0.20694693400082712 -0.4981482707306879 -0.44592260226554564 -0.36463685340012092 -0.064339460125787368 0.31319286204419905 0.14803879599964651 -1.0862950264056919 -0.74445659658299435 -0.081207723479411104 0.17608547774010513 0.10562011439835234;0.36452868833030061 -0.2955999691894578 -0.10272163343055163 -0.57142029873388001 -0.0033783894480181043 -0.61509783465409518 -0.13740226599745411 -0.6254998592729808 -0.62828178363757825 -0.072016001501939361 -0.96698015871286114 -0.099002333155589289 0.013240710885634941 -0.51806587371416746 -0.8526719690275828 0.44379211047082107 -0.80973942381228026 0.23412688130176065 0.036000188652503637 -0.24737953443605315 0.034646458277029682 0.086116514193669585 -0.31677039061385481 -0.33430651047558024 -0.094679347022268517 -0.011217867727091411 -0.24120717169094955 -0.43475937564399963 0.27294760195388384 -0.21669750664468432 -0.079942125859016611 -0.23882335835245322 -0.067932311221140781 -1.1617584574613102 0.53647603841597158 0.019949742219371347 0.080826141339745985 -0.71903417870451924 -0.14041548260166947 -0.94881121009394609 0.31769627527929245 0.37564674767770939 -0.014660139917458449 -1.073502457274474 0.073901715962105791 -0.69736277607799058 1.0312151765140212 0.31396861827325773 -0.0070256816629500063 -0.79703737935302277 0.0027701743368395114 -0.19406068499884621 0.40539591613843262 -0.22197641253539435 -0.14186218131461423 -1.1510204922699714 -0.31768372591223493 -0.006600143841114476 0.31100180303302855 -0.049232764107438542;0.06378538381270013 -0.17404371744564406 0.30700319211252913 -0.57126462041517612 0.56490902401460519 -0.57745718954816294 -0.3795935970721015 -0.71930376117276851 -0.24531956351649425 -0.82622012132960665 0.0043643188075608193 -0.24111114177073495 0.135229051560044 -0.84730467897086947 -0.53274979117471555 0.66250871882132212 0.74451441760350012 0.30259468405162704 -0.059300748199697176 0.03613148251326477 0.081984125041839828 0.45137793843004376 0.33739838365313868 0.32542979561831337 0.34809990199776858 0.21552723586454398 -0.26271997797915708 0.37809478013269648 -0.11777838689430217 0.13562343308903108 -0.1665183953923049 0.27121391290619767 -0.018606447349550331 0.8028605155166999 -0.74593937066220095 -0.16020222734729286 -0.25839831444637701 0.20755129462124602 -0.22094136746955398 0.83595421806119008 -0.42152397594797186 -0.18872599976408394 -0.037304287057037824 0.30355425281811893 0.11141839049660229 0.77503488289149236 -0.58490347301647549 -0.24231601338840586 0.0036015426885651746 0.90864240794605278 -0.37370721668133428 0.40779686975783452 -0.27031511844431977 -0.38250263330052148 0.43542328678295139 1.4633153320544032 0.14852630847785508 0.067578175065130808 -0.23372763175437114 0.2372392117755919;0.31733212472003725 0.5293901076826304 0.32753360781593638 0.51456174142871958 -0.0022063667095403271 -0.04301363162454732 0.045814699236366642 0.4195378125232338 0.31502684091986483 0.12892893752857776 -1.2093450821556422 0.22442479799970247 -0.022731668837893806 0.088571974846296836 0.054904424731442733 0.099757062538983227 -1.5311500292002769 -0.10811845970070283 -0.086417030155338498 -0.42044252759730222 -0.32291951911508104 0.54841571237789533 -0.91427625748882702 0.086050908420073499 -0.266215179130254 -0.50819359158503896 -0.14704554375488815 0.47669558490007824 0.038474640628148891 0.10778655869064982 0.017796038357863246 -0.52720699627094747 -0.54007893487136993 -0.037485246513941181 0.50523505647745726 -0.22356169117374575 -0.15472349052833564 -0.51185331342351326 -0.30156693958756409 0.14457049512048928 0.41713357658422701 -0.29313223167791741 0.16184189148125847 -0.38849360669663013 -0.54961750376966512 0.25665577156188235 1.1105419909332634 -0.26154256753900368 -0.092968747203653848 0.030120712562967084 -1.0319434179510274 0.21804522570148985 0.58109284898460012 -0.24624948795536286 0.065886305401430464 0.40099553846403552 -0.44135939512163619 -0.12762419000757397 0.34433329989566569 -0.20418888345689362;-0.34188733791592868 -0.23671486814185336 -0.1209698461815992 -0.1883055216448313 -0.037965746919212437 0.01231194605859718 0.10756662549799556 -0.19403333071728449 -0.28450673817393873 0.35949129800591539 -0.045383446159467579 -0.15277344284053757 0.11483429559261735 -0.32241195056201954 -0.22209733655968983 0.077464021812000891 0.072291954649873716 -0.027582354444546802 -0.0010507023007430177 -0.072991256106086519 0.12404585522035326 -0.054958363808280404 0.10711903964071992 -0.19560165000455251 -0.048664737164199279 -0.07500751194242071 0.26056682136905557 -0.67971240298131752 0.24035057330164961 0.0053786671719629232 0.31124021602941565 -0.47605662773209778 0.58569844827539641 -0.64802754221878889 0.53647189158618325 -0.095870896605282641 -0.15374378870121352 -0.24288955791906569 1.2106931039533089 -0.97945546296034247 0.53005881548656919 -0.20351010060210625 0.059292386015727602 -1.0689686561962419 0.91883261792745474 -0.64638039815486203 0.55990195917128593 0.18862560451475194 -0.14433999134450265 -0.92560822311485025 0.85665464697659632 0.17775259356346601 0.28727122271345973 0.11645434498555096 0.22290479081542694 -1.2875248273738265 0.88231460899423453 0.42873906854517069 -0.18961298129846441 -0.047342277659187963;0.029542504129780697 -0.36248755422068712 -0.57210952093431322 0.60299809474085753 -0.49903506272985687 -0.14278405420787252 -0.30523535662582013 0.1283444628688952 0.64331762123724257 0.23395643944165823 0.07585956415520663 -0.26029116196200208 0.001241501303010031 0.45749200700826997 1.1370366001551635 -0.97892954442525248 -0.54044652885798028 0.14072862436239075 -0.34931802807125129 0.30781846356165765 0.68815012300791079 -0.5493746347331574 0.13495202579623516 0.15105489696646043 -0.12298388363396152 0.39216439332640968 0.62437191801547964 -0.22564466738524433 0.040623530987033925 0.30310920608688297 0.2125584884379855 0.40519385015557741 0.45055439223068361 -0.35670496954899478 0.40795605688092718 0.020214004975690932 0.20798251890887581 0.66503765571400364 1.2910915377511916 -0.64993566244945467 0.38871313591305889 -0.057613772796159951 0.12270133591000711 0.36862467148826361 0.90765135711163003 -0.31567942285055617 0.36617705834386821 0.033086436895595289 0.098268473800011247 -0.21809188794538373 0.80711347109953269 -0.15813206188394713 0.36317418039825888 -0.26693780485378193 -0.30931201212831783 -0.40022858718922394 1.2509632370714239 -0.12521131318287587 -0.14930622846679475 -0.12790019377717868;-0.19653768641742311 -0.11308169650912579 0.43913889817991031 -1.0227900901096671 0.58905840120343189 -0.2492287839079998 -0.048876938987568376 -0.55083315623181606 0.42413405552203043 -1.1643869133498019 0.98303476819635127 0.18586592156262088 0.012539083530686317 0.29097861706016381 0.18716444011472855 0.013593227358147442 0.91586252104086496 -0.15178901506631642 0.095851718339764594 0.17100997333225604 0.14492807203307448 -0.42956554392806479 0.65249813680360935 0.29689879505454858 0.35906316373461822 0.0091256566737482423 0.032142019615898569 -0.27701377277103822 0.11472840012920121 0.053298622020883119 -0.082745816443198172 -0.16539858553164805 0.17647520218526491 0.083927992811664964 -0.42399281608235256 -0.27526376177638079 0.14040478451516242 -0.68299743443194638 0.11907989432439015 -0.022308860794675811 -0.26965468880510773 -0.2032687736460288 0.15525525858475794 -0.41911625667786062 0.74471150341906944 -0.064300742608973213 -0.49180084659520018 -0.059698539021957431 -0.28318713074595103 -0.46271383045438291 0.34005397279147503 -0.046728394044241478 -0.71887008905731442 -0.17973160145289027 0.24505354333245477 -0.62952759669578318 0.31462111946222171 -0.001013680640791461 -0.48946023829182722 0.19866778058878437;-0.29427582102453764 -0.079737562192541328 -0.80712288177197633 0.20922351017917004 0.014933899691686072 0.13716080311569673 -0.45984587579383623 -0.025608594902906557 -0.94002456166417503 0.20399416280511906 -0.16947199401414417 -0.36904286490061994 -0.35574677826054457 0.056418639446284988 -0.20323371691439546 0.16118585574394573 0.23731286016971598 0.10115445317040304 -0.12787411965128107 -0.039972667843880566 -0.065289060121244719 0.32604841389882261 0.3489646033385882 -0.27902746792965671 -0.36494398870495687 0.1920287269862993 -0.083031688138116538 -0.28286187357320525 0.16091997438076194 -0.11692888864325449 -0.17578274728998292 0.21454052504247711 0.10760312803812105 -0.33919731497804617 -0.13875812595112136 0.14647571146559935 0.13119768560883374 0.39816072933181174 -0.022121086834423681 0.12524318618046731 -0.19392326052026793 0.18032124267406047 -0.16465301274751387 0.12982674676168476 -0.33193953974678275 -0.23517929323658177 0.10960155880170599 0.11943163423250618 0.18176565692766855 -0.10507016266395049 -0.24238880741560798 0.022215478941996034 -0.29811713525246153 0.24073757341283758 -0.10150350121944851 0.54193578859311475 -0.37800417316619839 -0.26941178138578292 0.27188547295942955 0.23507577515721792;-0.36037578985063751 0.40736430030306231 -0.070653694261515743 0.019999718886345295 0.25761024335281341 0.045880685729901068 -0.020899954455451692 0.016664004272973845 -0.19118334909775642 -0.57056028412295301 1.0330710623788786 -0.28993234818928204 -0.082295512570886117 -0.19169068908918768 -0.34907584954311449 0.70873841415700278 1.2856067494061696 -0.22182264152555753 -0.087886898721532603 -0.24299937913378114 -0.32043522731516277 1.0130494222578967 0.3433361190238311 -0.17140649305448849 0.019426582756265451 0.020822598773526144 -0.29148543587963543 0.59286315940200951 0.028756917663743279 0.36049890689557185 0.1086500269178432 -0.64155240509927103 -0.42755056810126613 0.76517800050282825 -0.68124754544499511 0.065248252138734392 0.12527579992024168 -0.40646960027388285 -0.28641385138944098 0.48635506343550161 -0.62195942479788302 0.089200107218287181 -0.17633525660246765 -0.17028620727164548 -0.63277074888000784 0.036505802213581524 -1.0506220851506669 0.037520129992202673 0.22597470903658368 -0.21968899183353549 -0.64820694683402846 -0.25177297445438845 -0.87072907835933111 -0.00080095509531676436 -0.058102260437998182 -0.34360801388767687 -0.8612979058034943 -0.24484357408584617 -0.79200627435712645 -0.7819608287091091;0.11960301375936958 -0.32456058815005517 1.2339760839075977 -0.63902582346240577 -0.1181967256872611 -0.41709053999469931 0.018993658107224649 -0.55326728792796298 0.43952383481330898 -0.59763112115959827 -0.41500341937922774 0.21703251738757487 -0.050283860368669421 -0.38210400674509337 -0.088789019548006665 0.21285375397575457 -0.20748053970957506 -0.29038882107135222 0.017796291904081836 -0.18534186557781956 0.30978298103202384 -0.2932231207711446 -0.3266338709303277 -0.35324951565441748 -0.17613104319525619 0.23289152073428213 -0.10721514844835403 -0.56399081872196533 0.33495831901741535 -0.34290890447511374 0.18202320176027229 -0.12816800939792575 0.40995216015688929 -0.15248863753144801 0.58952597073831992 -0.23500733070838078 -0.34490407897265829 -0.01822867121711045 0.10037500153366641 -0.26508868625626547 0.70278068558040108 -0.024645032833693823 -0.090871950167283541 0.37938735341527929 0.42722512811883712 0.10826114711567959 0.38022737094556536 0.19032249689454445 -0.14960405070569063 0.56446244326838235 0.49596620702632344 -0.040835082252435199 0.28305913156606777 0.25369198088671258 0.01057824865409396 0.21053412800181015 0.047330967017582 0.29053279980877122 0.2846390199737403 0.065914102788261139;-0.15809707368457762 -0.33222193203138811 1.1028387315483577 0.016525142654121458 0.7524219534308908 -0.51759335145206276 -0.20292962235370537 -0.92152311276386745 0.50972172028996832 0.3097832345687101 0.024114523244721828 -0.43860832518734433 -0.22062749557584729 -0.36119431599498392 -0.38200624814546497 0.024355295323441085 -0.45810924780722323 -0.027181427994331736 0.17778957241780741 -0.17093932937096459 0.0029189600553748691 -0.32752795153309217 0.044207731032844422 0.12360401731677356 0.307085027027024 -0.3834787673585659 -0.59778710704278359 -0.45937998336552555 -0.13598065835461176 0.20319163904914619 0.38447026727433553 0.033221395639764471 -0.5019403102095692 -0.19190908906783521 -0.23304908387996914 0.095388255362359523 0.61337941375785821 0.0039356178439770816 -0.5540995273242254 0.12297377475655076 0.55156596162897076 0.035092934086990005 0.0023895903833927225 0.54925826991744386 -0.69148959896720308 0.024803790834863913 0.054178824805396868 -0.017974222039583966 -0.25575010582695429 0.64098890674785369 -0.89652285617647431 0.47170904745009279 0.22157675234980842 -0.11709346557120406 0.27539837339484291 1.0934199967039409 -0.41925276341329887 0.37818746565711198 0.55414401874314023 0.12550107575032352;0.045261163576438133 -0.031154779165217597 0.86637547015560135 -0.30038617503332293 -0.17444456346828086 -0.085841918072705747 -0.31014916141973636 0.042628334269384657 0.64385167765410212 -0.65991655546727923 0.34518187489574492 0.19034994844077735 -0.24123083209971888 0.11334415155510513 0.43575401493179439 -0.54459893331071141 0.48964931729250916 0.17794461331864375 0.074383459621060938 0.34590019488868484 0.27700066478573793 -0.65670921701084384 -0.17689195644465194 -0.31171480922481271 0.50896923194736199 0.1349953389613692 -0.04942954936265162 -0.39092911078434073 -0.50829379731534885 -0.40589009491830591 0.17071206058691352 -0.21002962927683291 -0.20046295576497047 0.15955259198341831 -0.045411583551391667 -0.12408485045222083 0.54323533577768701 -0.13114036623389802 -0.093026065743364972 0.053211667004110022 0.12444839243475134 -0.09505391422928669 0.46863638989200784 -0.68943696267980226 -0.021098244985500229 0.14446888292558918 -0.37656733907962364 0.17353582589126293 0.44614592754661647 -0.58612445840176863 -0.18074671082462812 0.13913414478391656 -0.39555335966599747 -0.16507465372738248 0.47453326137772123 -0.95526388385534988 -0.41988358887585153 0.46812659975621518 -0.13863361048358247 0.13629690124823809;-0.067811767085583383 -0.54660971871721498 0.04025547545969152 -0.31460858924030394 -0.033558370954678979 -0.16592416316213449 0.32705204215350275 -0.29305721699808257 -0.17094729674032477 -0.17098678797642441 -0.20031838540402871 -0.30693428481732771 0.080128771792990133 -0.3142872776632919 -0.33726748031230558 0.021258943724671353 0.071407058483156774 -0.11413959970633046 -0.07356030598246871 0.14388339107303408 -0.22568922040423545 0.53987526449067957 -0.13334379382710321 -0.25260125456525545 -0.27273436754047464 0.031761118549958174 -0.41253990923300038 -0.039724566596799973 0.0046573061455111205 0.062279095751252844 -0.26008726019622325 0.014612083278915184 -0.049751817113109088 0.0042126807880967943 -0.11977027098350393 -0.13341950607084971 -0.088425657532710311 0.63721458530830732 0.096967927947834168 -0.028050176909536623 0.24541769309069567 0.33840335441700126 -0.35781735442122253 0.50975584180616162 -0.28569401800882605 -0.34476043331189982 0.28052683747407126 0.32944956292693833 0.27157823828793043 0.16641055637373564 -0.010617909138158875 -0.20255211962077935 -0.3682180914048655 0.012430187337397538 0.28109976729629771 0.41350863561851869 -0.15463646717771806 0.37655107138346178 -0.18935971030583262 -0.18732203903884131;-0.20983070170955359 0.16553504621754236 0.57361885988336914 -0.26023416642253322 -0.36125025457254406 0.045755142559894088 0.075727277428154022 0.25451245663340299 0.98522617698967108 -0.22301183678986372 -0.22946055853025027 0.50918531059644812 0.21668713522436611 0.28551383418585258 0.45787225799855319 -0.66350452525671932 -0.057420249828113598 0.20757816103364229 0.20341977025923455 -0.23541550643975293 -0.24099621408354052 -0.62525457967640663 0.17055294576136684 0.19710219991235434 0.27189857716910792 0.01972894695889657 -0.3346920732821651 -0.080734730245197506 -0.22482454650078015 -0.35145772584078239 -0.17505571518910698 -0.11528806021708798 -0.62714276580967243 0.18712747803293936 -0.1600786767293714 -0.33186164536728763 -0.22599856300917398 -0.25741538950396803 -0.37488371443647833 0.12948517351630456 -0.20459607278516626 -0.27370201267151234 -0.12440759007523668 -0.36462707297229707 -0.53423665605433479 0.026398201846153768 -0.53543247134539529 0.033712422706024273 0.083351286110626213 -0.10933941009885924 -0.81585741620381358 -0.19183009904276263 -0.32890383096280584 -0.27331046518503277 -0.080078702308036195 -0.4483871159884425 -0.4400732090861571 0.069217365885947374 -0.0051500564168520625 -0.013347459555123727;0.10977683761172247 -0.54371440323050579 -0.058996535303275074 -0.45066921541918259 -0.053314063959211101 -0.63156966914334711 -0.18552172842058176 0.34206025189126144 -0.050764599278616832 -0.205311986871553 -0.11168793339165943 -0.32760024977144658 0.028435586321626325 0.30119739106619586 -0.16337929645437041 0.053816480827272556 0.019067380107803768 0.51672481200093623 -0.018718771416990108 0.37607325966047062 -0.1476353992857298 -0.65476055967443991 -0.079668748916805851 0.049744427476783204 -0.14131961443227908 0.67867277447826857 -0.70299375186993973 -0.19947490520911709 0.21436045196471082 0.37527928222772916 -0.025527725171332834 0.12860993271786136 -0.35728282253332416 0.11461833931351255 -0.091783617193000391 -0.010489049463181379 0.25195998227522837 -0.66309482966712963 -0.89737882764503019 0.050284088597513904 -0.15605457722562688 -0.21435145070985348 0.28525623937697192 -1.0985592609690942 -0.9814182475855141 0.1256578178888135 -0.14533255206688533 -0.31679596792831177 -0.18793897283679584 -0.43166262603171612 -0.82407998582499087 0.078436314876252633 0.27072384058111421 0.17817280316593898 0.072563162489610963 -0.71299749661842249 -0.84945045854358803 0.16354937982695711 0.38069551303321997 0.11167879106797199;0.24178891382384179 0.17810761518539231 -0.44126819290175129 0.3293095789343648 0.20261113196317812 0.058841998255716947 -0.17293788038271582 0.2642216140058064 -0.041013778992874894 0.6269548788459095 0.16730748247714111 0.17331682573664559 0.04309116453316196 0.13836607882817961 -0.015574024864714601 0.15741538907054642 0.23832202959579657 -0.22044776518776285 -0.13033419927398321 -0.13857884187236338 0.38484507211045155 0.46094262393595409 0.15557415869298663 -0.026996410865291243 -0.19667667980474521 -0.28588733879581446 0.39909028738608771 0.54006344962586417 0.10947317731474669 -0.051424232944587971 0.14503296337273114 -0.31457842270407282 0.35355726929997644 0.23092758056000037 -0.075020197618403797 0.092259463911517001 -0.33003299136059699 -0.15950577015687023 0.69143722865834922 0.450714157734312 -0.0090751700366819479 -0.23231524130030418 0.24069815419226676 -0.48861956848231092 0.12602174790606177 0.16144455886064357 -0.041939385222612986 0.16222149253207224 -0.32558552136010643 -0.12580453425078159 0.39160111355373906 0.4515040941845046 -0.3239586736024398 0.058822139148506147 0.18173992697781896 -0.67121483362813295 0.39812392976752214 0.27430417188380646 -0.11034238979061865 0.12797876946897696];

% Layer 2
b2 = [-1.1220627406332828;0.17404570910283446;0.21603357030697173;0.36999305310206176;-0.1703931772050859;0.032282130242579914;-0.15341941009465529;0.51127382960171119;-0.37743352846959904];
LW2_1 = [0.77796552397859697 -0.89197099088117249 -1.3290179495954701 -0.49391162154015145 1.6258203190299394 -0.60637221270276975 -0.81025786947648182 -0.25251301062869447 0.054579995603599107 1.3283428970959372 0.79498689046926496 -0.91422570047201313 -2.0536877793030377 0.97422751149660969 0.40279247822672781 0.7962930470469034 0.028018975035210916 1.071250499893734 0.51564250888848218 -0.40620413643081771;0.59407489294700466 -0.81271163918413891 -0.50467853642589244 1.2783929190804715 0.23952329563742897 0.5572712420982594 1.6498790726033012 -0.12879512957585723 -0.2143496643501312 -1.3107770905362675 1.0391571516982863 0.2028783650771239 0.27918189496556411 1.2838543927706014 1.2860750042636004 0.42773677919014241 1.1890942344197291 -0.28104472060920144 1.2147453144903826 -1.4452263480735639;0.76011396639342188 0.62906135264405505 1.4023735483797874 -1.5617450360283642 0.84442560898182295 1.5156051996831639 -0.98646652130677159 -0.11149312441739556 1.6658256431944465 0.68967210931538303 -0.40233932649050419 0.43780259716937558 -0.71449283155458287 0.090753618546389456 0.073722415859295495 -1.099076351615069 0.69234398485570769 -1.4140216810428581 0.71423780963796479 -0.025176160013019373;0.30251540357610796 -0.079087926569573183 -0.12004990024813549 2.8625491741417233 -0.90034833717428353 -0.17433757115911283 -0.49251884593067585 1.7305395176472345 -1.0730373040898149 1.3171606257912163 -1.8491006514069352 0.19818282819452879 -1.45565632969862 -0.18540011440332901 -0.50530294237856321 -0.27669091974779531 -0.060662852992281927 -0.37281280231398112 1.5608846059994315 -0.10302699011728311;0.59195681255071486 -0.75063877621094777 0.15489726875155188 -2.1742106077688339 -0.614203399458495 -1.7678428719263213 0.16567628397463138 -2.0235776660356111 -0.74509515553376648 0.47463886891525703 0.87434399548680408 0.43329376841180361 1.4101183158025545 -1.1779046541484055 -1.0238120697499069 0.62817737797112083 -0.005158739578136071 -0.40284534227566277 1.052254998897143 0.52366608807034742;0.96140545502796704 1.893554545015153 1.8118977701938104 -0.91281727176926686 -2.1328348297086528 -1.6533544725750238 1.7212320845210283 0.94133550132195032 -1.0283344026056884 -1.6200465870116798 -0.11051905643657992 0.18589678665325543 0.43200231445002713 0.085666876509334244 0.88389246607769112 -0.78245136820434025 0.63253206845067289 -0.74585596591321057 -0.38617060913920914 0.44576964629487059;-1.392000695355736 -0.5472276104695758 -0.31239759549750795 0.28940278117073925 0.57844069664986575 0.94478161365606306 -1.477660154851981 1.2647906377721541 2.0160542581213816 -0.75979575408998024 1.530001556128086 -0.26704057911669976 1.0098479799342419 -0.50175371473748365 -2.1424315262502343 0.97549200556707427 -0.65933745868057869 0.60486461054926521 0.16875332501246237 0.7682092022909317;-0.34888568401578507 0.74071156787947046 -1.5170784081301958 1.5243678500119948 1.9673202809058286 -0.27563292179647442 -0.84478596381363258 0.52751131871776891 -0.97074581259710047 -1.7116117211783506 -0.63157150505969939 0.94755962537723548 0.82326077871347603 -0.65377444026257714 -0.52919377094296027 1.0083620058079412 0.38374913094472468 1.3240472335139215 0.2364014399375402 -1.1880165930468287;-1.2645736117257615 -0.11959294284654375 0.62777455721274045 -0.72309531971122898 -1.3334819257178383 -0.9047002656733536 -0.077713397575870077 -1.1997666407979724 1.6575034035089429 1.6564395950935897 1.190173749619591 0.68299742503425875 -1.9454008793337476 0.42372556892320051 -1.7723391576013903 0.18606361514842371 -0.14757065226242053 -0.91084866211663107 -1.4840535552284015 -0.33542530347264304];

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX, X = {X}; end;

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
    Q = size(X{1},1); % samples/series
else
    Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS
    
    % Input 1
    X{1,ts} = X{1,ts}';
    Xp1 = mapminmax_apply(X{1,ts},x1_step1);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = softmax_apply(repmat(b2,1,Q) + LW2_1*a1);
    
    % Output 1
    Y{1,ts} = a2;
    Y{1,ts} = Y{1,ts}';
end

% Final Delay States
Xf = cell(1,0);
Af = cell(2,0);

% Format Output Arguments
if ~isCellX, Y = cell2mat(Y); end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings)
y = bsxfun(@minus,x,settings.xoffset);
y = bsxfun(@times,y,settings.gain);
y = bsxfun(@plus,y,settings.ymin);
end

% Competitive Soft Transfer Function
function a = softmax_apply(n,~)
if isa(n,'gpuArray')
    a = iSoftmaxApplyGPU(n);
else
    a = iSoftmaxApplyCPU(n);
end
end
function a = iSoftmaxApplyCPU(n)
nmax = max(n,[],1);
n = bsxfun(@minus,n,nmax);
numerator = exp(n);
denominator = sum(numerator,1);
denominator(denominator == 0) = 1;
a = bsxfun(@rdivide,numerator,denominator);
end
function a = iSoftmaxApplyGPU(n)
nmax = max(n,[],1);
numerator = arrayfun(@iSoftmaxApplyGPUHelper1,n,nmax);
denominator = sum(numerator,1);
a = arrayfun(@iSoftmaxApplyGPUHelper2,numerator,denominator);
end
function numerator = iSoftmaxApplyGPUHelper1(n,nmax)
numerator = exp(n - nmax);
end
function a = iSoftmaxApplyGPUHelper2(numerator,denominator)
if (denominator == 0)
    a = numerator;
else
    a = numerator ./ denominator;
end
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n,~)
a = 2 ./ (1 + exp(-2*n)) - 1;
end
