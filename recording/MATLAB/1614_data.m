function [Y,Xf,Af] = myNeuralNetworkFunction(X,~,~)
%MYNEURALNETWORKFUNCTION neural network simulation function.
%
% Generated by Neural Network Toolbox function genFunction, 11-Oct-2016 17:20:05.
%
% [Y] = myNeuralNetworkFunction(X,~,~) takes these arguments:
%
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = Qx60 matrix, input #1 at timestep ts.
%
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = Qx9 matrix, output #1 at timestep ts.
%
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1.xoffset = [0.5;-84.8125;-179.5;-9.96;-12.03;-9.46;0.75;-88.875;-179.625;-24.89;-15.38;-15.21;0;-84.1875;-179.6875;-25.58;-20;-35.66;0.6875;-86.75;-179.125;-22.08;-25.25;-42.33;0.0625;-87.625;-179.375;-16.06;-27.97;-44.65;0.125;-87.375;-179.375;-19.82;-25.72;-42.46;0;-87.8125;-179.4375;-20.46;-28.91;-43.54;0.125;-86.125;-179.3125;-13.09;-29.9;-35.77;0;-87.8125;-179.25;-10.51;-17.61;-25.88;0.1875;-87.0625;-179.6875;-5.17;-8.34;-7.99];
x1_step1.gain = [0.00556618542355192;0.0129764801297648;0.00556909154194222;0.0822706705059646;0.0986193293885601;0.0681895669962496;0.00557103064066852;0.0124465188642552;0.00556424969570509;0.0376222723852521;0.0577200577200577;0.0431034482758621;0.00555941626129256;0.0127186009538951;0.00556618542355192;0.0336530371866061;0.0537923614846692;0.0303536196691455;0.00557200069650009;0.0125293657008614;0.00558561703613196;0.0426075841499787;0.0446428571428571;0.0276204944068499;0.00555941626129256;0.0125097732603597;0.00558659217877095;0.03813882532418;0.0442575791104227;0.0259437021662991;0.00556424969570509;0.0125638005496663;0.00557200069650009;0.0322268772155978;0.0419287211740042;0.027311211252219;0.00555941626129256;0.0125539427226363;0.00556618542355192;0.0316906987799081;0.0355808574986657;0.0270160745643658;0.00556134862704206;0.0126532226176354;0.00557588430040077;0.0382409177820268;0.0374041518608566;0.0299625468164794;0.00556038227628149;0.0125146656237779;0.00558659217877095;0.0363438124659277;0.0485201358563804;0.0345901072293324;0.00556231531374935;0.0125934671389217;0.00557394182198223;0.0446229361892012;0.0906207521522429;0.0518806744487678];
x1_step1.ymin = -1;

% Layer 1
b1 = [-1.089568780531299;-0.2184363047988265;-1.4545282084661542;0.44973820482606486;-0.4574851105527703;0.22270673318193274;1.2453668562082281;0.52586571239108093;0.27070087147125665;0.56123041851701161;-0.69226796786213729;-1.1630337172283789;1.6314538294402647;0.13968752175774274;0.68512432740440032;1.2797416516591913;-0.7760522321573865;0.05368215931471218;-0.50320344011141505;-1.79661065283956];
IW1_1 = [0.2721436133847151 0.12637769689854333 -1.2335474111899152 0.56012087185536119 0.1613217805368001 -0.55137323084068568 -0.3235538180270352 -0.13029201247685882 -0.89085495867430098 0.9635624429046391 -0.24428836342891402 -0.10902961583783555 0.44812207844774155 -0.10807729606757392 -0.060791761391031512 0.49855613369252427 0.10265873817021197 -0.13001321282191966 0.075349556582453736 -0.26999382467776867 0.079727500885376973 0.40946713403110535 -0.37598589916222253 -0.033732908439780177 0.10692506104105191 -0.44899381011025902 -0.50566886367466068 0.57067446727993087 -0.34737786412730831 0.15091035046053058 -0.30649114322434107 0.39864862111284177 -0.1984621932748952 0.27925535309821886 0.092606857192860187 0.31843071546515378 -0.41946855436889502 0.26020227621099884 0.37151328693471436 0.50474640631060974 0.31859467716614603 0.14653195280516623 -0.057215815132745942 0.99048196271165168 -0.058620909881249586 0.055683048692362999 0.29554407457168369 0.70304673773635795 0.24189056542826887 0.8255501125836997 -0.083787416574656284 -0.6789336014220565 0.71123286510696859 0.35540490820756265 -0.030276668970519661 0.54893310129019846 -0.18773384306564483 -1.0736971284209544 0.11215936252986429 -0.1229712640907004;0.21705809322548278 -0.35519557423634129 0.49863557431982197 1.0389047905592306 -0.80436950657273831 1.2690550800150322 0.17413762495622562 -0.12463920519784832 -0.42770272538561044 1.4047900197212768 0.80366273451517412 0.87502120490594903 -0.094286259298993133 0.3131456180517796 -0.13672484327573556 0.90749532820742296 0.295490124856151 0.67319315657978418 0.63803720074259784 1.0172624765357146 0.15077049432925979 0.14169626990395201 0.98467729388154857 0.24047970109340355 0.10664490225123892 1.2622165120464786 0.0057972029831496498 0.64520856022249029 1.1491937339014455 -0.31883553516341523 -0.14878037120520113 0.72736708118219551 -0.1005324240719464 -0.99285002319552396 0.83069512097697873 0.076624357517734693 -0.54392992903138138 0.20814785267884267 0.17792702513556044 -1.2722921586113702 0.017658470130169242 0.3206021497927713 0.062314493064400622 -0.70460020915984001 -0.41546730601775739 -0.46631803569920727 -0.2358892910249166 0.15327039103515744 -0.041807374211626558 -1.1492211500512863 -0.69282475563381596 -1.1107493933697272 -0.39308017542525697 0.50470612998914866 0.08374922717229745 -2.0546933537773913 0.33317342429339708 -0.22799410179518487 -0.6050338600945826 0.44975845966739403;0.26158557102276242 -0.41639272515520404 0.53124528135696492 0.44855042017139662 0.30467366115106254 -0.19145958607232474 -0.058172877490983273 -0.48181181745807183 0.14536462807794803 -1.2100160610355781 -0.29977413570790684 -0.91295045337747882 -0.056111270720158153 -0.48956547307797149 0.11247144847810187 -1.5959159053497864 -0.29157257736437908 -0.44538830672830465 0.15639964500429976 -0.26801289997685113 0.47901442875592065 -0.67757228878377507 0.01760471133749926 0.093717337762896452 0.47875963741427374 -0.4346137716431806 0.028625163161414426 -0.30483924790796257 0.089632015123880054 0.171434345603381 -0.097427422631963134 -0.17266655460018493 -0.19401674342564906 -0.90903557079401243 0.0173051494033531 0.080008497324913774 -0.13263251783947064 0.39285191009516301 -0.022517141376865488 -1.0606043032574997 -0.28193029214202775 0.10783122047037896 -0.28247400683241786 0.16126267786551646 -0.19189170974854783 -1.0473932064613927 0.013408139780807363 0.27004731966516943 -0.30240770664363903 0.29381796516842995 -0.36610403104022665 -0.082248145267751455 -1.0438579672668362 0.28202816075527659 -0.14049455494756286 0.62453576899408447 -0.081943385991827031 0.23124215829954434 -0.28318954226769477 0.8991046905875878;-0.25409595072126295 -0.5451964334315178 -0.3118892309837788 1.0305250907533261 0.3648501659732053 0.38918029688327554 -0.36944222814678984 -0.096771453245808201 0.21897095286480769 1.3977780093858441 0.9267768767381791 -0.3469035425542682 -0.36762483697137976 -0.3438770041099955 -0.31113950410115332 0.99976137473297699 0.48943531724176231 -0.40546569274725813 -0.60719537349327701 0.55322836886354643 -0.65920479628164907 0.11924128855167243 0.43679355709572137 -0.19773695051853249 -0.11945858328941009 0.91012864739849719 0.016394852488183429 -0.35631716348709586 0.23895257406954251 0.38876871970258586 0.13359256347491641 0.42044019542765376 0.060753585871227561 -0.4968618770699384 -0.063383639748080159 0.0046892010624210957 -0.19761084041260008 0.137813933002743 0.27656771299979421 -0.874014218415893 -0.086114265620804958 0.12897015304720014 -0.1123350307886276 -0.2757531919943173 -0.12196246979855269 -0.13984803479120017 -0.086822867156874345 0.11374411593098435 -0.45567729384311739 0.033335394306600388 -0.1361272447100253 -0.4375935329267463 0.11872305000641367 0.35096077596598552 -0.79392961266696793 -0.23987287858231804 0.51651095847882733 -0.20119605031327337 -0.33021327437317644 0.39767977072279298;-0.062736151889880881 1.335194894215656 0.14497650076811372 0.5378518881819343 -0.26739628511916941 0.16610402662044144 -0.48338812803485942 0.86266531633436239 0.35818640356971565 0.41527188174525659 0.033232063950175077 0.60548137182288653 -0.20007130710078647 0.58485329976235723 0.4223060637863425 0.95547838315246469 -0.38457283842287199 0.70210482494835158 0.21918723086539638 0.28758695410183421 0.57691471340953482 1.2731107089442202 -0.42899330669243385 0.22658230307426749 0.12981870641353588 -0.57667525225662264 0.22669991051963873 1.3101291438510998 -0.13724923739326678 -0.22643948277697062 -0.0095920702236366069 -0.52213890825086418 -0.61024638638742557 0.40809871868853514 -0.083047839394045447 -0.65536424071173371 -0.38669555798534844 -0.67773952584331887 -0.22291202846816774 0.18321709561819599 0.098762058550832768 -0.74369673214800558 0.019371596346251151 -0.90298802753781982 -0.40692810712227279 -0.1738414028862747 -0.39696468053748846 0.10311621551885007 0.39456406069770228 -0.5606595049844435 -0.29678637526248081 -0.49400666418766759 0.18203700431519024 0.23552103517863945 0.17878848429522398 -0.14979877557247478 -0.32094397865421997 -0.61917427488772792 -0.18597110968203875 0.075921024753307309;0.20014389105124536 0.010433798836338028 -0.18065382148052325 0.013201870078786249 0.095244749538358167 -0.84628151544933461 -0.22158723971780825 0.21275878677500482 0.006372927426984136 0.72663018841375726 -0.26976782848564229 -0.77468511860454015 -0.40844438250720727 0.34408494522930499 -0.11537014246743227 0.32806564433100688 -0.26381999327623801 -0.33274337535371151 -0.23117818806965623 0.18422237201628858 -0.047799761488339504 0.47833866671387026 -0.15892823822392899 0.37597324267144694 0.10725330104382565 0.19288265762186882 -0.19985671072777114 0.22059734894523697 -0.2422139010068185 0.19715581386871539 0.27008436592538176 0.41926333054673343 -0.61776986885130869 0.44493606878277214 -0.26838109141863659 0.26186995378541578 0.22552142230079414 -0.12857706002883268 -0.84328680546223456 0.04714329479916305 0.14069766020615004 0.11126092617776094 -0.36622233491449002 0.080551830268718358 -0.099921384716950654 0.37988423738126792 0.050502654205009115 -0.26156511065781779 -0.17496770239495071 0.55816816341559639 -0.30833021107733222 -0.026986976756863942 -0.17324321611392435 -0.3074678065044093 0.24382732907401669 1.0739082413017007 -0.58247922712224909 -0.10706071065697324 0.31162968402816982 -0.095283802860259739;0.38578227458271586 -0.015792743044759781 -0.024599894143186654 -0.68666478864994651 -0.16186145403060578 0.068488203705041564 0.014001519725658561 0.077377587505299453 -0.075846983397958923 -0.070013062131554116 2.0673549973759879 0.28084299224118664 -0.18551373612503197 -0.41459048060959269 -1.1940239276698055 0.26931219703503423 1.3050301663739738 -0.13838256309068259 -0.21516481066237597 -0.65505863761993754 0.76701906873418535 0.96012432363986788 0.64450244030469772 0.16477818130486574 0.46781044922042703 0.20901592077817807 0.81282720260177554 0.27405310875618005 -0.042265858127326826 0.89437913690649851 -0.480987292567713 -0.10432688986895838 -0.60453530392833865 1.5581473077974819 -0.89636535640067372 0.54476038888527234 -0.29058939325415423 -0.21345368055180775 -0.29086451598192381 1.7857267352730597 -0.66561682030009128 0.096246532996555945 0.10500115485777568 -0.15837445934943892 0.32322713209939419 1.2599470807988411 -1.3451781157020568 0.017393228523174341 0.31844990708336973 0.010521674557340925 0.43679128063408501 0.57706386127183495 -1.5477214376277206 -0.48839353053183676 -0.11966346622465247 1.1004813129354671 -0.18300989561095857 0.15142348413782672 -0.29779320996951597 -0.62618352919693288;-0.32088448580786061 0.57001375261286158 -1.2592439187013007 2.2545378720881564 0.24972525035824186 -0.97456784054134604 -0.065030310742663466 0.31070086794791413 -1.5921125054633389 2.380943624701449 1.4318898607004833 -1.3106455111800106 -0.1838396854494235 0.15756726906508761 -1.8596091461287734 1.8239350222415098 0.60668708000138849 -0.92158679810607524 0.0027786957739901067 0.34228111040081832 -0.14417231435212849 1.1295590204831996 0.41374198196533257 -0.15808185961601029 0.48414622401638774 0.079165010905836719 -0.3814972733932252 0.99024456844852848 -0.094754885548544998 0.1405899210524667 0.07299514189664591 -0.05085526134331024 0.69486882362707503 0.15713364283057255 -0.54797585143802274 0.67208106777263066 -0.37767622537321505 0.4164455403615801 1.1037878227566476 -0.30879263995859291 -1.0938261380572685 0.28088964728195731 0.0327839694111852 0.17995002073662961 1.4522181873378728 -0.10764634376800424 -1.8696365829216148 0.13150126297954434 -0.050927714897235687 0.21279683626837628 1.955338174268755 0.10605501822387496 -1.8269687238405254 0.28924309008344401 0.60853429344758025 1.2241070166448187 1.5417637635077672 -0.36855998464688022 -0.48037857042643295 0.92461959818424888;0.34504467912354875 -1.0989026569381946 0.050323768739300237 -0.25616273175825621 -0.18532955277688548 -0.14613076908051742 -0.045422301698978026 -0.78762238778641436 0.25587175437418952 0.75496202708528826 0.59356014463884266 0.50556058027742223 -0.36356830991800865 -0.51718764686416074 -0.17270285351763021 0.47097380377148124 -0.71900502763379903 0.39205920077435258 0.16083674914902818 -0.052414463932978057 -0.40952855164323826 -0.35448990123255514 -1.0170980378865337 -0.099255396899654791 0.42301885509892351 -0.31636204362927289 -0.72248510689866696 -0.19537359396596521 -0.36155018593616128 0.42342365813043137 -0.010709852026433967 -0.51852004123182183 -0.18602506875238231 0.90478897234026257 0.21759325914833308 -0.27045058158358287 0.5901324064559843 -0.66094352216155117 0.21976990890444356 0.48267363481094022 0.68102090273876448 -0.11925865190040362 0.1528360358269141 -0.91638951555774761 0.18662642647127048 0.30728304992803951 1.338792435470864 0.13896991893062316 -0.074144640807047829 -0.92912577436871358 -0.13789279424261208 0.28565441385589341 1.1024834268851618 -0.26337471207265006 -0.57303853093505919 -0.46422141079714685 -0.26458341807080099 -0.34735408120439171 0.26358063610535837 -0.055824427485347244;0.47984526427457674 -0.11301295562625466 -0.10939855065353477 0.15455346286614766 -0.1751969871414642 -0.30360757501752345 0.64684941485994063 0.38340161239835613 -0.26919146356424656 0.36339489717239437 0.27817189876346787 -0.059178997752858148 0.67976333695986979 -0.10574166386091523 -0.146543393521298 0.11665135816317346 0.48605172351074838 0.35985964231606649 -0.21974681040165622 0.40115168243057803 -0.20984717295455754 -0.085568086276656116 -0.25925948432454438 -0.026959882692007397 -0.20165121984376372 0.11775209419252947 -0.23131142006515185 -0.554593484329717 0.24774769381087708 0.30948729665250851 0.092637582383127373 0.20016223574734693 0.17024299004014309 0.16339194094243917 -0.11647532798162079 -0.0040789414716611684 0.28261724274190902 -0.064419660491589661 -0.27232074701709041 0.36084343228534665 -0.18213184069759919 0.17288327921246693 0.16145564271767951 -0.32713582781985945 0.69954643248087889 0.21806379239899154 -0.14579757535580767 -0.2873679673344206 0.50970515357342661 -0.30106130068152465 0.42129998685680348 -0.74887797878971718 0.21757249302472617 0.07724062955039257 0.0096912018776509224 -0.023510716249616048 0.08036062980101305 -1.2165626578947073 0.12153693559588032 -0.72533839815125101;-0.2205939758601535 0.46163479992882578 -0.22891704723169723 -1.0451458362894246 0.3622987726927599 0.97297487388273596 0.42053516019028531 1.0537258694612708 -0.72404107702547948 -1.4528940407023747 1.0640531818195258 1.1553460264380704 0.05908640706838246 0.68206510931510356 -0.1492950182697548 -1.2386970788196088 1.6033569109803056 0.59060001846303656 0.010354364484547109 0.14596697408541195 -0.39360373121891246 -1.0770885629901554 0.81438148110624997 -0.46182440384805185 -0.25041917938013236 0.11794515619850163 0.15021316835327628 -0.79147653700033815 0.44103089417527569 -0.85281169567063142 -0.22928977267259612 -0.53334394804837981 -0.39860980834360016 -0.48617348208859162 -0.51083982133345185 -1.1058513775855643 0.063434226187058296 -0.55270085262985758 -0.58963346749794077 -0.37939152812572746 0.15010635376232093 -0.025751883824907507 0.47095541025925808 -0.0080679939649390027 0.33082783097308327 -0.5014502665038284 -0.69870683218279139 0.53242813753247475 -0.15480278494609126 -0.39017960917384303 0.10916680163476583 -0.67169035903756846 -0.84916116629530902 0.87794092300354531 0.0051077362320639582 -1.2871524414481708 0.35939233857879826 -0.4055111023200576 -0.70438842251101497 -0.21191190016312905;0.16696083835498726 -0.56023813249771792 0.19041461428629336 0.52794647209431211 -0.34640093342305928 0.54990252746632473 0.051351766310110951 -0.10712898977286496 -0.059617621340995068 -0.20084552879930051 0.09967922315238302 0.49358523966941892 -0.38778084811182606 0.018777990522970668 0.17536922425752791 0.36010783060762847 0.31549305085412455 -0.012658565243406195 0.0062871807111087334 -0.10321624957575019 0.16436096465936423 -0.19607373533559785 -0.015465904691087372 -0.29912965019951537 -0.26430127839802225 0.26046658491112779 0.4227521485483246 0.45064292355199592 -0.02036942856184823 -0.404607469666866 0.067528710754362661 0.35550409514983411 -0.150874774084331 0.088212083518951892 0.24499308410951143 -0.17155901761338457 -0.22230064831406787 -0.043585312687220018 0.30640263979483234 0.271947765974554 -0.010477519544397922 -0.362449927292395 0.24012692904652611 0.41082374971650193 0.047858452459617062 0.11329335037686725 -0.044871555820674446 0.24006048800395624 -0.112924743482783 -0.21247951466949505 0.062433816707573996 0.42526362861903994 0.51057329407325469 0.30966634972283102 0.14697315446440529 -0.22840602501586335 0.40699174952512523 0.64002789878579802 0.30432484217545264 0.53641376901724747;0.9323151998188004 1.0029619882862371 -1.1200460114251107 -0.75165626875204961 -0.50388969425015506 0.17487111083438187 0.81533935357829057 0.84346132371950899 -0.1580375158246104 0.12789351846147023 -1.2588557378699086 0.95801836242283012 0.94593144913990956 1.0706040452475556 0.48564955833086521 0.47749740250579858 -0.70887698056497561 1.0378405905104195 0.45034317131220059 0.076852325355017209 0.37436626531092509 0.52646523375192178 -0.87537911142313751 0.78469082951986746 -0.16660819527696447 -0.33657423295101518 0.12747241675422169 -0.050762537068621313 -0.42203617810052202 0.040370512840630077 -0.98890940418986506 -0.62554626383609646 0.24531017882065387 1.2292394683196461 0.41229890901044874 -0.075744264373375211 -0.27000347963370475 -0.63888270436974948 -0.37212440494021837 1.4647568007850031 0.2453241917636175 -0.69495692785963581 -0.11909803307339502 -0.75074188929812413 -0.17982189642687552 1.1741551378085333 0.71650870786967846 -0.25142499732582962 -0.4932090730281386 -0.59736359184041443 0.25469933959755348 0.34030792978720215 0.89211059206984367 -0.37235389355031751 -0.77822622828485566 -0.17425572807309531 -0.48445019616453655 0.29529597353816861 0.44051014867922261 -0.634628918857854;-0.22740600021806026 -0.2480332510758646 -0.6849102015103713 -2.4144540371129035 0.75681166357968577 0.80723613980914843 -0.0095804609807974769 -0.023447516961260108 -1.4203479355095969 -3.5665240845931123 1.0283055098852036 0.36030211933853601 0.038309521992567812 0.080053613344912178 -0.37607267508075976 -2.4976664334171059 0.99018485884128271 0.96452151761396265 -0.3143753418894053 0.32296882793882825 0.38985273946312232 -1.6723887717563506 1.0538374963548316 0.46824912142665032 0.34822840102842845 0.10968064977295058 0.77681737546720919 -1.8824753425256338 0.40525880737420761 0.15124017707720261 0.15345154677552833 0.63569382571094979 0.37812192488920138 -0.018608240055269329 0.26396069117169912 -0.65793061249351714 -0.45150197370636375 0.26182258239909673 0.18121503826055896 0.65435801442786601 0.30933328621838302 -0.18660591456978187 0.36219924061927739 -0.15381615570983018 -0.14268306707799175 0.71011522258176352 -0.079811441719939105 0.32123021162620086 0.084478626152761499 -0.65335724476521861 0.28598786782803515 1.2440625118729436 -0.13712092426364669 -0.1393481839882755 -0.11362779416482097 -0.34033077138317869 -0.11455596357795761 1.047577267703752 0.089172710253536555 -0.50288342264569963;0.25143890093684762 0.34458676738347038 4.0881545103336929 0.84910477620519731 0.1919731727052312 0.64201669805660611 0.15199181051245653 0.16161579234610426 3.0429356036193478 0.19268406183250561 0.071891748994175442 0.82865991823912688 0.1035556689177615 0.32018196757032019 1.3521209977805193 0.68600743586612278 1.689768908243521 1.0472635879169871 -0.059615274507142574 0.45284460127571069 0.51141534188184534 0.61552792318219351 0.58035877988622142 0.10812256715632981 -0.34629888644014795 0.25390622734728802 -0.64749735179557733 0.20941315828223286 0.54802889938087807 -0.40962700472222269 -0.094523762426346636 -0.37525825624231018 -1.3469377178970796 -0.64223135441100665 -0.23720875484829529 0.21158131479845799 -0.64584652756648109 -0.42156319012927579 -1.9118193230290468 -0.91799539830651555 -0.30982781414102895 -0.072072763086453329 0.33996728305205254 -0.16101024906506362 -1.8276897268943417 -0.70605101201744003 -0.87956478358406476 0.41831777211305704 0.44944962062483734 -0.69817131513987829 -1.8519035242900528 -0.47783363108122329 -0.50605651543575991 0.075137121422528735 0.28619569027842318 -0.47315921370404296 -2.1286208912075031 -0.70643109545169303 -0.49880649879653377 -0.21686940774143398;0.30901201396501926 0.022462329211312682 0.11747823848990427 -0.42339767703712594 -0.075525903856297427 -0.34875721749545591 0.3910100555588098 -0.28314695330264755 0.36321510804991175 -0.10001149815602937 -0.052006789343375784 0.065565924710446657 0.14549628872872913 -0.36383554309044958 -0.13150923427165589 0.089766876609709972 0.10631633000715357 -0.075768731535533693 0.01458965653871459 -0.4954545911683137 0.0013643566564563261 -0.12687059365367917 0.43882265476798465 -0.077494847831983085 0.11149267019562882 -0.28216133981894542 -0.098806866729843734 -0.57200380230583725 0.50005223836592427 -0.29104414003367929 -0.31485431630371519 0.45675274675278366 -0.10483978476259274 -0.10566571837016556 0.18624940292254144 -0.054921021136698389 0.19833273547550911 0.094477745518428857 0.081741926825811037 0.2427735961533799 0.26452342915744848 0.109105514651149 0.61406667125086289 0.60155663345243215 -0.40647394787520341 -0.30425869886772816 -0.31404486669293491 0.18894885026445504 0.50974556663580251 0.097168581899128581 -0.25857852109269991 0.43313875123757473 -0.48291600269307333 -0.085704143706033034 0.46919785126670899 0.38888878507173763 0.38825277286310611 -0.065434016483096283 -0.31553480078059182 -0.21573116180199253;-0.22221869210365253 0.032293763342803261 -0.39983020852369366 0.0032882532769118087 -0.53573992760003453 0.17589668125344404 -0.1265805704821214 -0.063684766218215422 -0.062940978396004876 0.6886305381900828 -1.6019602433754583 0.74454738195927328 0.59375028319243794 0.066230573819068217 1.9757931433447375 0.72668118374578028 -0.25885371664105028 -0.36777068551144221 0.26823102312002789 0.18776509404329159 1.5504699015100247 -0.28022868032390741 -0.1121979305483547 -0.30645316141024576 -0.36129002982146602 -0.26597479312419486 -0.13278520631589241 0.2061597985159293 0.03320680739611085 0.18050809286909864 0.17932891202610099 -0.32117139501892289 -0.73683419957022267 0.507267573752889 0.087579668556570553 -0.084914501092247949 -0.14918641224508516 -0.15753088628449935 -1.2267354589292441 0.25212425340771827 0.27804563260681553 -0.42998879589816502 -0.40578866072345621 0.21358090959061607 -1.4204670050964816 0.0040770142501869592 0.14713021734306553 -0.022990684454868487 0.40918696506576757 0.23385941513839506 -1.3414177704068599 0.49797436057135425 0.25943986669448199 0.035711944961930656 -0.169497173763558 0.53435731106917173 -1.8063170657272822 0.31276595490962755 0.0037103655580061966 -0.27319823331675147;0.21003531592770233 0.23938064228374764 -0.087055846536019332 0.87082997518049721 -0.19936304115093201 1.1527248056839576 0.046600583319050821 0.72729017671760443 -0.2199714141567628 1.2779943088437788 -0.87709996276007995 1.343548246415186 -0.10614568630141145 1.2123777866768704 -0.55804463824510298 1.0941451841238894 -0.90395697507366435 0.97575054303204412 -0.31837345405451495 1.2843421092477958 -0.26187985698215255 -0.11006193375636106 -0.76696194592982514 0.66880672666210628 -0.60315239403566778 0.99129828939776765 0.52551249328465333 0.26122425374497921 -0.28899949155626942 -0.30641363063956534 0.31930156761372713 0.27775945830506071 1.1626030264901255 -1.0333980342959954 0.78218961710086687 -0.17332884441409152 -0.027952362970759655 -0.11271063730484353 0.93504986618853048 -1.3883978156895769 0.46506747840436069 -0.28819279235393996 0.2393177828024996 -1.0159935635683586 0.42937931045462996 -1.2909824426243524 0.81727044383593395 -0.42605228280151741 -0.089435372553061207 -1.4762366193481924 0.47199112402708349 -0.9331337817398031 1.1973258528576132 -0.17739372553664309 0.33838240925464802 -2.212359995614567 0.16938091043944575 -0.26976163417028554 0.32044012970415359 0.17809886306528952;-0.84988396448027803 0.36713073819321818 0.12244351047868514 -0.11568719101847094 0.068692353432173295 -0.26246682650175662 -0.88388543872700953 0.14224619573140926 0.079491149291949503 0.42836172880034656 -1.2143259066321512 -0.058809706450069027 -0.03612876243542662 0.46640474733690607 0.41801908984366842 0.34250145780976066 -0.69823174562736989 0.22656993624501301 -0.32059108826225902 -0.18667276723847676 -0.12170977172139354 0.066381380797680023 -0.91272105126894998 0.13334820239777395 -0.28342088024875084 0.14915154195267569 0.14918188088380263 -0.26783057542835531 -0.43313584125935439 -0.15040550746437617 0.27286962411045862 -0.082469283694618783 0.21526530790883761 0.04243528432854194 0.28455161737814505 0.22423005250645867 0.15384025280256824 0.24493009586104739 -0.024017915100145511 -0.24521230242100617 0.15231206071961645 0.31086994273501978 0.011627181096001226 0.40894866436590288 0.23724459840857995 -0.20273981353018194 0.82051343399355614 -0.044430081608732089 0.022107965779111931 -0.020720446010422604 -0.17509512356278184 -0.49039082969809528 0.29002244907703945 -0.014945482856018554 -0.35866741050797157 0.038627816440661031 -0.27260347253345246 -0.68766372215814331 0.17420345025756612 -0.78950995684539416;0.28846626186527485 1.1894584106774644 0.30471479612812957 1.2012272380142495 0.016088884594221965 0.68381455603137453 0.18530231154763757 1.0983684819088586 0.32761348288904835 2.1034123151564073 1.027102886518884 1.3218730818804578 0.24355549213249064 0.64521449154264765 -0.13078032439528198 1.4003679339375501 1.1945325818104862 0.3256275565922041 -0.34431253943376805 0.27597893722844935 -0.38274057558900726 0.64616803476790774 0.39486190291617956 -0.32778068689915413 -0.004285138605486483 0.29397364479101462 -0.5001684695862485 0.51671551121085235 -0.23680216253547884 -0.35539370529870917 -0.25200745347534986 -0.41668398233457127 -0.34106390207759957 -0.3449312757999714 -0.68398896060423953 -0.41329946883418861 0.24963831009293228 -0.32518785306532721 -0.57715103056182271 -0.51547858322115614 -0.97210378757269533 -0.47617897332310299 0.085007099430749203 -0.38722551879784256 0.078012675937082138 -1.1745884839006122 -0.9689266832057144 -0.38099398439805077 -0.39930098150937093 -1.0954661534587526 -0.42554023458847362 -1.9091304356850574 -0.85406061004981293 0.054079127956011414 0.077357714358728083 -1.5090930679313097 -0.063235694298712647 -1.6761902269742248 -0.80972662544751706 -0.18647643773103337];

% Layer 2
b2 = [0.073648516912994094;-0.089383892765008022;-1.1077336051771416;0.65282803033042924;-0.5612492769929589;2.0174382015484413;-0.40279001778977824;0.3631282222435962;1.088438442220474];
LW2_1 = [1.3728189962797321 0.017372452723662894 0.4391822094668974 0.58949778606512437 -0.88231033689699867 -0.54220052853210188 -2.0290461188237061 0.13013116010875952 2.2581020131082292 0.65548565865808484 1.3033040413338557 0.59201490950838731 -0.57754052747190088 1.2867359388996193 2.5695932891926541 -0.52482005125124842 -1.2337274710166244 1.0571113320012082 -0.20584151172805826 -0.61882795212437536;-0.85270667479006879 -1.5940660975979413 0.71826979008471448 -1.4091705252997075 -1.0433368828799148 -0.44783361496842167 0.64626559903248004 -2.706491877590071 -0.67623491771792488 -1.3869317439887376 1.6435627311883276 0.25851325350907844 -0.10656333780047117 4.0824849762802105 1.1947292011424693 0.2587612971479627 -0.99921267685284709 -1.3151502260082735 -0.32199090511822381 -2.8859541288402903;1.6190787990552111 1.6944322560045748 1.260437058622593 -0.12016587597354132 0.67418000727839233 0.15903865521847751 -2.0804723249227624 2.3940272357756216 -0.8982822112406107 -0.59548376914940415 -0.20548580258654131 1.153269956037825 -1.1565127342213295 -3.3477276869283106 1.6579431937786189 -1.5161808125752354 -0.58121385929683211 1.7064683152743023 -0.24396874710560315 3.0343754725503285;0.79249615791359063 -0.52742690286320171 -2.4935212933039579 0.64095372769106085 -0.45243174805192082 0.79547720755000495 0.59863593511045021 -1.1608910697834036 0.60817038088807451 1.4603176465880772 -2.1864632965987041 -0.64077898083126561 2.3004298357243433 -1.6560573082885166 0.50672871269774067 -0.35927862305980296 0.61356581584565772 1.8258222008491241 1.5750772450793908 -1.9477538143696183;-0.80842128659831047 1.8721994723275777 -1.1230731232889855 1.4452455717892905 0.6659343398840103 -0.83944800431781252 2.3158715513963948 2.3378852861471002 -0.64239006895317718 0.015989465387978762 0.49096983599960142 -0.073698224659046616 -0.48505712826850783 -0.27448979482782621 2.6573487267613731 1.1803230064268853 0.77358523307025695 -1.1769748217649152 0.009674372098750569 0.81751093409191466;0.73934933510306688 -2.1088602104822436 0.39636526457044347 -1.4369499725637902 1.2466677892298661 1.5063554692039551 1.9823565267696204 2.6134409282648314 0.53833928049792434 -0.54778715094003583 -1.7939220497480139 -1.2270593269932113 2.1928326728091512 -0.87615158610598176 0.35288789399475196 0.38305250661919299 -0.57951889710672932 -2.81707232030324 -0.4485722204283511 -1.9438357369260681;-0.96262730546856723 0.57811907070983659 -1.5886652715723792 -0.26804286066684191 2.1487873024298287 -0.50595880266322169 0.24427393140826129 -1.8477268299604015 0.044033807919761983 0.2715957512169147 0.70869975374232674 -0.01543773985788283 2.195478859701236 0.23223560814171862 1.1063040248286671 -0.81123399348657099 -1.3770312932083164 2.3260037333838239 0.95222688120717769 1.2045751587759297;-1.5048253012158974 -0.82597770413347149 0.0054826079891448568 -0.29027864018311311 -1.3728201620702105 -0.40078730254151379 -0.61660923661582856 -1.8984645304956187 -2.0380944066355724 0.45525314168540509 1.5284234376112174 -1.5984423046443954 -0.79162640582780808 -0.86120553127932753 -3.7026429475983966 0.41133819488158829 2.9786096470461372 -0.18211366668271189 0.8083638579811907 0.90843411043389799;-1.8462212014517998 1.7203989448269008 1.6630395401907716 1.1399359142213867 -1.0920750362292797 -0.18715535046444579 -0.097579126607531638 0.11192683810202564 1.914389434361611 0.70081451059482291 0.012128981575400453 -0.030173256708907373 -1.0077710272297207 0.38646212236233474 -4.5150303856473206 0.56700520565770729 -0.26490331599202527 -0.27748151157229806 0.34440478192695456 -0.22817517632947681];

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX, X = {X}; end;

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
    Q = size(X{1},1); % samples/series
else
    Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS
    
    % Input 1
    X{1,ts} = X{1,ts}';
    Xp1 = mapminmax_apply(X{1,ts},x1_step1);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = softmax_apply(repmat(b2,1,Q) + LW2_1*a1);
    
    % Output 1
    Y{1,ts} = a2;
    Y{1,ts} = Y{1,ts}';
end

% Final Delay States
Xf = cell(1,0);
Af = cell(2,0);

% Format Output Arguments
if ~isCellX, Y = cell2mat(Y); end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings)
y = bsxfun(@minus,x,settings.xoffset);
y = bsxfun(@times,y,settings.gain);
y = bsxfun(@plus,y,settings.ymin);
end

% Competitive Soft Transfer Function
function a = softmax_apply(n,~)
if isa(n,'gpuArray')
    a = iSoftmaxApplyGPU(n);
else
    a = iSoftmaxApplyCPU(n);
end
end
function a = iSoftmaxApplyCPU(n)
nmax = max(n,[],1);
n = bsxfun(@minus,n,nmax);
numerator = exp(n);
denominator = sum(numerator,1);
denominator(denominator == 0) = 1;
a = bsxfun(@rdivide,numerator,denominator);
end
function a = iSoftmaxApplyGPU(n)
nmax = max(n,[],1);
numerator = arrayfun(@iSoftmaxApplyGPUHelper1,n,nmax);
denominator = sum(numerator,1);
a = arrayfun(@iSoftmaxApplyGPUHelper2,numerator,denominator);
end
function numerator = iSoftmaxApplyGPUHelper1(n,nmax)
numerator = exp(n - nmax);
end
function a = iSoftmaxApplyGPUHelper2(numerator,denominator)
if (denominator == 0)
    a = numerator;
else
    a = numerator ./ denominator;
end
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n,~)
a = 2 ./ (1 + exp(-2*n)) - 1;
end
