function [Y,Xf,Af] = myNeuralNetworkFunction(X,~,~)
%MYNEURALNETWORKFUNCTION neural network simulation function.
%
% Generated by Neural Network Toolbox function genFunction, 18-Oct-2016 16:37:10.
%
% [Y] = myNeuralNetworkFunction(X,~,~) takes these arguments:
%
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = Qx60 matrix, input #1 at timestep ts.
%
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = Qx9 matrix, output #1 at timestep ts.
%
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1.xoffset = [0.1875;-32.9375;-18.625;-12.64;-10.77;-3.29;2.1875;-61.375;-53.125;-14.03;-15.75;-15.48;0.0625;-74.625;-79.125;-14;-30.52;-19.09;0.25;-82.5;-134.9375;-21.97;-13.18;-26.04;0.625;-83.3125;-151.1875;-11.28;-14.14;-20.69;0.125;-82.5;-145.4375;-17.05;-12.69;-10.06;0.375;-81.6875;-140.8125;-14.29;-5.37;-4.2;0;-80.875;-140.3125;-4.67;-1.82;-4.07;0.1875;-80.0625;-137.4375;-0.46;-1.95;-3.04;0.3125;-79.75;-133.9375;-0.68;-1.25;-2.4];
x1_step1.gain = [0.00557103064066852;0.0344086021505376;0.0435374149659864;0.0812017864393017;0.0854335753951303;0.0904159132007233;0.00559342772242615;0.024024024024024;0.0217539089055065;0.0614250614250614;0.0664672648720505;0.0570613409415121;0.00556909154194222;0.0209287115761936;0.0134566862910008;0.0550357732526142;0.0487923883874116;0.0558815311539536;0.00556521739130435;0.0186697782963827;0.00945347119645495;0.04;0.0730994152046784;0.0615574022776239;0.00556909154194222;0.014726184997699;0.00882271850013786;0.0410930758167249;0.058021467943139;0.0423190859077444;0.00557588430040077;0.0150730098916627;0.00915855752718947;0.0570776255707763;0.100250626566416;0.0638569604086845;0.00556715379262352;0.0158730158730159;0.00939242735544467;0.0774593338497289;0.203252032520325;0.106382978723404;0.00557103064066852;0.0161290322580645;0.0095040095040095;0.272851296043656;0.385356454720617;0.169635284139101;0.00555941626129256;0.0169491525423729;0.00968523002421308;0.921658986175115;0.584795321637427;0.506329113924051;0.00558171986743415;0.0170122275385433;0.00987349583461894;1.08108108108108;0.597014925373134;0.490196078431373];
x1_step1.ymin = -1;

% Layer 1
b1 = [1.4051605286084996;-0.89496125652547165;-0.85560334229090296;0.65295126664525172;-1.2895890469583184;0.39462663703323164;0.58076451889274883;-0.027083626988291334;0.38486866712116935;0.17650771454301564;-0.38017812339842194;-0.74685547392793661;-0.38426386380762806;-0.3190164879928245;-0.35056432788766784;0.39433828209643873;-0.37756221081515601;0.3908607175700089;1.2805313689945699;-1.103725520095783];
IW1_1 = [-0.17363653367404042 0.29937886112287293 0.044537064399496444 -0.22647240196844237 -0.88986205245808658 0.18843779079651946 -0.14830353144108349 -0.067026224090892497 -0.067338867217626552 -0.21078438837185162 -0.57772834273376394 -0.21992951956842227 -0.14294689866623833 -0.50608716152148536 -0.061917051035788907 -0.25354916967995389 0.36442584157679792 -0.5639511801714916 -0.015616137898533087 0.082398465370538979 -0.10170177634468471 -0.42321752361016646 0.68954118743787252 -0.18690826341028277 -0.028446317625074012 -0.107208415412012 -0.097102760298368826 0.21962547848087477 0.056941200118855756 0.0094895723214490271 0.044313589448677054 0.32889081041295876 -0.201483699608937 -0.32539680278051514 -0.35986400825232612 -0.13337392116341024 -0.25585732127189936 0.043025433261907067 0.23486215290169002 -0.064824591534653461 -0.60400862377961473 -0.29313777948295766 0.26013928570465322 0.23908019561072433 0.41942994482316459 -0.0060948082891063918 0.11541271107497195 -0.33696348532629627 0.44167485724372291 -0.12433886306175918 0.18726653488867043 0.53001872839020658 -0.32346266642436355 -0.1249444062084439 -0.13695629003566032 -0.13330380678501214 0.055284441854589909 0.042562660425808779 0.0110239528687077 -0.39684152924395039;0.38440972163745762 0.19199813406785757 -0.67410433278087378 0.30063884654266099 0.20592645638497109 0.034682806376562292 -0.23222035087983342 0.11574359575235542 0.020246246000150469 -0.038620988548638033 -0.11081945875156173 0.38023000806286866 -0.1282416863444103 -0.22486985436292098 -0.14263968464157281 0.17252770414485591 0.17212588080227784 0.15636856370822083 -0.22249980848139481 -0.10004023233640315 0.053415625567609898 0.18135491547241617 -0.35198569379597344 -0.10548065458718557 -0.073572202980428714 0.009569099834325934 0.17155408543637457 -0.55958009656439489 -0.25355552579287449 0.19440879649404266 -0.24174655339582593 -0.54257066770790163 -0.13690883720872912 0.093098422158217453 0.038055598361072036 0.0077010464145517432 0.16863630054241721 -0.11753466005811748 -0.052867433144509243 0.1073434705549276 0.025888188501233957 -0.0015082498918307123 0.15727731873295769 -0.29504984496988884 0.13994522181811705 0.31766679825589689 -0.041647081906345126 -0.38674347251606139 0.2897033144805517 -0.33457348466580306 0.095098076483564664 0.07135893743220903 -0.16627667455834891 0.12464998602619363 -0.17701851698846829 -0.59756797937426942 0.10570831375344864 -0.36419400005772684 -0.022124519470591627 0.23884430511334309;-0.22407859408936404 0.025871935589689362 -0.24962613102281794 -0.085285970512951753 -0.15825095649345647 -0.13481991494900411 -0.37199685148967448 0.40337946957561793 -0.21465231127088003 0.51699110897857636 -0.38473728251414396 -0.20774169125933514 -0.39247453446625513 -0.12131321483830161 -0.13023867855033933 -0.67763364456633368 -0.21589911511224427 -0.46143976747809812 -0.29906278961044874 0.013915503017041789 0.0027557509912255968 0.025004285807594239 -0.17982572205427944 -0.1350571234235412 -0.087367967879326824 0.39589281211491406 -0.17417037667716165 0.083460110189018721 -0.058369497770627082 -0.22128677775482319 -0.0024587905943304067 0.26157025092383934 -0.25081245415786207 0.11214962491109044 -0.21714836235043161 0.24764553025395059 -0.20262878405889917 0.15092571044816588 -0.010310532810870049 -0.11190019177042554 0.30375124302100981 0.1365904353321131 -0.36844425164081346 -0.095677879609020938 -0.11039165816971899 -0.26632875891927182 -0.021378311492605766 -0.51081261575864412 -0.18457109594230114 0.065925149561545202 -0.14859424959374545 0.46512344350531715 -0.26381285662704912 -0.21409083259707459 -0.46266757110865364 0.34824895452078447 -0.18423164148719046 -0.13857905422456726 -0.37681708566977423 0.17143355132171403;-0.0088681074955078657 0.26795031177016632 -0.67436314874252734 -0.36451782252264414 0.56801961687105407 0.49077427011729813 0.157275612411722 -0.2378531210925679 -0.34518926568149955 -0.80135056451848496 1.0083136139642876 -0.034461528934121334 -0.40695815109751643 0.35598346569682743 -0.21270777264656049 0.013408186584054375 -0.36376305065909975 0.12051981565062098 -0.53264690147503146 0.42652659424920758 0.082385644100757313 -0.23033820714405143 -0.69783334919166362 0.10510347665221027 0.055026589003224435 0.334249376891328 0.036617480344850614 -0.27172301375944358 -0.33859523233293026 -0.14825075139686705 0.56044746710097193 0.1861826396170084 0.13709033110184202 0.39692382641420143 -0.21164596207367237 0.091507873306750628 0.073051056869222433 0.40854382564433211 -0.33521402420449248 0.084113984059127636 0.404774438704123 -0.15940257769783764 -0.20734673940496851 0.18611337602582309 -0.032643887833008062 0.12797422874425263 0.34305606601163291 0.041519263739091476 0.0092014037261736389 0.24665234584037954 -0.020049232357953813 -0.10622443222777023 -0.074453044381553271 -0.49131069309870717 0.30936089458964644 0.12896787282558514 0.096921419635090433 -0.051072129580524997 0.28494422895179206 -0.5121603791984255;0.2836630446069065 0.27891516519074699 -0.74787782959468996 -0.3106736010478986 -0.059312612421995335 0.51188236112791041 -0.22162011968830042 0.0442264501826794 -0.597569579374574 -0.50697394112503991 0.2674564354034899 -0.048269601523036054 -0.10090947859636365 -0.15048000951551938 0.35766163202068452 -0.395748271143193 -0.34910752040258947 -0.097572403072763464 0.055479891123970497 0.3071981437194391 0.55366379728373472 0.010428148577991129 -0.086102885742749491 -0.5802575550017528 0.18053760338473088 -0.021627634235272485 0.61398231030989459 0.43934696868636974 0.11478369090089603 -0.090266659282343939 0.23457313680579195 0.14608621201123978 0.63355806888541966 -0.11497455063343337 -0.43135572211572754 0.29136022439127801 0.065160521654376982 -0.17294114750207829 0.19954929069347882 0.22666240131594773 -0.12090090700070508 0.41276903919854113 -0.12507364063153001 0.26708563311809841 0.48085243667008237 -0.3372649907755792 -0.075510405031637001 -0.0084105474043954312 0.0032149741313043452 0.30073866718003461 0.48729527153842489 -0.15382805692429002 -0.28162279371136623 -0.027528836336922168 -0.20423900047330362 -0.10335910009566006 0.57515496718563364 -0.0074279136479406069 -0.30543337917424085 0.031426912488741611;0.0034943636097098957 -0.33093108477969679 -0.75326432238885044 0.47605354044837084 0.73305473556233247 0.64856176581722969 -0.18450964142651638 -0.067594383023624527 -0.25475167405581289 0.56128704773038696 0.93154440287249674 -0.20762438247456974 0.2505137985364671 -0.2952244497055429 0.36074328397575511 0.2083490557818099 0.0275998143729718 -0.25069652791058145 -0.22217156169431704 0.083978810413641788 0.38694244532862171 0.38643549434895375 -0.67717136784554621 -0.54057322177483569 -0.1450248176085949 0.11390895787809582 -0.021030615416403248 0.25514876077527221 -0.74798024245365236 -0.23101876232486165 0.12868901966143576 0.010918430549164235 0.39140172990602795 -0.26067218655188434 -0.50276091981284299 0.23066171807994987 0.22691080418343654 0.24643839889034727 0.37035270509819174 0.21489837315850085 0.460151036857674 0.28259957363632399 -0.097591824145425901 0.16524786460345631 0.28284403435347427 -0.1117982576762685 0.22799578178582861 0.2734836157076122 0.20216033807623401 -0.08492946644848047 0.1029165911176755 0.6241482573188053 0.27968159232900786 0.1132704004779643 -0.10426691775021286 0.43953787445502462 0.40602774867432251 -0.24627625966715222 0.47690537247030668 0.12806559842921897;-0.21603384290334557 0.41393345959298905 1.4758610757796164 -0.33482012374956172 -0.74250958105387166 0.20629137617670856 0.33196480656956523 0.29708567472067698 0.33699466761085356 -0.38063526906243039 -0.94731162966389282 -0.028659486050002573 -0.15254960266127648 0.46563534588576716 -0.21011372893065286 -0.17314890083433471 0.16296947458362052 -0.19904028744412333 0.24968547161989235 0.021887880148370245 -0.37433254721865461 -0.05967730555398254 0.35701052876825695 -0.32677009221565606 0.1211984036074855 0.60828611416647238 -0.19747168456004299 -0.0083748934312317495 0.23043361258629094 0.23192155391898656 -0.23187869383605964 0.64628234501362625 -0.1029699657456951 0.44400120772874319 0.042954838796007443 0.29211772439438943 0.0056173685691882479 0.65272556417733396 -0.37676895306267749 0.34627123316361041 -0.14282740856267956 -0.0090735146174723384 -0.22320259638893009 1.0362938395397041 -0.45854307635375696 -0.25890924062041781 -0.11010635287770605 0.1586598845783464 -0.010935702799180975 0.95464940773736739 -0.41328650708140785 -0.28395808168859665 -0.055621325019231879 -0.60694446682115655 0.32119684993534459 0.54258100683844546 -0.56085170882112667 -0.37518735859207525 0.072104583562883989 0.10535841745311614;0.13189563715473518 0.55187695128643266 0.48475617531670256 0.1783870759066305 -0.17062744881712197 0.26005943857273867 0.28271285063519663 0.45136973651446982 0.61934911272910853 0.1854130220353187 -0.21987435742299408 0.44161727658395961 0.088011894650687442 -0.27950181007753883 0.26822093247262119 0.4984077241517138 0.28962656628911437 0.12184944223402391 0.14468059805240913 -0.56581138501066275 0.067395203535710282 0.27162160300664501 0.0171384043308851 -0.060376809734522717 -0.21738632549680073 -0.49896862198946129 0.19381627312970223 0.26210886634213698 -0.33727649813555521 0.2809028250303891 -0.31235094877948022 0.027935743117788778 0.37778882660820035 0.25703099807972529 -0.22605035969896603 0.32585251733432263 -0.17810693416963574 -0.046522333746036246 0.029250539247318068 0.32010927826055263 0.50453878939472652 0.42360063674760839 0.12033053450801452 0.12517157999810521 0.25798782829269951 -0.22827804231412149 0.32093397834471815 0.067788205059184703 -0.02902688635735098 -0.048060656786165466 -0.075510214340875972 -0.28912306681211569 0.0071865748800841248 0.37963688425597941 0.13257261497947195 -0.015883386399502871 -0.055363474255625642 -0.036155799717750153 -0.08103974374824055 0.20576225629202904;-0.18661149654592807 0.35472580824578709 -0.055635139938104324 -0.30144610901965291 0.086311020786840012 0.071512965705903223 0.06175958326303832 -0.012360265421413729 -0.081191817287371862 -0.70004751184242431 0.25141978771891949 0.65717906841986085 0.020586713022678029 0.15516774311705456 -0.15262776240201009 -0.55603542941203743 0.42736091888148592 0.26128295646060784 -0.16218125982791071 0.2622130644871169 -0.018719281946379059 -0.71418223017439486 0.011279664176022443 0.037461213075671559 -0.029387129260011892 0.2409538769439335 -0.27738253568826454 -0.49900574238625589 -0.040457935530740369 -0.20513137305477844 0.21675923509383033 -0.47830515096485654 -0.11846142633772758 -0.10934471641250069 0.36539532708198852 -0.2645403872830468 0.39080228261415162 -0.46121958818239767 -0.44873935113961955 -0.074943090565303669 0.12110017320143893 -0.5514923958843595 -0.10618987530503984 -0.35345804828582872 -0.49527953351932386 0.11694087130685062 0.090109365191301763 -0.018552689491253348 0.05589772637770786 -0.099343326007405364 -0.1225436445418302 -0.14341259707760176 0.38336306069157744 0.18693682040968876 -0.047277779878277887 -0.54369059740750569 -0.43232607503771003 0.11254536630970499 0.37269502328318588 -0.018803818161928981;-0.37245719413323797 0.38343607659403867 0.04427204993877485 0.48906750986486375 -0.15936450479013492 -0.56358403973394866 -0.07956447568861244 0.52349207750957938 -0.52574998903836467 1.3694213623935108 -0.31221739440737456 -0.69780580609119036 0.1888386827470927 0.41716193385314343 -0.18410820660726304 0.1117101647407544 -0.1344045041978062 0.11504642400480065 0.13686030113269201 -0.133767356802689 -0.15861224622984363 0.4645459596140295 -0.03057743670906847 0.44387940231321166 -0.046561034045591997 -0.59583539755581594 -0.59765895953401638 -0.56874813623627485 0.080404451974541963 -0.19722743566139125 0.2352125298433683 -0.62477974582178397 -0.33402866842036161 -0.73258888104980002 0.61115315205117349 -0.10093973177739027 -0.16694619628333918 -1.0461325506202455 -0.16845226686744957 -0.035793940234646243 -0.23392505245453304 -0.38696373683862906 0.10769703528168736 -0.81698367995272503 -0.54418945570066668 0.047797341847741238 0.1528938172097376 -0.17320531439119921 -0.14826953115660205 -0.60422256414247832 -0.66406908408766796 0.32233234970582708 -0.25005472621432273 0.43314209454958502 -0.11095166719685953 -0.55480033370813975 -0.11058899405777853 0.057205780025733732 -0.49499548149418665 0.52026193932517184;-0.49320702522774712 -1.1045624796418319 0.34141902939072205 -0.02165611685186488 0.56540112920463614 -0.476286640792354 -0.26887710013409744 -0.61827713403373408 0.039791461148777428 -0.16683468048016351 -0.0082590649007349293 0.041566513083901385 0.2358839458325763 0.19697152751598168 -0.091459015849576872 0.4674455279239958 -0.37266501219628151 0.51091005348644047 0.095896779887201217 0.59849321560621549 0.12762830334642206 -0.097928430761429333 -0.25826787167873361 0.36192653432275945 0.084675507256921662 0.25209080028479963 0.2044496364809591 0.19580430792684422 -0.149552002299528 -0.29276775754109174 0.33896660334703316 -0.090021723412088001 -0.34789779527059778 0.24871709629753508 0.25116190778562142 -0.16545704497807148 -0.21615364472941226 -0.11773034895473709 0.17434881643833691 -0.31945791294652848 0.062634878717276507 -0.098313237682476254 -0.14961514014572158 -0.23981512991034684 0.029630440552213429 -0.35589414591586538 0.31941539093288784 0.47370318739208872 0.28620054080249535 -0.36067800847266057 -0.25057948707196698 -0.29834950660249576 0.27381490713357809 0.27714974430639505 -0.13732322600873753 -0.17255066556131599 -0.18173240302631366 -0.050289725845991284 0.065344959986821466 -0.11624174971011564;-0.011439242784504972 0.91078235781255301 0.0099839073008450713 0.79194850227622215 0.25040339187327243 0.41439860883451191 0.064165735666990062 0.59497503688534059 -0.23790752752062538 1.3084187697416372 0.33259195670425745 -0.34957184926260548 0.21179826012240888 0.41177688888574726 0.54314405042697056 -0.34430713640634603 0.068553803541404237 -0.073998909987185293 -0.059777762419829406 0.3065227903894524 0.34148713167788841 -0.38895894550454563 -0.54799858750762376 0.51984489141222057 -0.29379319403327003 0.33700188053234148 0.52650690230454322 -0.096120764251357321 -0.44737234793572328 0.070554715350197819 -0.12301454545965954 0.045239267437096276 0.72168480684118086 -0.52254165705684807 -0.15696236456059698 0.079644350155398821 -0.11654121641837044 0.3507518575331719 0.28978592957285132 -0.34724918520146869 -0.12548498403309674 0.59425567374795818 0.26897330768077599 0.41642798885181076 0.68889647720092884 -0.50472743774148843 0.16224922447839013 0.30503248846468722 -0.011483229797045132 -0.099569913085422138 0.43464873961081463 0.16758532527475967 0.28840665047129177 -0.022393361175022275 0.14177174250415978 -0.038486448594104959 0.84470451170885807 -0.05475806455424604 0.40517760207825598 0.14787620743382213;-0.058783750127725382 -0.065224390994307366 0.62544190302377989 0.48393406078342349 -0.52605180943956065 -0.34734296831585665 0.17452912649967375 0.018412509590011984 -0.18188607794046777 0.45258956908070908 -0.93980490929365346 -0.27219171213393628 0.026125089025927285 0.59484815137926539 0.094161971699279048 -0.2196487823103575 -0.10155578702146714 -0.10019084582563891 0.27038106261703576 0.24642923600381708 0.013990240026353446 -0.077684966586043333 0.68645233250556836 0.68435104393436852 0.25892435708831701 0.55913392505085957 -0.4196568752046077 -0.14118641187700723 0.61513599804779562 0.32820050193414418 0.017958675599451815 -0.045324954873376899 -0.42760639886824742 0.0049861356249201686 0.095884212139396685 0.062624073102666628 -0.2833858959597173 0.4083961887007293 -0.05183611916736721 0.10352984651938882 -0.062774084552828083 -0.40302019335703393 -0.082012716664118218 -0.043678264382526408 -0.39832077258214704 0.067542899224847075 -0.086424951398818797 -0.23504706889985771 0.0037197181289598431 0.11596998308230291 0.15256520089247455 0.31329729479485274 -0.49538833122964498 0.011838727397407225 0.060182010283476327 0.18009769746568649 -0.11843371735449758 0.01761758610682037 -0.036920751175767451 0.076501190544799924;-0.30960402268550258 0.37305985866649066 0.087185287689590663 0.28970016528702414 -0.42815076909878302 0.29560811478803428 -0.18163859578006858 -0.033828792886105616 -0.096601757265283569 0.34098297173048969 -0.14322935669051062 -0.46232371739253125 0.10747352161350687 -0.29729631255926769 -0.19418134222150124 0.21137685348050425 0.34352873057873773 -0.19386746746741654 0.13182892638213198 0.18175507852851172 -0.094693587150913486 0.28384286456531443 0.027935434356633836 -0.32490153521562759 0.051380301425626163 0.3685595010247058 -0.39429956209845685 -0.095308600838167834 0.051631428672609711 0.1470124444988305 -0.15410387835898573 0.61164605519968185 -0.54088398066908638 0.21120505728751063 -0.11475331511927653 -0.011454690715843853 0.19491786654849783 0.15684809638618594 -0.33414240749108254 0.28801562490792648 -0.19874317121374518 -0.25321257848761386 0.17558653667654117 0.50149859694298393 -0.49731591881419812 -0.061389110498119757 -0.15391803542170684 0.24611063218498128 0.05770596313370227 0.49703068145530538 -0.148176807881061 0.36345241038247028 -0.03980597815995468 -0.14346655579340056 0.073801197242602631 0.22716469977432183 -0.2975922138361865 0.14564206955055076 -0.4505817551609862 -0.017911863393315686;-0.2523612628655828 -0.1053665047757766 -0.091241313155788484 -0.080476632080086444 0.25232674021604684 0.027853426925566294 -0.14375752617681758 0.11032865741608966 0.06474006631395765 -0.72223873837346431 0.034786869154918382 0.40927666357429821 0.043557304136858148 -0.29433892278414819 0.32398462398939576 0.43544492456573913 -0.051718009755019438 -0.099279917584142868 0.16651870432851473 -0.10585598908658 0.38866012661528904 -0.29498549723042233 -0.22482397378556282 -0.23161830712779322 -0.047314392941724973 0.0095794560903105005 -0.025279628712538391 0.12099896889521218 -0.060106419593057521 -0.42212373489009891 0.27443053605692003 0.1100098785698454 -0.23599733285764388 0.22888824117867568 0.17483777933985509 0.050894652876761634 0.13342992040317955 0.3453264635282392 -0.13135777038975177 0.28530509317690694 -0.32453080405246743 0.098725132021672352 -0.27957419722361965 0.09825085228615639 -0.29702407157323041 0.19992732516779738 -0.10349967221029328 -0.27205946081821325 -0.18858169327306465 0.2684532121093311 -0.1242364944358028 -0.30098470321677434 0.12907978958963873 0.27490227652234828 -0.10090222528896248 -0.11213593228228717 -0.29486851914209744 0.028624233886687358 0.0069068175450946057 -0.26155494781947503;0.13530041918461774 0.39295903477440647 -0.12151065685817226 0.58419551407443548 0.13448043941533122 0.32231869309721711 -0.32560114761408998 0.25862368066850033 -0.50743667260434011 0.28557653030063479 0.68971497315589758 0.058068198387143832 0.14009873008690718 0.64323233395159785 -0.048026728566906929 -0.66354759010905517 -0.36172369541672222 0.35929485052913934 0.16125979389512357 0.71972755541107114 -0.058812216345022358 0.065908345505358956 -0.46474757935115618 -0.079579976952038251 0.15179618857820659 0.67392991054451878 -0.24550634472318505 -0.1536678348281996 -0.2538004144063391 0.057338803000149569 -0.08289692110612816 0.57643658428348643 -0.29637832472500925 -0.3735827721489885 -0.25066698872512005 0.11358761931156229 0.32636032449149888 0.093050137116742704 0.01477317781125447 0.27553229027904086 0.18081765407488304 0.43855832776391812 0.054876508663574526 0.13524372347122335 0.25411791099093473 -0.16061821656669653 0.5262679834675662 -0.083095976510453792 -0.22498530702804104 0.59914904507362732 0.071076233296270441 -0.055861121125215366 0.012471462423147632 -0.16647845389001392 0.012626676319196372 0.50303286232986477 0.11343673961174119 0.081280572980713187 0.064302547164654167 0.28298144241566864;0.027281988612499967 -0.54285010976753867 -0.51818637832890491 0.07048757585092133 0.2851535772636124 -0.47121440960730449 0.20013986403358663 -0.76140531330888861 -0.31911334233659122 0.21845587817191062 0.61531117894569531 0.50321289392238144 0.057734759182548369 -0.8013749728981775 -0.52661126548616344 0.18401936319424414 0.64802209762500118 -0.088846629473292055 -0.28300862561729584 -0.39378585569343172 -0.29587570794525253 0.27028567205599002 0.13640386272707281 -0.027606932719748612 -0.36357190858246918 -0.39905154179011071 0.37180087512546256 -0.046907356022633101 -0.30418778871477159 -0.14224055435102811 0.0019911929122039297 0.2540385470566689 0.13107954643330813 -0.62418667495073954 0.26245386480428806 -0.18125308871253853 0.28920357056413326 0.51844306759288383 -0.068531975029273093 0.13129191434203236 0.023211109762276791 0.066210816118041027 0.29266346170170676 0.53226190057971057 -0.038948759704753345 0.48392614283338514 0.27912719920240636 -0.34793225941489858 0.17590065518163517 0.41748002968384035 -0.072755152021739392 0.61059817668795746 -0.20800653446042258 -0.1175708404000028 -0.16543616158658475 0.48904510979223226 0.30547164816492117 0.36668527402326717 -0.18132975089712494 0.14833321461600588;0.04517726275127773 0.31438797613822778 0.89840303770491592 0.21151190482324658 0.23787325547862312 0.48501909484424649 -0.034913819938384799 0.27979655977032686 0.70311430642616868 -0.38198552362770144 0.082876473699442232 0.043178720758437046 0.18782329259293362 -0.023575867074875738 0.66511433925590968 0.2528488382754504 -0.51082290461247404 0.44814912485417185 -0.031139155501955763 -0.18975838043712762 0.71008188336542155 0.44818174437846497 -0.28838297435658222 0.15189892395893911 -0.45811227693805123 -0.21969718733660001 0.088335028272188809 0.3089721262988967 -0.2475309483196074 0.28569478511469648 0.19248043113922991 -0.30757088161174018 0.33842242497039099 0.16257170098557486 -0.22744374359842076 -0.049352483134380218 0.2232427270509057 -0.55670209951417859 0.08422099785942605 0.1952607708184623 0.011598021567701478 -0.029088932794701174 0.071073672189654422 -0.52795262755406447 0.52546691956125813 -0.33528074338554598 0.08332474804805276 0.62907378485239362 0.17841312540941173 -0.71159487322261461 0.62333654472402023 -0.54345494338452482 0.437092922308707 -0.16272314779814717 -0.26434556377048002 -0.19791250883743963 0.33753761327411735 -0.26027375029747096 0.66106209838816909 -0.0095700105674668828;0.21525254965298207 -0.062447297212059993 -0.156031687484845 -0.086284544428896159 -0.19164164933591962 0.19360723583446493 0.22096500014641521 -0.31620576557841901 -0.23576348726722432 0.30036230340494591 -0.10237642444916363 0.084963207476113703 -0.15153846847752256 -0.14463074642031654 -0.010743194543110044 0.26458935904422221 0.024691488539870493 -0.28822202894076121 0.18488622890302381 -0.085359145325844668 -0.15954033349361554 0.37594688164015511 0.23973629592871704 0.22101985469101779 -0.018477027582393946 -0.39046254286142895 0.22520791106119123 0.0022105431358632275 0.34122954228186331 -0.1985999192903129 -0.029448567779907779 0.15777177329735004 -0.088593812996231619 -0.066141920340115845 0.23292421750876363 0.041529987521959161 -0.18760750752561414 -0.067353346191530702 0.18897025656916683 -0.15092375026759475 0.23198887030732679 0.21907935407362411 0.28252198265164719 0.093999705139284948 0.21453613648768013 0.1860210824519572 -0.30865367340360689 0.060523217048205818 -0.038998025395247674 -0.28951456111439511 0.12005141611532977 0.022527001229674475 -0.10039359104881772 -0.35078655297586547 0.14426333458277923 -0.19136098593644343 -0.16160210443207129 0.092510374523895045 -0.28672708542031872 -0.13731710610464015;-0.14103881483922556 0.20123599648903265 -0.47565722729065735 -0.21066787409193816 0.21401769025703038 0.27473488885611763 0.19583125927916015 0.55664799759981953 -0.53843831477808479 -0.21787766862137017 0.15107638572736962 -0.2759388430756326 -0.0069143411913545122 0.071182142684333219 -0.44279592323395178 -0.24233862350017291 0.4598260999407433 -0.37914434181692391 -0.083875192187781888 0.058371263202269374 0.062802434061479145 0.14193779739184484 0.10003117381397963 -0.0049079730190047556 0.1737819105130366 -0.4881381088972227 -0.33001175928952442 -0.092654424160535084 0.21481125903782833 -0.394024068218637 0.22507107981614741 -0.0099644778972561472 -0.34902955912389522 0.16545992438776697 -0.049458243804506065 -0.40276122553998583 -0.24157863412584499 -0.2441147695483212 -0.51449188398247436 0.26442207910468429 0.039737281537612648 -0.47384822210589461 0.22688812807023762 -0.28544879406314078 -0.59312572778184325 -0.084867749510495749 -0.36476070197729421 -0.066953514262367647 -0.15987804057370397 -0.12796739763018242 -0.43428965145618692 -0.19404909260875208 -0.039057313493699064 0.1536147433675023 0.12661827727819419 -0.19350758110639413 -0.44447535189132287 -0.00067367415593663554 -0.35735095408636358 0.011694590233881801];

% Layer 2
b2 = [-0.34208697276881284;0.48115974579892834;-0.28183287242721194;-0.90800745764430169;0.050787276967614571;-0.013726715137144255;0.12950324643669731;0.3093004153088858;0.59156106958638022];
LW2_1 = [0.12636435459500914 -0.3226252026798066 0.32820427051067036 0.3109737869707988 -0.59055341682752949 -1.0617918415791769 1.2192982514481703 0.18153765624580953 0.6390100939384632 -0.72040984621015847 -0.39500174259768422 1.9358438639441271 0.62206258638046774 -0.27329203851037498 -0.24788329182199001 1.3719565892992269 -0.66964400161453319 0.51907628460116417 -0.88133647504722146 -0.82263807446093451;0.93965669975662791 -0.21564277583269448 -0.70331483065875244 1.0889056225659361 0.14465974240947468 -1.149989047627558 0.69753479587918443 -0.71740257364496784 0.28912624222856553 -2.1901806591683037 0.3583708439106601 -1.5899372235318943 -0.11099359249974089 -0.44519124749063294 0.68969665440963313 -0.89414809530236172 0.59228309220159325 -0.43830817188875226 -0.85688916341178156 0.083834682785637063;0.68675910470221979 0.44953964847982858 0.5946467090826264 -0.63030376788472819 -0.60124261158476688 -0.10664840190129471 -1.6531743428020651 -0.90075079841296568 0.18994127408637498 1.6087077096466769 0.13282621871796349 -0.012122156653910313 0.43939983580185676 -0.29344746444322106 -1.2478960688789489 -0.19917943185243764 1.2146879812035332 -0.86933882216246927 0.23943619101232794 -0.80119151455071047;-0.71105360071130685 0.35253071696882088 -0.69882746533308537 -1.7292417359486139 -0.92442809783213753 -1.575050681437596 0.78992379870082519 0.80914252364530814 -0.9827472729260488 1.1685077630913494 0.46009699380735564 -0.17937777261932719 1.2568119753174942 -0.14209350433783857 0.31655734654369488 -1.0906813334501755 -1.0809302387125026 1.278490490114198 0.18778371112295272 -0.70269726886579353;-1.3584559293250893 0.74145017864653873 -0.71883365013414424 0.33572961004050828 -0.47028631438051138 1.4856305162251824 -1.0092520927507656 0.2693736345918426 -0.22157534363928111 0.37209372769294397 1.2553596074220725 0.73734271674316332 -0.9036887548983864 -0.38664697296722772 0.1035341827480222 0.48071962220978981 0.60449383240223542 0.91509815185201859 -0.29827065122040425 -0.64123484217111371;0.91788414150428477 0.21517311075987378 0.72988096461801888 -0.45330326579934621 0.038886640262697739 0.38454353399923635 1.3766073650950514 1.166437926162279 -1.6138038601401548 -1.2367953944935293 -1.0452118679842346 0.33397231090210083 -0.10761769319702244 0.96231876081819756 0.49171991395410908 -0.23899334365504277 1.4890305715445566 -0.54665629347653122 0.052284400507291717 -0.89869420524014376;0.19076650752207958 1.2795633100427886 -0.76014651828497048 0.31931529441425388 0.31147466890575398 -0.48959675581665335 -0.65308109111384838 0.57477510534794363 1.6559132093955353 0.22740112886786104 -0.9494458900835413 -0.8209715254740424 -1.1407375907333599 -0.17884420321358879 0.73376212164292343 -1.7292882222654298 -1.0393622502168176 0.58052698995381935 -0.17315072930471725 0.95845772519291828;0.71174486992669672 -0.030324349454766357 0.63675797461851658 0.91771890274738133 0.50189278008827898 -1.2527301877520525 1.3458827818901962 -0.75027976454103151 -0.33672741878325763 1.4439336716305509 -0.32355110139466142 -1.0655887533364683 1.0363888035243585 1.293949503232283 0.90825748509929727 0.10309385129620401 -0.52858716865238098 -1.2768906617761759 -0.52430607677312135 1.1432521942122098;0.45259295364714747 0.1088360530161214 -0.23856612118210446 1.2014863971056897 2.4221759542297345 0.42124546853456191 -0.89795034327517242 -0.11585215153278659 -1.552713650536697 -0.97125559758342261 -0.27520856853108566 1.3704130621166728 -0.027753119288550478 -0.41858131364577983 0.077148687791383536 0.0088810827307804797 -0.43802603440256443 0.45248719887388639 -0.34897680800888131 0.31791165746436023];

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX, X = {X}; end;

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
    Q = size(X{1},1); % samples/series
else
    Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS
    
    % Input 1
    X{1,ts} = X{1,ts}';
    Xp1 = mapminmax_apply(X{1,ts},x1_step1);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = softmax_apply(repmat(b2,1,Q) + LW2_1*a1);
    
    % Output 1
    Y{1,ts} = a2;
    Y{1,ts} = Y{1,ts}';
end

% Final Delay States
Xf = cell(1,0);
Af = cell(2,0);

% Format Output Arguments
if ~isCellX, Y = cell2mat(Y); end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings)
y = bsxfun(@minus,x,settings.xoffset);
y = bsxfun(@times,y,settings.gain);
y = bsxfun(@plus,y,settings.ymin);
end

% Competitive Soft Transfer Function
function a = softmax_apply(n,~)
if isa(n,'gpuArray')
    a = iSoftmaxApplyGPU(n);
else
    a = iSoftmaxApplyCPU(n);
end
end
function a = iSoftmaxApplyCPU(n)
nmax = max(n,[],1);
n = bsxfun(@minus,n,nmax);
numerator = exp(n);
denominator = sum(numerator,1);
denominator(denominator == 0) = 1;
a = bsxfun(@rdivide,numerator,denominator);
end
function a = iSoftmaxApplyGPU(n)
nmax = max(n,[],1);
numerator = arrayfun(@iSoftmaxApplyGPUHelper1,n,nmax);
denominator = sum(numerator,1);
a = arrayfun(@iSoftmaxApplyGPUHelper2,numerator,denominator);
end
function numerator = iSoftmaxApplyGPUHelper1(n,nmax)
numerator = exp(n - nmax);
end
function a = iSoftmaxApplyGPUHelper2(numerator,denominator)
if (denominator == 0)
    a = numerator;
else
    a = numerator ./ denominator;
end
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n,~)
a = 2 ./ (1 + exp(-2*n)) - 1;
end
