function [Y,Xf,Af] = myNeuralNetworkFunction(X,~,~)
%MYNEURALNETWORKFUNCTION neural network simulation function.
%
% Generated by Neural Network Toolbox function genFunction, 18-Oct-2016 13:00:00.
%
% [Y] = myNeuralNetworkFunction(X,~,~) takes these arguments:
%
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = Qx60 matrix, input #1 at timestep ts.
%
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = Qx9 matrix, output #1 at timestep ts.
%
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1.xoffset = [0.9375;-83.3125;-179.5;-9.96;-12.03;-8.01;0.6875;-88.875;-179.625;-24.89;-15.38;-15.21;0.25;-83.875;-179.6875;-13.66;-15.24;-13.09;0.0625;-85.9375;-179.125;-22.08;-25.86;-27.26;0.125;-86.1875;-179.375;-15.38;-27.97;-26.4;0.125;-89.5625;-179.875;-19.82;-20.48;-22.82;0.125;-87.9375;-179.4375;-20.46;-25.58;-29.42;0.8125;-88.6875;-179.3125;-9.11;-29.9;-16.26;0;-87.875;-179.25;-3.96;-4.64;-3.09;0.125;-87.625;-179.6875;-5.94;-2.9;-5.75];
x1_step1.gain = [0.00557491289198606;0.0192655027092113;0.00556909154194222;0.0822706705059646;0.102564102564103;0.104547830632514;0.00557588430040077;0.0195003046922608;0.00556424969570509;0.0473372781065089;0.0617856039542787;0.0579206487112656;0.00556328233657858;0.0206851971557854;0.00556618542355192;0.0571265352756355;0.0715307582260372;0.0667779632721202;0.00557977332170881;0.0192076830732293;0.00558561703613196;0.0452488687782805;0.0498877525567473;0.0427441761060056;0.00556134862704206;0.0187793427230047;0.00558659217877095;0.0386398763523957;0.0473709142586452;0.0459770114942529;0.00557394182198223;0.0179775280898876;0.00556424969570509;0.0367174591518267;0.0471031559114461;0.0391619345995692;0.00556134862704206;0.0183591508892714;0.00556618542355192;0.0421407501053519;0.0407497962510187;0.0482625482625483;0.00557200069650009;0.0176600441501104;0.00557588430040077;0.0524658971668415;0.0574052812858783;0.0801924619085806;0.00556812249869497;0.0182544209925841;0.0055963623644631;0.171379605826907;0.168350168350168;0.178731009830206;0.00556134862704206;0.018724400234055;0.00557394182198223;0.174216027874564;0.247218788627936;0.0969461948618517];
x1_step1.ymin = -1;

% Layer 1
b1 = [1.7050025856132676;0.562962166724014;0.81871929556893042;0.99271948439442725;0.14416847054120308;0.55342365674505856;0.86526297011880338;-0.33753883800886308;0.12389191197959483;-0.098562643125942026;0.52678609771554019;0.17207012123794513;0.37335395539212834;-0.17590567041420366;0.52668694005025463;0.92433896480346167;0.31789493371069272;-0.75521358873506161;1.1086571468004831;-1.6886711170977597];
IW1_1 = [-0.41549563570217873 -0.64733688419925395 0.15312068437561582 -1.3123868335897244 -0.091287138296756692 0.28208024918129565 -0.17741558346207148 -0.0062635794352041228 0.22753616266747215 -2.7296940180785398 -0.42420980989841889 -0.23154169513775807 -0.13898554072535724 -0.053429728465842749 -0.7712998474071624 -0.92170254994037015 -0.17657661074178402 -0.19378918342253981 -0.1631294161507475 -0.51930003262618785 -0.20845885866906078 -0.86891023765009945 0.15582015443816988 0.15159346749661151 -0.23106931018663909 0.21402361550749005 0.37298791963662847 -1.0293684861524635 0.15430447647963044 -0.42128506539634536 0.17031861555344285 0.45256864112781348 0.72392232221353237 1.4238779513123399 -0.00030439069591145507 -0.068020986323811677 0.34866242279154264 0.24798960130286704 0.33089983171562981 2.1927257427472098 -0.0033934438212204002 0.42844973028107264 0.2388153766765162 0.068091081651030824 0.20762175560495402 1.1226696586663281 -0.16084296326298364 -0.031204285680965445 0.26173293081715715 0.37881849136655149 -0.34189861155518914 0.31947275857239205 0.7101570107715004 0.360475757229612 -0.097641347627498723 -0.23862198805013746 -0.50474273381358337 -0.17798396495590574 0.063727059215153967 0.12046211534017259;0.31121409152190227 -0.26228264549081981 1.843875107940897 0.4595999427865477 -0.63189395932269699 -0.28797867899095664 0.32927344794770214 0.021402095354578748 1.5418403357481556 1.6613021827492445 -1.6305783873835145 -0.64490086703346428 -0.71658088415467136 0.084478601926852831 1.0776038517524609 0.75798623799377618 0.15002209930974247 -0.78145768072131805 -0.017090391218631568 0.60027124437260537 -0.72515242017433235 -0.53965526143676024 0.069925101043318408 -0.54462219506980769 -0.09539988509550501 0.44383944323052565 -0.8176301686214088 -0.47834417920871503 0.27456034838141513 -0.57964242441727609 0.0085846931665687978 -0.10479566558610283 -0.46951522627134673 0.07369098675068339 0.30677422426757706 0.05354928455780205 0.10903165958215952 -0.39313444579635648 -0.85255964491884495 -0.59537098462545701 -0.0086693247812534464 -0.59968076925939728 -0.28168162684640907 -0.70456912755958878 -0.4252547554300754 0.1951352712415679 0.016238832381252469 -0.25567025016845707 -0.09312662622590194 -0.85598485453353423 -0.052027606611907883 -0.30595662200269835 0.40095392099341576 -0.034089050547092353 0.13839381184425167 -0.3827278960942736 -0.79624521798975612 0.52503851905970256 0.42646192188588039 0.15089445801811013;-0.62548739509708817 -0.11392578522734646 -0.020812006535265656 -0.17465635985190167 0.33423382942330004 -0.21095322425544338 -0.78465610234035488 -0.098297651894684757 -0.019332012725768882 -0.11203456830725288 0.56967486384197008 -0.30443151937493668 -0.45149744851075296 0.35499968603656157 -0.30795881647431994 0.45514637339332326 0.060630527604884653 0.11546965631824567 0.19682636262649789 0.0031493465019319438 -0.18263781521053132 0.35225211360285558 0.046877931103062105 0.23556615890114771 -0.067028497996648562 0.38803863443465986 -0.308818538470785 -0.0035540125690206085 0.074833866080310202 -0.096643962603709402 -0.4017582061875275 -0.073014605219563891 -0.28264039823679799 -0.070738408106602729 0.05760576155940246 -0.010117501518128744 -0.16687589431215136 0.22020568128190013 0.034043954527225487 -0.60107993045016361 0.17909350056281689 0.30933419042155952 -0.12235075255847742 0.49394168737452299 -0.027801021022043987 -0.14975126311925002 0.062586314491950637 0.17015527039821393 -0.44518754487961804 0.47374021718476239 -0.34689664363198031 0.0023334757713502291 -0.074860697677183688 0.084970319200702693 -0.49478972829964218 0.24430017776117222 -0.34196651397089234 0.13663056985576194 -0.1119269190375235 0.09785216242035584;0.10366198829659651 -0.66511247743672486 0.11842825564263616 0.4542713132646633 -0.42591518724530381 -0.029793925862804885 0.35051526727164378 -0.28103000313680176 -0.35223647518424894 0.59204965954131095 -0.34696689945740511 0.64163926224962542 0.40405875211854003 -0.47774267811294008 -0.63511628111687335 -0.38921845264343635 0.012949980188130605 0.13965188713909912 -0.029735428144050571 -0.37045952707148377 0.07150475050990994 -0.33634003627913978 0.56566996201474495 -0.50053448830336744 0.2312948969197921 0.03823711375169337 0.15219233120841758 0.16304016537559229 -0.11280475615888205 -0.37368646555227197 0.34130477656828034 0.36102720285535955 0.050295985707969351 -0.14647621458634608 0.035260267856718736 0.14580885268413432 -0.57383708666910593 0.90826423754428776 -0.072075502282312381 -0.26040468202260869 -0.41990040748246038 0.053371144507779508 -0.17910784459650794 0.91127077032722692 -0.20821107746062353 -0.3107207563730367 -0.062060178900279921 -0.12643492578767679 -0.25932991844405212 0.84782763947922679 -0.62509665770089762 -0.14959896391438085 0.21488897278823682 0.065167973136278964 -0.082026303704259146 0.73786894522560265 0.074730356052794669 0.18794269228004781 -0.10329304055666073 -0.10883040315727091;-0.13013819307269869 -0.58814586760256804 0.21845869993168365 -0.19473417896738077 -0.2624749765667943 0.17973520760781436 0.17022276702790989 -0.4708131926768514 -0.30028570400677584 -1.5602548006766088 -0.52192687424456685 0.14627669736629539 0.47778239199875239 -0.080370907121503438 0.52657365913372267 -1.0040407592636054 0.55565120600736972 0.29283492121012339 -0.21589735503258667 0.76577010624341069 0.078909196044734051 -0.59577722102748432 0.8749189836614264 0.52360341088185314 -0.16589606544116825 0.63135920866632567 -0.07056398858347411 -0.30126321130969491 0.27822272326439085 -0.1595185850954503 -0.055789176001636819 0.85753016670303173 -0.037096642096923725 -0.68453695810818938 -0.14092620848166237 -0.15454899525781474 0.038932707905420361 0.40218674189964526 -0.072874477133603829 0.1859269451672379 -0.4761055574585551 -0.10749614877467384 -0.15002779837060617 0.57883880542444888 -0.3334327142363539 0.14771169316478869 -0.7199373410805171 -0.3731634861999743 -0.25134579801253298 0.25403788430127028 -0.15590799253107115 -0.018894983047956494 0.2806172953025276 0.0774787447099963 0.08219076581408144 0.53992834430156222 0.55918774849282493 -0.24999730788009555 0.6394258229066897 0.27402310672791824;-0.46554749396884565 -0.10926683809184112 0.8988189359905886 0.19953529357217703 0.0095734959202156134 -0.13093640976466589 0.068613937321601301 -0.031161574729351504 0.93991391903255206 0.99612887499458203 0.55840293767210869 -1.0666114228027559 0.4521726288656035 0.40748900292777424 -0.86018905719902883 1.3847580147588554 -0.63027356435920667 -1.3365776016547879 -0.062753146902502513 0.76202016998647537 -0.074689829525814128 0.75260285596894683 -0.34544864108450579 0.207108253141323 -0.30329350696583429 0.27187224525201292 0.76107050904726425 -0.26607774992146416 -0.098526668762822678 0.51081236527903939 -0.029438088305866205 -0.037304446452201469 0.4373694462736295 -0.67333951828795791 0.37459339008231252 0.46814289701874379 0.15156556576307151 -0.12504469706320609 0.5130154124535391 -0.72406016399691764 -0.30467056443504986 0.13484559876031321 0.22955296121648017 -0.17977905712812914 0.37849986043134004 -0.53666750765998694 0.077258403169773712 -0.14376435954219616 -0.0665286846199723 -0.019778334402769934 0.19323047170997248 -0.27700392734209139 0.37129459621450056 0.32583494740802754 -0.041975188638384453 -0.39441883991508603 0.13122732064011311 0.15681377084245909 -0.1117459414943114 0.3024110061424633;-0.31225532837875641 -0.0035386837636445841 1.0228247532588128 -0.68141558336320318 -0.1651484368436662 0.28337798293622007 0.19567699220756099 0.27462012743412351 0.61217194671898445 -0.36732411999840614 0.8386165511319903 -0.46554405685844685 0.6428506336030082 0.56318718903392373 -0.47707743610207021 -0.37119468462456284 1.2837543583271422 -1.2555606047292185 0.47400982126828589 0.48979931056863157 -0.30487588547775835 -0.33448539744021727 0.01288792741093568 -0.16527256388349296 0.78003659580192408 0.47636804389459397 0.025022985784706964 -0.5564335397747121 -0.33407924748818185 0.27615212701530234 -0.6992060755733861 -0.03752890019014412 -0.50395789886570386 0.96702893084737174 -0.73035834046459069 0.020818367593315429 -0.43676172354953213 -0.74052502540362197 -0.74876250625186491 1.1721821738343763 -0.39332031465590439 0.75404581697168815 0.16516009085148303 -1.0795377942330473 -0.9352982971367011 0.23893575434852213 -0.52027085475862578 0.18468342559563436 -0.21082844737417342 -1.3567031066782411 -1.0076386130448598 0.34946545639908722 0.033872998117647657 0.19797186480614123 -0.058159972441066278 -1.3726205787166474 0.12777250969756415 0.39129973735877088 -0.30057995493966611 -0.069188816203102452;0.46905094064198877 -0.14796539883707843 0.48896173298341472 -0.63016210855479138 0.081386772412692987 0.33395122542295375 0.057300849152508659 -0.066820950962020301 -0.36086316638903965 -2.6743546538785776 0.055162737931621061 -0.099074127669664488 -0.25228613764334346 -0.44270092790987758 -0.58858105064277511 -2.8929492866127551 0.5759010406124091 0.051742474877565364 -0.39876123656865831 0.045886427849421693 -0.25757976722515052 -2.0484887765941986 0.27631705260936246 0.0050626351084330241 0.31411401691583724 0.73554682966317508 -0.086287971158652887 -1.9916992480218716 -0.057809532035849862 0.030831387540391324 -0.20293877402811267 -0.010170915960065419 0.44280248359381641 -2.1543286664468271 0.26306523027226486 -0.77353726075704432 -0.068672511134924633 -0.3917374829801929 0.57564113611564993 -0.17221913598081398 0.32732532471424602 -0.3310321536797497 0.63481497608745219 -0.15635184042686259 -0.01572082529942382 0.34059391870326272 0.48225026129242871 -0.1637733751642719 -0.06887053988081894 0.030317956970643465 -0.37848082417705969 0.55691518878876389 0.49388638003733804 0.36053215181873366 0.16446874085729116 0.16137067170949243 -0.074363090159719758 0.044195208430588773 -0.06698854394170832 -0.26884024899168296;-0.64495598289960665 0.47459295789671208 -0.35308658231091361 0.00022008269068755915 -0.29409680118302106 -0.39345576009874483 0.018982706992640055 0.42074786597432151 -1.1730734723269407 -0.15304746208406955 1.3105119682115696 0.18954034985628737 -0.64766751344995965 -0.20882095657093702 -0.96099412148253216 -0.33816802670252238 0.26312956166731188 0.88583218536428854 -0.19057243709462734 -0.1818132882178006 0.12337650283525858 0.22089646767943524 0.18383924613276381 0.39377521766707413 0.55502263177521338 -0.13386670511422136 0.62544711409196774 0.26040668136905981 -0.12296843050801309 0.23356363810456882 0.36770346735344572 -0.11049081853886987 0.24454787179448248 -0.69303122244860904 0.16200504899687179 -0.0036307439388353351 0.48165377708151647 0.099884578704585822 0.69946613105309596 -0.75108621493148175 0.087373750133361808 -0.043264054509088518 -0.24388557432364519 -0.036844557304648536 0.37095220598696066 -0.26290787286156042 -0.46469617840504512 0.13602893573311803 0.30122705321863558 0.2780944818562775 0.21897333676144548 -0.080508380640941027 -0.12019918104862692 0.16643380070703928 0.16252246569102127 -0.029690313760729753 0.050622414018574105 0.090031580469277644 -0.089543573614921435 0.22037322872000925;-0.060816941634979117 -0.07592489479531507 0.49808105973454869 -0.121248451935885 0.49629317162891079 -0.33056527899009408 -0.19448482251967508 -0.86722394755903454 0.24952521110479506 -0.58788594230010704 -0.30670894038066332 -0.054725689825291204 -0.059673019899220185 -0.9973649990532818 -0.045452217421981474 -1.4456878488970992 0.9225425000818861 -0.50177919895830214 -0.049644684962655949 -0.64998693368456217 -0.52179592058661617 -0.63707342840734793 -0.037268259571875441 -0.18912626160784951 0.29725823628925185 0.19096007868854403 -0.50331924570431008 -0.52533132968761442 -0.36720776400824151 0.49643229466864031 -0.25375590925035091 0.47215287866393696 -0.12531509767583901 -0.40473235386051787 -0.41062752377682044 -0.25040304541136332 0.077838275650493796 0.39023728281484643 -0.25867693463886537 0.029977256521897463 0.041324990620575597 -0.75359788000727435 0.13350958070591773 0.5820793280015174 -0.34321043583037097 0.16893702436133318 0.016081506996607833 -0.060161978014283898 -0.16907100298693506 0.18796759633043938 0.07727834772159059 -0.36713849368266782 0.41960643525139624 -0.048090774845498382 0.26776361220027689 0.2965797464228242 -0.087104649580636864 0.018681137486444559 -0.18504400290891876 -0.2981843193774471;-0.16659003258537633 -0.0037811555918954272 0.0016588262134725525 -0.13593405075550069 0.37445900561801565 -0.28357319075364196 0.11371693186119602 0.0357153791561821 -0.29607100296698619 -0.065108134560568229 -0.080932547337304678 -0.54127910649774258 -0.18562179238388637 -0.1947584760413488 0.33791858139108288 -0.24053931348085913 -0.34560391336578733 -0.21237411856765928 -0.66695615077121373 -0.60742764973993724 0.24042229850405081 0.32986067085052079 0.073520447559954905 0.10622289152394876 -0.2812799615825155 -0.42558260690180433 0.29714282832685479 0.31601434896187292 -0.065549323758515632 0.22243838857654202 -0.35909423402455598 -0.68541571124335965 -0.35898070305430918 0.52453616447183682 -0.046542926878301735 -0.33391885879167976 -0.15816048372587641 -0.5090515190128041 0.077535060875916204 0.34617650178399623 -0.15077738009611386 0.24011984170465295 0.70090673861643726 -0.45699422234915266 -0.83599586906190659 -0.18039699675916168 0.1989153714153919 -0.0044498455132848738 0.44088227419346115 -0.1988321564528587 -0.78863166157172737 0.44871671564787657 -0.16999487460057738 0.13614354732474204 0.52685969472772953 -0.32799844404183287 0.099971152430105722 -0.049143150788256922 0.15142654004954267 -0.38014690257255662;0.58459319080536454 -0.34820210173436911 0.4193411866315816 -0.25886914356875934 0.1384620547908994 0.481776453373228 0.69557931095744752 -0.7483981072396978 0.15252240716743676 -1.4410130273737922 0.84355683421845462 0.2173212150203859 -0.53558877252591208 -1.2827791971407321 -1.1752689932015119 -0.35489865941788418 0.14096854106216344 -0.51192371213096399 -0.77832494676396491 -1.1486048184444608 -0.31944670317923857 -0.10685310345632143 -0.01044897979461535 -0.7208039901600467 -0.13362415124506483 -1.0045968355381403 -0.27835305761025569 0.23412422574629516 -0.35306407678495555 0.040722907001254631 0.39568233946874037 0.28627461370775042 0.2695787482765421 -0.5815296154666767 0.011645138272914947 0.22120192866375538 0.060627511021810826 0.36190557397274065 0.76397331684246661 -0.45384063776551192 0.16346885750239645 0.10896507713380663 0.019031804418879767 0.66808678383608999 0.60528682043566073 -0.35031208602222874 0.18366475839712787 0.19785399010722032 -0.074881982789733334 1.2734574072476881 0.063870327407985469 0.36174461198664448 -0.14479063443033771 0.41075632761994951 -0.35736372504048391 1.194941823981275 -0.21588435262472838 -0.38858339103638967 -0.49416229745859991 -0.063190905673349562;0.1141089504974525 0.81601730187333277 -0.39413209641728375 0.85035517828772456 -0.30440099759084444 -0.058423703862629309 0.20714652411499701 1.4631749904298224 -0.19727143638761074 2.0962333900754557 1.5541715828703166 0.13905052746654276 0.17890809243777459 1.4324900500696724 -2.6616529549686945 0.55914206854363635 -1.7737442315613947 0.60773529147190763 -0.040143081484259942 0.77051709018185599 -0.18733668841982731 -0.20890342463778194 -0.19790865871384775 0.38027332000148384 -0.018596431795495395 0.094969402411895942 1.3288807934415252 -0.66107928432432017 -0.25490393927024729 0.51734405643692094 -0.23809029793724648 -0.64036030787424281 0.69170595111836308 0.036144069643904347 0.55436674217791604 0.29076889780362353 0.13652658677881549 -0.763388325548365 0.39989981245981693 0.49348888926659579 -0.32009916893478496 0.73604672075525268 0.12363856374483055 -1.3030551234275385 0.31060208943158402 -0.029670983465388975 0.19908255809243558 0.14951226743020213 -0.20994491455420433 -1.3896704078956656 0.073852782925363986 -0.19609791517267583 0.21182894160384133 0.22659631966401964 -0.18807025405080113 -1.1090822897065615 0.50084371076884115 0.76506469479274741 -0.053655481329344314 -0.027360571399770408;0.22803038617032625 -0.43140170169113257 0.4185044419850637 -0.7422740589909218 -0.20613744861462391 0.18217508853666348 -0.0099231687987542706 -0.97286966848810186 0.06453878246715479 -0.80643826294723131 0.69939850567310324 -0.45159286795337628 0.041014729117001159 -0.88308763439855775 -1.937206067482292 -0.40472059101237973 -0.33896291525259165 -1.0396228670175947 -0.16337870316079628 -0.54590324487691011 -0.046716216781042576 -0.6164162272767546 0.068112029109297659 -0.74411093953943441 0.10127615723851977 -0.38514294386294506 0.42252154641060158 -1.1426344612255284 0.062572842736465004 -0.4487596605000464 0.16262424906195075 0.42261779499437085 0.48412206845942307 0.20989033177921934 0.46881850650657236 -0.25163021085365544 0.26242726413850465 0.20868079468509948 0.50000529714381925 0.81133840856305894 0.2744785618894246 0.19486003116512146 0.021834851330446912 -0.15930314204201343 0.12235855439956245 -0.19871677995776368 0.65162037636976544 0.32915842337176804 -0.26560675332996186 0.15031839372693573 0.46117613939040347 -0.2982791070255727 0.59343149914752713 -0.19339279247140972 -0.39714885625023771 0.046541657460916812 -0.15754507946493387 0.054164978627019598 -0.4732470662551238 -0.20404637112054289;0.2352967848059658 0.55208375385682273 -0.4977123658670386 0.052653932231447174 -0.0068847965938785161 0.2536840757658711 0.11478104366237674 -0.002258924100072314 -0.35512065679889332 -0.2272634033739297 0.48028358127228771 0.32357778932369069 -0.47053306089713531 -0.25157294399779906 -0.9793316133989769 -0.46520362480478789 -0.71457355489624974 1.1681990715077615 -0.38624028894051837 -0.51643348810695666 -0.52183053336310725 -0.15102496444575966 0.37836592308447903 0.35734855993611819 0.070569221284058348 -0.36979048384073526 0.16311916815820948 0.32286677831877331 0.2503276010369706 0.13789605613291969 0.26146825506450372 -0.29000015930610346 0.17283675183808889 -0.88957817712241183 0.17859616295517319 0.18320532969150397 0.10154301445179899 -0.3172353500715413 0.047494383935986977 -0.7028431915321024 -0.08783895267073788 -0.36967024240833057 -0.030084401850613895 -0.009877261904091255 -0.35719447597836984 0.076132315247388241 0.37691806850583598 0.15667356818126171 0.13843841940261992 -0.40164177402891887 0.008628957551706333 0.3363277011092205 0.15106708593301321 0.25543854728894694 0.23241116448704752 -0.15087260238926864 -0.290161490849279 0.081157430503957517 0.2171438189369258 0.080260844847972121;-0.094964902864009132 0.00064437728131570555 1.2929210551883545 -0.39832107995082927 0.011153694720251676 -0.03983255395831143 -0.079825050440052336 -0.043159331362373529 1.1474709844873472 -0.51751409935827886 1.2970339617593845 -0.12955133440551075 -0.48464604808829587 0.2763175541313096 -1.1308982638577372 -0.19130343969537497 -0.5244410370456144 -0.33034055885603536 -0.15486832522177504 -0.40479109910559785 0.34211327191593532 -0.4959554833210495 -0.56876622188102022 -0.59478971689340254 0.44043242475458155 -0.19347562655726311 0.48099218356202877 -1.232945384338175 -0.22111367498522769 0.032972396325660847 -0.2985608820697731 -0.21502568317316756 0.63348576866405171 -0.035199639898513602 0.16794693868104374 -0.05561737964234504 0.41928264557511702 -0.36620628507007652 0.35776503659334857 0.04282447295711319 0.29689488626409594 -0.043471345956768305 -0.058757037378461385 -0.64591107465219899 0.64212752333725887 -0.0287426346129246 -0.087147447671822323 0.1133813569130394 -0.11102165949433199 -0.3113951954560919 0.32042231895237544 -0.19872162637156632 0.70857269834680747 0.098867376223539374 -0.093819065640695712 -0.77223360874720237 0.46433171501743559 0.20543074838875441 -0.44980335167510904 -0.17778861188155246;0.32728351640086323 -0.49632611852178504 0.68775998760713908 0.37050836389703329 0.094771431799859612 -0.17380837896092269 0.061159421373524051 0.056942525859336589 0.75978537048520856 0.4706460996580305 -0.15302715654326798 -0.23110821660470574 0.32934512563916141 0.09234029798848685 -0.06578941587793101 0.43598091580686282 0.38833376888056031 0.12925537318698851 0.087529664942293958 0.67190982664541832 -0.29806183493712224 -0.15729351092444915 -0.16616788241642569 0.20422898924762312 -0.0073291084565236461 1.0501171425680136 0.29492676848222027 0.02242474782919969 -0.078686980865069117 -0.26372463062050228 0.014681742196157527 0.28939036620188258 -0.37297481380756203 0.24310681997290781 -0.16139562705084179 0.3747521174455416 0.10666719149662542 0.58511036995039922 -0.4667289613994553 -0.24410527083545697 -0.27271057584588243 0.24824230953758944 -0.052039389645756322 0.70288058532817044 -0.53276964652617076 -0.24246053666364079 -0.99720254305410849 0.094829991988975779 0.087220429506925282 0.60455230648214764 -0.37690064335488621 -0.14265412304777372 -0.28908062156017261 -0.0095021805167026328 0.50148720063947783 0.20101948391132696 -0.19447562798009235 0.28210308366551612 0.06928519321889498 0.25906600981861738;-0.33254044332782157 -0.13978051776094649 0.24003511898563143 0.52074810854726084 -0.19011677293580542 -0.12161023471948457 0.20751867009987257 -0.37018167842028621 -0.34277538003108299 0.48281408600111808 0.28148137121796063 -0.12973209247624987 0.27187065127541271 -0.32006105814829838 -0.16060515154628366 0.086468600694621298 0.26000765509626284 0.13750328820775204 0.18427652692889263 -0.94419218856103337 0.0096992626082964568 0.71665235312180264 -0.016264035116116109 -0.097620603183555768 -0.13902975830929296 -0.53058834069739769 -0.43370113581553676 0.31485324605169368 -0.23516668271706873 0.096489413219638456 -0.30938572052378621 0.49070054802126839 -0.14482782076920539 0.24890267220340404 -0.052627053438141849 0.25230522210619327 -0.72084001201855308 0.18694408674972857 -0.044330674743009321 0.043910408687882464 -0.036041787520911223 0.042456684140902853 0.44940677189957362 0.37847945395879101 -0.24923207311914569 -0.29456023970258455 0.042020674450353485 0.15343465656959024 -0.037568603553547165 0.24628077763721198 0.16528882667602579 -0.39376917371898928 -0.20489573242143205 -0.24846573815514017 0.16460727155031712 0.20389799757928864 0.44529633622398102 0.32004284839807851 -0.028466165693184386 0.086512920744792943;0.4793450057166308 -0.52254229197433677 1.3400555804217453 0.14451699699829851 0.42596080659297014 0.00613856014796963 0.32175949047601421 0.010216723539995707 1.5297429103559341 0.053320936309996021 -0.63211361730912663 -0.046129450038047998 0.12080018772375201 -0.3727101317361371 0.79288992933235991 0.42377265469297121 0.34108764463629671 0.5756922690556201 -0.42905399207957917 -0.35201636783343337 -0.23602347146460598 0.7524450260319131 0.18474434500332787 0.65990918497318851 -0.085252617963228042 0.16129461543950263 -0.2295869084072997 0.51886134077346757 0.21579772692090102 0.094529471724523306 -0.25787868305099976 0.073182542834293721 -0.65456481461056915 0.78539623533808078 -0.15290035844428773 -0.19830342704558918 -0.023173589288578329 0.64662449125807342 -0.78339796282681773 0.43535801762948284 -0.14636490948299405 0.17620439715531439 -0.39414543852268502 0.18878878073656424 -0.60981269867829757 0.45702007975773828 -0.30306622107016373 -0.27560427744942956 0.12463213618198007 -0.032974419943416447 -0.69091292505161539 0.35859351822423619 -0.19624998935868132 -0.54975993928704403 0.18586728694691027 0.19077873870091017 -0.49213272718825185 0.094763020632920233 -0.073243788230418216 -0.30457421764298576;0.52233141652822301 -0.56263827281684731 -0.1197870430435557 -0.28501251911510062 -0.1773569315551107 0.23973506541212564 0.41066903292123175 -0.20425929194102421 -0.21875037513523021 -0.83978275978549288 -0.12769233275893199 -0.49669726270839426 -0.060601913972898915 0.012839328730432418 -1.1159149198291758 -0.42619997180931168 -0.96386281382824279 -0.8055023192144708 0.15329569084249964 -0.31924094087565486 -0.39665118198951849 -0.69826934993426859 0.37559060079450074 -0.57637417678928538 -0.4681979919515537 -0.10021041184557257 -0.2210402987072036 -1.4106294082754065 0.2346459757894773 -0.0075794998148271259 -0.24445241373993254 0.7456565249773407 0.50164594599475232 -0.011502878136292301 0.21245937585162836 -0.42462918566166152 0.23136179734990225 0.83539781697697102 0.40664827743521165 0.32664150850033841 0.54451502869135848 -0.37965059011177854 0.29992335004084836 0.87200851537936275 0.03516949172545298 0.24735748401750546 0.71957430785214327 0.27433566064600734 -0.18029716472251781 0.82173592225425451 -0.41145945070075374 -0.10618233119274756 0.90604120334485416 -0.23445374675519892 -0.026172504118255339 0.52076446235959306 -0.21257544195418837 0.32782347241150839 0.35319255476160472 0.1387823550157985];

% Layer 2
b2 = [-0.83342149836056434;-0.10722340970872543;0.37139909280580274;-0.17528501304673594;0.23941019425453747;0.57557421235701522;0.8613126506642127;-0.80836035951822782;-0.77284493328021675];
LW2_1 = [0.72762330292046018 -0.81384952606565608 0.64199082273985342 0.16474604847679314 1.8973127354720436 -1.1348659014248466 -0.29234602055995978 2.233995097001849 -0.11619115645428547 0.25531285650805502 0.0015981646688916287 -1.2410839271535072 1.9113767268491142 0.133397526316891 -0.1285161180253187 0.56728503461685786 0.34888652695611777 -0.78407438273106489 0.25301529790012928 1.0020503137979504;3.4974626978653842 -1.67652374035603 -0.083933373977563633 -0.59757540045473578 1.7265526979536303 -1.9923014334867684 -0.52682581258472649 1.8049009748637679 -0.60861950566168344 0.58312466992913403 -0.45338126527551381 1.9454848463636798 -2.6769182215138758 0.39099518435828789 0.19088571309876187 -0.057172097446187335 -0.60009200557960185 -0.88021698332167408 0.12438706497055446 0.28583155424160656;-3.353003862773599 -0.22463676989976133 0.81408319335171486 -0.14211278903036051 0.71868122379929211 0.63559497924932673 -2.3591937935828438 0.43030423024266068 0.58163300622838543 0.2140556177376205 -1.1371506969263567 0.9090900094343074 -0.33024905496009183 -1.0961183212739538 1.0668755462586319 -1.1770842099533518 0.33318913361880137 -0.22806579350047099 -0.38260626206667558 -0.44148517120134739;-0.29963967641469036 0.81784576442353052 1.3654018331615081 -0.85405576777198511 -0.98822257957213278 0.34277873123278146 -1.184142971233165 -3.2342469880213791 -0.95260727699662673 -1.8100126569683723 -0.92289715306628117 -0.25116504288792607 0.81432679837997857 -0.44184735060845037 -0.31244046244167778 -1.3856085530471829 0.34022864266002806 -0.35545541827136268 -0.26540632326128838 -0.72192936865639123;-0.17089479833887811 -1.7603936119015129 -0.4562356384957042 1.1539726547355367 0.66127848254597077 1.8266251332405972 2.5148838590301952 -1.9839949182587113 0.19430964754132443 0.11548215839564095 1.2692475809848733 -1.1982385101333042 1.0949415683251196 -1.4937016387899282 -0.65425769806148959 0.019316205695178775 1.25740609936139 0.94496134914835728 0.96446700542884589 -2.625037182851512;-0.031204512763803271 -0.80387985920583549 -0.29299180912873934 0.23613965254623853 -1.3004836164889391 -0.39280514029712571 -1.468630598600283 -2.4937070312188965 -0.49110091032613729 0.9931782192851476 0.8884864104398017 1.9210279069984211 -1.8349417640401122 0.56727410206442141 -0.60545038997211331 -0.12866381020533338 -1.1548802314847444 2.0485336531952432 1.0709408520223629 0.71030958013604717;-0.28558917344461715 0.33664033792602949 -0.97361605651303729 -1.9134022039627492 -1.90010022850769 -0.6712431012820429 2.1016253035038845 0.84939705511139207 -0.37117560406221717 -0.53332350070288437 1.6567740917946563 -0.50628907971722725 1.4379038053317392 -0.47982129589809547 0.69502220958342209 1.0116418773910674 -2.0126798318604218 0.1870223253688173 -0.72829748181385567 -1.4100016262261401;-0.087045638285702984 2.33236441074179 -0.89787385463042013 0.56897927114413605 1.4373181964414874 -0.18058572723024074 1.4760463834397941 2.3669310044092868 -1.4129817256343542 1.5387899072559867 -0.85177824025232729 -0.70236155938017608 -2.2587827624802657 0.026973857559129604 -1.2624338827971411 -0.64794586220325778 0.8906699903533164 -0.048322867966427291 0.30839093803430173 0.1771513963815676;1.7265454832398626 -1.315076560498829 0.42764553593032539 1.3789509279800076 -0.10930968908620511 1.6641290856141739 0.62046159730207584 2.0618595708634526 1.035589577433599 0.58758346424371199 -0.011560204628905882 1.3279776444539064 2.8675289427546269 2.6834739723502881 0.65735599983115878 2.2949947621511146 -0.9534704256540576 0.19562391840943763 -2.704972337211327 1.5342911518300808];

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX, X = {X}; end;

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
    Q = size(X{1},1); % samples/series
else
    Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS
    
    % Input 1
    X{1,ts} = X{1,ts}';
    Xp1 = mapminmax_apply(X{1,ts},x1_step1);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = softmax_apply(repmat(b2,1,Q) + LW2_1*a1);
    
    % Output 1
    Y{1,ts} = a2;
    Y{1,ts} = Y{1,ts}';
end

% Final Delay States
Xf = cell(1,0);
Af = cell(2,0);

% Format Output Arguments
if ~isCellX, Y = cell2mat(Y); end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings)
y = bsxfun(@minus,x,settings.xoffset);
y = bsxfun(@times,y,settings.gain);
y = bsxfun(@plus,y,settings.ymin);
end

% Competitive Soft Transfer Function
function a = softmax_apply(n,~)
if isa(n,'gpuArray')
    a = iSoftmaxApplyGPU(n);
else
    a = iSoftmaxApplyCPU(n);
end
end
function a = iSoftmaxApplyCPU(n)
nmax = max(n,[],1);
n = bsxfun(@minus,n,nmax);
numerator = exp(n);
denominator = sum(numerator,1);
denominator(denominator == 0) = 1;
a = bsxfun(@rdivide,numerator,denominator);
end
function a = iSoftmaxApplyGPU(n)
nmax = max(n,[],1);
numerator = arrayfun(@iSoftmaxApplyGPUHelper1,n,nmax);
denominator = sum(numerator,1);
a = arrayfun(@iSoftmaxApplyGPUHelper2,numerator,denominator);
end
function numerator = iSoftmaxApplyGPUHelper1(n,nmax)
numerator = exp(n - nmax);
end
function a = iSoftmaxApplyGPUHelper2(numerator,denominator)
if (denominator == 0)
    a = numerator;
else
    a = numerator ./ denominator;
end
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n,~)
a = 2 ./ (1 + exp(-2*n)) - 1;
end
